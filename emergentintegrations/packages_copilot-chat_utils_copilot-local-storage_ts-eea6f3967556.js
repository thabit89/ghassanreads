"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["packages_copilot-chat_utils_copilot-local-storage_ts"],{25641:(e,t,r)=>{let o;r.d(t,{CB:()=>C,DW:()=>O,F2:()=>er,FF:()=>m,H2:()=>R,Ik:()=>B,JP:()=>G,Jz:()=>_,MB:()=>g,NJ:()=>W,OC:()=>$,Od:()=>v,P:()=>H,Q7:()=>ee,Qt:()=>M,SI:()=>j,Sm:()=>F,Th:()=>X,UM:()=>et,UU:()=>Y,VR:()=>c,Vb:()=>A,Vc:()=>U,XN:()=>k,Xo:()=>N,Xs:()=>y,Y6:()=>T,Ye:()=>eo,Z6:()=>x,Z8:()=>w,Zs:()=>u,aX:()=>E,fG:()=>h,hV:()=>en,j$:()=>Q,k4:()=>ei,lG:()=>V,lj:()=>K,mF:()=>d,mx:()=>es,nN:()=>S,p:()=>f,pF:()=>p,qS:()=>q,rT:()=>b,vg:()=>P,x_:()=>J,yR:()=>z,yh:()=>Z,z$:()=>L}),r(53627);var s=r(53419),i=r(25407),n=r(35247),a=r(44902),l=r(68637);let _="/copilot",c=`${_}/spaces`,u="https://github.com/features/copilot#pricing",p="https://github.com/settings/billing/budgets",g="https://github.com/settings/billing",h=50,d=20,E=5,S={400:"This message could not be processed.",401:"You\u2019re not authorized to use Copilot.",403:"Access denied. You do not have permission to view this.",404:"Resource not found. Please try again.",408:"Your network connection was interrupted. Please try again.",413:"Message too large. Please shorten it or remove some references and try again.",429:"GitHub API rate limit exceeded. Please wait and try again."},m={extensionForbidden:"Copilot extensions can\u2019t be used in shared conversations. Please unshare the conversation and try again."},O="I'm sorry but there was an error. Please try again.";function I({status:e,path:t,method:r,error:o,requestId:i,responseBody:a}){if(n.W.capiErrorResponseTelemetry){let n={status:e,requestId:i||"",path:t,method:r,error:o};a&&(n.responseBody=a.substring(0,100)),(0,s.BI)("dotcom_chat.capi_request_error",n)}}async function f({authToken:e,basePath:t,body:r,integrationId:o,method:s,path:i,streamingResponse:n=!1,realIp:l,signal:_,apiVersion:c}){try{let u,p={Authorization:e.authorizationHeaderValue};for(let e of(o&&(p["copilot-integration-id"]=o),(0,a.f)())){let t=e.split("="),r=t[0]?.replaceAll("_","-"),o="1";t.length>1&&(o=t[1]),p[`X-Experiment-${r}`]=o}c&&(p["X-GitHub-Api-Version"]=c),n&&(p["Content-Type"]="text/event-stream"),l&&(p["X-Real-IP"]=l);let g=await fetch(t+i,{method:s,mode:"cors",cache:"no-cache",headers:p,body:JSON.stringify(r),signal:_});if(g.ok)return g;try{let e=g.clone();u=await e.text()}catch{u=void 0}return I({status:g.status,requestId:g.headers?.get("X-GitHub-Request-ID")||"",path:i,method:s,error:S[g.status]||O,responseBody:u}),{status:g.status,ok:!1,error:S[g.status]||O,response:g}}catch(e){return I({status:500,path:i,method:s,error:e instanceof Error?e.message:O}),{status:500,ok:!1,error:O}}}function T({role:e,content:t,mediaContent:r,error:o,references:s=[],thread:i,confirmationResponses:n,clientSkillConfirmations:a,clientToolResults:l,parentMessageID:_,skillOptions:c}){return{id:crypto.randomUUID(),threadID:i?.id||"temp",role:e,content:t,mediaContent:r,createdAt:new Date().toISOString(),error:o,references:s,skillExecutions:[],clientConfirmations:n,clientToolResults:l,confirmations:a,parentMessageID:_,clientSide:!0,skillOptions:c}}function C(e){return e?.name||"New conversation"}function L(e){switch(e.type){case"figma":return e.title||e.url;case"file":case"folder":return D(e);case"file-diff":var t,r,o=e;let s=o.headFile?.path??o.baseFile?.path,i=s?.split("/").pop()??"";return o.selectedRange&&o.selectedRange.start?o.selectedRange.end&&o.selectedRange.start!==o.selectedRange.end?`${i} ${o.selectedRange.start}-${o.selectedRange.end}`:`${i} ${o.selectedRange.start}`:i;case"snippet":var n=e;if(n.title)return n.title;let a=n.path.split("/").pop(),l=`${n.range.start}-${n.range.end}`;return`${a}:${l}`;case"repository":return t=e,`${t.ownerLogin}/${t.name}`;case"symbol":case"docset":case"image":case"thread-scoped-file":case"thread-scoped-snippet":case"copilot-space":return e.name;case"commit":return e.message;case"pull-request":case"draft-issue":case"draft-update-issue":case"loop-node":case"web-search-result":case"loading":return e.title;case"tree-comparison":return r=e,`${r.baseRevision.substring(0,5)}..${r.headRevision.substring(0,5)}`;case"third-party":return e.displayName;case"workspace-terminal-log":return"terminal log";case"text":return e.name?e.name:"text reference";case"repo-instructions":return"copilot-instructions.md";case"issue":case"discussion":return e?.title||e.number.toString();case"org-instructions":return e?.owner;case"loop-execution":return e.loopTitle;case"github-url":return"Previous page";case"pr-overview":return"Overview";default:return"unrecognized reference"}}function A(e){switch(e.type){case"figma":case"web-search-result":case"github-url":return`${e.type}-${e.url}`;case"file":return`${e.type}-${e.repoOwner}/${e.repoName}@${e.commitOID}:${e.path}`;case"folder":return`${e.type}-${e.repoOwner}/${e.repoName}@${e.ref}:${e.path}`;case"file-changes":return`${e.type}-${e.repository.owner}/${e.repository.owner}@${e.ref}:${e.path}`;case"file-diff":return`${e.type}:${e.baseFile?.path}@${e.baseFile?.commitOID}-${e.headFile?.path}@${e.headFile?.commitOID}##${e.selectedRange?.start}-${e.selectedRange?.end}`;case"snippet":return`${e.type}-${e.repoOwner}/${e.repoName}@${e.commitOID}:${e.path}#${e.range.start}-${e.range.end}`;case"repository":return`${e.type}-${e.id}-${e.ownerLogin}/${e.name}`;case"symbol":return`${e.type}-${e.kind}-${e.name}`;case"docset":case"text":case"thread-scoped-file":return`${e.type}-${e.name}`;case"commit":return`${e.type}-@${e.oid}-${e.repository.owner}/${e.repository.name}`;case"pull-request":return`${e.type}-${e.id}-${e.repository.ownerLogin}/${e.repository.name}`;case"web-search":return`${e.type}-${e.query}`;case"workspace-terminal-log":return`${e.type}-${e.repoOwner}/${e.repoName}@${e.pullRequestID}`;case"repo-instructions":return`${e.type}-.github/custom-instructions.md`;case"image":return`${e.type}-${e.id}/${e.name}`;case"issue":case"discussion":return`${e.repository.owner}/${e.repository.name}#${e.number}`;case"draft-issue":case"draft-update-issue":return`${e.type}-${e.tag}`;case"thread-scoped-snippet":return`${e.type}-${e.name}-${e.range.start}-${e.range.end}`;case"loop-node":case"loading":return`${e.type}-${e.id}`;case"loop-execution":return`${e.type}-${e.executionID}`;case"copilot-space":return`${e.type}`;default:return""}}let P=()=>o??(o=new Set(["commit","discussion","figma","file","file-v2","file-diff","folder","issue","draft-issue","draft-update-issue","pull-request","org-instructions","repo-instructions","snippet","symbol","third-party","web-search","web-search-result","image","thread-scoped-file","thread-scoped-snippet","loading","loop-node","repository","docset","copilot-space","loop-execution","github-url"]));function R(e){return e.filter(e=>"third-party-mcp-tool-result"===e.type)}function b(e){let t=[];for(let r of e??[])if(P().has(r.type)){if("web-search"===r.type){for(let e of r.results){let r={...e,type:"web-search-result"};t.push(r)}continue}t.push(r)}return t}function G(e){switch(e.type){case"repository":return`/${e.ownerLogin}/${e.name}`;case"commit":return e.permalink;case"third-party":return e.displayUrl;case"snippet":if(("file"===e.type||"snippet"===e.type)&&e.languageName&&"markdown"===e.languageName.toLowerCase()){let t=new URL(e.url,window.location.origin);return t.search="plain=1",t.href}return e.url;case"loop-node":return e.url??"#";case"loop-execution":return`/copilot/l/${e.loopID}?version=${e.version}`;case"issue":case"figma":case"file":case"file-diff":case"folder":case"pull-request":case"discussion":case"repo-instructions":case"org-instructions":case"web-search-result":case"github-url":return e.url;default:return"#"}}function y(e){return"#"!==e&&""!==e}function w(e){let t=e.path.split("/");return(t.pop(),0===t.length)?"/":t.join("/")}function N(e){return D(e)}function D(e){return e.path.split("/").pop()||e.path}function v(e,t){return{type:"file",url:new URL((0,i.IO9)({repo:t,commitish:t.refInfo.name,action:"blob",path:e}),window.location.origin).href,path:e,repoID:t.id,repoOwner:t.ownerLogin,repoName:t.name,ref:t.ref,commitOID:t.commitOID}}function k(e,t,r){return{...v(e,r),type:"snippet",range:{start:t.start,end:t.end}}}function U(e){return{id:crypto.randomUUID(),title:e,type:"loading",isClientOnly:!0}}function $(e,t){return{type:"folder",url:new URL((0,i.IO9)({repo:t,commitish:t.refInfo.name,action:"tree",path:e}),window.location.origin).href,path:e,repoID:t.id,repoOwner:t.ownerLogin,repoName:t.name,ref:t.ref}}function F(e){return e.symbol?.fully_qualified_name||""}function M(e,t){let r=F(e);return{type:"symbol",kind:"suggestionSymbol",name:r,suggestionDefinitions:[{identOffset:{start:e.symbol?.ident_start||0,end:e.symbol?.ident_end||0},extentOffset:{start:e.symbol?.extent_start||0,end:e.symbol?.extent_end||0},kind:e.symbol?.kind||"",fullyQualifiedName:r,repoID:t.id,repoOwner:t.ownerLogin,repoName:t.name,ref:e.commit_sha,commitOID:e.commit_sha,path:e.path}],languageID:e.language_id}}function Y(e){return{...e,type:"docset"}}function q(e){return{...e,type:"repository"}}function K(e){return{owner:`${e} Instructions`,type:"org-instructions",url:"https://docs.github.com/en/copilot/customizing-copilot/adding-organization-custom-instructions-for-github-copilot"}}function B(e,t,r){return{type:"loop-node",id:e,title:t,url:r}}function H(e){return!!e&&"sourceRepos"in e}function x(e){return!!e&&!H(e)}function W(e){return e.reduce((e,t)=>("customInstructions"in t&&Array.isArray(t.customInstructions)&&e.push(...t.customInstructions),e),[])}function V(e,t){return W(t).length>0}function Q(e){return W(e).map(e=>e.owner).join(",")}function J(e,t){return e===t||void 0!==e&&void 0!==t&&A(e)===A(t)}function z(e,t){if(void 0===e&&void 0===t)return!0;if(void 0===e||void 0===t||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!J(e[r],t[r]))return!1;return!0}function j(e){return"file"===e.type}function X(e,t){if("user"===e.role)return{name:t,avatarURL:`/${t}.png`,type:"user"};if(e.references){let t=e.references.find(e=>"github.agent"===e.type);if(t)return{name:t.login,avatarURL:t.avatarURL,type:"agent"}}return{name:"Copilot",avatarURL:"",type:"copilot"}}function Z(e){return"agent"===e.type}function ee(e){let t=e.map(e=>X(e,"")).filter(e=>e?.type==="agent"),r=new Map;for(let e of t)r.set(e.name,e);return Array.from(r.values())}function et(e){return e.some(e=>e.references?.some(e=>"third-party-mcp-tool-result"===e.type)??!1)}function er(e){let t=new Date(e.updatedAt).getTime();return Date.now()-t>144e5}function eo(e){if(!e)return[];let t=new Set;return e.filter(e=>{let r=JSON.stringify(e.confirmation);return!t.has(r)&&(t.add(r),!0)})}function es(e){let t="type"in e&&"string"==typeof e.type?e.type:"repository",r=t?t.replace(/(\.api|-v2)$/,"").toLowerCase():"default";return{referenceType:t,suggestions:ei(l.y$[r]||l.y$.default).slice(0,3)}}function ei(e){let t=e.slice();for(let e=t.length-1;e>0;e--){let r=Math.floor(Math.random()*(e+1)),o=t[e];t[e]=t[r],t[r]=o}return t}function en(e,t){let r=t.split(" "),o=`${e} said`;return"Timeline"===e&&(o="The following action was initiated"),`${o}: ${r.slice(0,r.length<7?r.length:7).join(" ")}`}},51213:(e,t,r)=>{r.d(t,{C6:()=>s,UH:()=>l,Wp:()=>_,hs:()=>n,mF:()=>a,wh:()=>o,xP:()=>i});let o={explain:"explain",conversation:"conversation",suggest:"suggest",discussFileDiff:"discuss-file-diff",explainFileDiff:"explain-file-diff",reviewPr:"review-pull-request",actionsAgent:"actions-agent",planningAgent:"planning-agent"},s=["exception","filtered","publicCode","contentTooLarge","rateLimit","agentUnauthorized","agentRequest","networkError","multipleAgentsAttempt"],i=["bing-search","codesearch","semantic-code-search","lexical-code-search","kb-search","getfile","getfilechanges","getdiscussion","get-actions-job-logs","getalert","planskill","get-github-data","support-search","get-figma","codesearchagentskill","github-draft-issue.draft-issue","github-draft-issue.existing-issue","github-draft-issue.repository-metadata","github-draft-issue.get-issues"],n={Experiments:"experiements",Prompt:"prompt",None:"none"},a={Unlicensed:"unlicensed",LicensedFull:"licensed_full",LicensedLimited:"licensed_limited"},l={IndividualFree:"free",IndividualPro:"pro",IndividualProPlus:"pro_plus",Business:"business",Enterprise:"enterprise"},_="NULL_MESSAGE"},35247:(e,t,r)=>{r.d(t,{W:()=>s});var o=r(69599);let s=new class CopilotFeatureFlags{get immersiveFigmaIntegration(){return(0,o.G7)("copilot_immersive_figma_integration")}get planningAgent(){return(0,o.G7)("copilot_immersive_planning_agent")}get planningAgentAggregateTask(){return(0,o.G7)("copilot_immersive_planning_agent_aggregate_task")}get planningAgentPreserveRepoRefs(){return(0,o.G7)("copilot_immersive_planning_agent_preserve_repo_refs")}get draftIssueCodeSearch(){return(0,o.G7)("copilot_api_draft_issue_code_search")}get draftIssuesWithDependencies(){return(0,o.G7)("copilot_api_draft_issues_with_dependencies")}get focusTextAreaInsteadOfWorkbench(){return(0,o.G7)("copilot_focus_text_area_instead_of_workbench")}get forceLegacyChatDefaultModel(){return(0,o.G7)("copilot_api_force_legacy_base_chat_model")}get draftUpdateIssue(){return(0,o.G7)("copilot_api_github_draft_update_issue_skill")}get domPageContext(){return(0,o.G7)("copilot_use_dom_page_context")}get copilotChatInterviewSurvey(){return(0,o.G7)("copilot_chat_interview_survey")}get attachMultipleImages(){return(0,o.G7)("copilot_chat_attach_multiple_images")}get selectionAttachments(){return(0,o.G7)("copilot_chat_selection_attachments")}get customCopilots(){return(0,o.G7)("copilot_custom_copilots")}get immersiveStructuredModelPicker(){return(0,o.G7)("copilot_immersive_structured_model_picker")}get spacesDuplicate(){return(0,o.G7)("copilot_spaces_duplicate")}get customCopilotsFeaturePreview(){return(0,o.G7)("copilot_custom_copilots_feature_preview")}get clientDOMSkills(){return(0,o.G7)("copilot_client_dom_skills")}get dotcomChatClientSideSkills(){return(0,o.G7)("dotcom_chat_client_side_skills")}get loopsPlugin(){return(0,o.G7)("copilot_pipes")}get workbenchPlugin(){return(0,o.G7)("copilot_workbench")}get copilotChatOpeningThreadSwitch(){return(0,o.G7)("copilot_chat_opening_thread_switch")}get copilotReadSharedConversation(){return(0,o.G7)("copilot_read_shared_conversation")}get copilotByok(){return(0,o.G7)("copilot_byok")}get copilotDuplicateThread(){return(0,o.G7)("copilot_duplicate_thread")}get copilotShareActiveSubthread(){return(0,o.G7)("copilot_share_active_subthread")}get copilotChatO1Tools(){return(0,o.G7)("copilot_api_tools_for_non_streaming_models")}get bingGroundingServiceEnabled(){return(0,o.G7)("copilot_bing_search_use_azure_ai_agent_service")}get bingGroundingUIEnabled(){return(0,o.G7)("copilot_bing_search_use_grounding_ui")&&this.bingGroundingServiceEnabled}get showDeepCodeSearchButton(){return(0,o.G7)("copilot_show_deep_code_search_button")&&(0,o.G7)("copilot_api_search_agent_skill")}get showSubIssuesManageWithCopilotButton(){return(0,o.G7)("copilot_show_copilot_sub_issues_button_on_issues_page")}get deleteAllConversations(){return(0,o.G7)("copilot_delete_all_conversations")}get staffPromptDialog(){return(0,o.G7)("copilot_staff_prompt_dialog")}get workbenchTerminal(){return(0,o.G7)("copilot_workbench_terminal")}get workbenchPreviewAnalytics(){return(0,o.G7)("copilot_workbench_preview_analytics")}get workbenchRefreshOnWsod(){return(0,o.G7)("copilot_workbench_refresh_on_wsod")}get workbenchShowConnectionReloadBanner(){return(0,o.G7)("copilot_workbench_connection_reload_banner")}get visionAllowedInClaude(){return(0,o.G7)("copilot_chat_vision_in_claude")}get visionSkipThreadCreate(){return(0,o.G7)("copilot_chat_vision_skip_thread_create")}get premiumRequestQuotasEnabled(){return(0,o.G7)("copilot_premium_request_quotas")}get freeToPaidTelemetry(){return(0,o.G7)("copilot_free_to_paid_telem")}get freeToPaidSettingsUpgrade(){return(0,o.G7)("copilot_ftp_settings_upgrade")}get singleUserIteration(){return(0,o.G7)("copilot_spark_single_user_iteration")}get freeToPaidYourCopilotSettings(){return(0,o.G7)("copilot_ftp_your_copilot_settings")}get freeToPaidUpgradeToProFromModels(){return(0,o.G7)("copilot_ftp_upgrade_to_pro_from_models")}get commitOnDefaultBranch(){return(0,o.G7)("spark_commit_on_default_branch")}get spacesImagesEnabled(){return(0,o.G7)("copilot_custom_copilots_images")}get knowledgeBasesDisabled(){return(0,o.G7)("kb_sunset")&&!(0,o.G7)("kb_sunset_override")}get multiFilePickerAttachment(){return(0,o.G7)("copilot_chat_multi_file_picker_attachment")}get copilotPersistEditedDraftIssues(){return(0,o.G7)("copilot_immersive_draft_issue_persist_edited_issues_in_session")}get sparkUseBillingHeaders(){return(0,o.G7)("copilot_spark_use_billing_headers")}get workbenchDefaultSonnet4(){return(0,o.G7)("workbench_default_sonnet4")}get sparkAllowEmptyCommit(){return(0,o.G7)("copilot_spark_allow_empty_commit")}get copilotThirdPartyMcp(){return(0,o.G7)("copilot_api_dotcom_chat_use_third_party_mcp_servers")}get hyperspaceDiffView(){return(0,o.G7)("hyperspace_diff_view")}get disableModelPickerWhileStreaming(){return(0,o.G7)("copilot_chat_disable_model_picker_while_streaming")}get sparkSyncRepositoryAfterIteration(){return(0,o.G7)("spark_sync_repository_after_iteration")}get sparkUseSeparateSuggestionArgs(){return(0,o.G7)("copilot_spark_use_separate_suggestion_args")}get freeToPaidHyperspaceUpgradePrompt(){return(0,o.G7)("copilot_ftp_hyperspace_upgrade_prompt")}get reduceChatQuotaChecks(){return(0,o.G7)("copilot_chat_reduce_quota_checks")}get kbSemanticApiMigration(){return(0,o.G7)("kb_semantic_api_migration")}get requestTracing(){return(0,o.G7)("copilot_api_staff_only_tracing")}get coffeTraceViewer(){return(0,o.G7)("copilot_coffe_trace_view_enabled")}get copilotSpacesReadAccessToUserOwnedSpaces(){return(0,o.G7)("copilot_spaces_read_access_to_user_owned_spaces")}get copilotSpacesPublicAccessToUserOwnedSpaces(){return(0,o.G7)("copilot_spaces_public_access_to_user_owned_spaces")}get copilotGlobalOverlayV2(){return(0,o.G7)("copilot_global_overlay_v2")}get copilotWorkbenchSyntheticGeneration(){return(0,o.G7)("copilot_workbench_synthetic_generation")}get copilotWorkbenchAgentSeedTool(){return(0,o.G7)("copilot_workbench_agent_seed_tool")}get capiErrorResponseTelemetry(){return(0,o.G7)("copilot_capi_error_response_telemetry")}get sparkWriteIterationHistoryToGit(){return(0,o.G7)("copilot_spark_write_iteration_history_to_git")}get sparkReadIterationHistoryFromGit(){return(0,o.G7)("copilot_spark_read_iteration_history_from_git")}get sparkReadIterationHistoryFromGitV2(){return(0,o.G7)("copilot_spark_read_iteration_history_from_git_v2")}get copilotWorkbenchCache(){return(0,o.G7)("copilot_workbench_cache")}get copilotWorkbenchGrepGlob(){return(0,o.G7)("copilot_workbench_grepglob")}get copilotWorkbenchRatelimitFallback(){return(0,o.G7)("copilot_workbench_ratelimit_fallback")}get sparkUseNewDataLayer(){return(0,o.G7)("copilot_spark_new_data_layer")}get sparkIteratePanelChat(){return(0,o.G7)("copilot_spark_iterate_panel_chat")}get enableGenerateSummaryTool(){return(0,o.G7)("copilot_spark_iterate_panel_chat")}get sparkUseProgressiveErrorHandling(){return(0,o.G7)("copilot_spark_progressive_error_handling")}get sparkLoadingWebGL(){return(0,o.G7)("copilot_spark_loading_webgl")}get fileBlockRefMatching(){return(0,o.G7)("copilot_file_block_ref_matching")}get stableConversationView(){return(0,o.G7)("copilot_stable_conversation_view")}get copilotRedirectDiffViewToImmersive(){return(0,o.G7)("copilot_chat_diff_view_redirect")}get codingAgentFileReference(){return(0,o.G7)("copilot_agent_tasks_btn_file_reference")}get loopsShareButton(){return(0,o.G7)("copilot_loops_share_button")}get mcpToolDescriptions(){return(0,o.G7)("copilot_mcp_tool_descriptions")}get copilotWorkbenchUseSinglePrompt(){return(0,o.G7)("copilot_workbench_use_single_prompt")}get copilotResourcePanel(){return(0,o.G7)("copilot_resource_panel")}get spacesAsAttachmentsEnabled(){return(0,o.G7)("copilot_spaces_as_attachments")}get loopExecutionReferences(){return(0,o.G7)("loops_execution_references")}get copilotMissionControl(){return(0,o.G7)("copilot_mission_control")}get convertToSpaceEnabled(){return(0,o.G7)("kb_convert_to_space")}}},79064:(e,t,r)=>{r.d(t,{Jt:()=>c,iI:()=>u});var o=r(50467),s=r(31635),i=r(21728),n=r(45062),a=r(82075),l=r(96540),_=r(25641);let CopilotLocalStorage=class CopilotLocalStorage{get selectedThreadID(){return this.localStorage.getItem(this.COPILOT_SELECTED_THREAD_ID_STORAGE_KEY)}set selectedThreadID(e){let t=this.COPILOT_SELECTED_THREAD_ID_STORAGE_KEY;if(null==e)return void this.localStorage.removeItem(t);this.localStorage.setItem(t,e)}getModel(e){let t=this.localStorage.getItem(this.COPILOT_SELECTED_MODEL_STORAGE_KEY(e));return null===t?t:JSON.parse(t)}setModel(e,t){this.localStorage.setItem(this.COPILOT_SELECTED_MODEL_STORAGE_KEY(e),JSON.stringify(t)),e&&this.localStorage.setItem(this.COPILOT_SELECTED_MODEL_STORAGE_KEY(null),JSON.stringify(t))}get settings(){let e=this.localStorage.getItem(this.COPILOT_SETTINGS_STORAGE_KEY(this.selectedThreadID));return null===e?e:JSON.parse(e)}set settings(e){this.localStorage.setItem(this.COPILOT_SETTINGS_STORAGE_KEY(this.selectedThreadID),JSON.stringify(e))}getPanelHeight(){let e=this.localStorage.getItem(this.COPILOT_PANEL_HEIGHT);return e?parseInt(e):this.DEFAULT_PANEL_HEIGHT}setPanelHeight(e){let t=this.COPILOT_PANEL_HEIGHT;this.localStorage.setItem(t,e.toString())}getPanelWidth(){let e=this.localStorage.getItem(this.COPILOT_PANEL_WIDTH);return e?parseInt(e):this.DEFAULT_PANEL_WIDTH}setPanelWidth(e){let t=this.COPILOT_PANEL_WIDTH;this.localStorage.setItem(t,e.toString())}getRepoCustomInstructionsState(){return"false"!==this.localStorage.getItem(this.COPILOT_REPO_CUSTOM_INSTRUCTIONS_STATE_KEY)}setRepoCustomInstructionsState(e){let t=this.COPILOT_REPO_CUSTOM_INSTRUCTIONS_STATE_KEY;this.localStorage.setItem(t,e.toString())}getCollapsedState(){return"false"!==this.sessionStorage.getItem(this.COPILOT_COLLAPSED_STATE_KEY)}setCollapsedState(e){let t=this.COPILOT_COLLAPSED_STATE_KEY;this.sessionStorage.setItem(t,e.toString())}getSelectedTopic(e){return this.localStorage.getItem(this.COPILOT_SELECTED_TOPIC_STORAGE_KEY(e))}setSelectedTopic(e,t){if(null==t)return void this.localStorage.removeItem(this.COPILOT_SELECTED_TOPIC_STORAGE_KEY(e));let r=this.COPILOT_SELECTED_TOPIC_STORAGE_KEY(e);this.localStorage.setItem(r,t)}getSavedMessage(e){return this.localStorage.getItem(this.COPILOT_SAVED_USER_MESSAGE_KEY(e))}setSavedMessage(e,t){this.setSavedMessageFast(e,t)}setSavedMessageFast(e,t){let r=this.COPILOT_SAVED_USER_MESSAGE_KEY(e);if(null==t)return void this.localStorage.removeItem(r);this.localStorage.setItem(r,t)}clearSavedUserMessage(e){this.localStorage.removeItem(this.COPILOT_SAVED_USER_MESSAGE_KEY(e))}getSavedUserMessageOnError(e){return this.localStorage.getItem(this.COPILOT_SAVED_USER_MESSAGE_ON_ERROR_KEY(e))}setSavedUserMessageOnError(e,t){let r=this.COPILOT_SAVED_USER_MESSAGE_ON_ERROR_KEY(e);if(null==t)return void this.localStorage.removeItem(r);this.localStorage.setItem(r,t)}clearSavedUserMessageOnError(e){this.localStorage.removeItem(this.COPILOT_SAVED_USER_MESSAGE_ON_ERROR_KEY(e))}getEntrypointMessage(){let e,t=this.localStorage.getItem(this.COPILOT_ENTRYPOINT_MESSAGE_KEY);if(null==t)return null;try{e=t.startsWith("{")?JSON.parse(t):void 0}catch{}return e&&void 0!==e.message?{message:e.message,references:e.references}:{message:t,references:void 0}}setEntrypointMessage(e,t){if(null==e)return void this.localStorage.removeItem(this.COPILOT_ENTRYPOINT_MESSAGE_KEY);this.localStorage.setItem(this.COPILOT_ENTRYPOINT_MESSAGE_KEY,JSON.stringify({message:e,references:t}))}getLastUsedRepository(){let e=this.localStorage.getItem(this.COPILOT_LAST_USED_REPOSITORY_KEY);if(!e)return null;try{return JSON.parse(e)}catch{return null}}setLastUsedRepository(e){this.localStorage.setItem(this.COPILOT_LAST_USED_REPOSITORY_KEY,JSON.stringify(e))}getCurrentReferences(e){let t=this.COPILOT_CURRENT_REFERENCES_KEY(e),r=this.localStorage.getItem(t);return r?JSON.parse(r):null}setCurrentReferences(e,t){let r=this.COPILOT_CURRENT_REFERENCES_KEY(e),o=t.filter((e,r)=>r===t.findIndex(t=>(0,_.Vb)(e)===(0,_.Vb)(t)));this.localStorage.setItem(r,JSON.stringify(o))}clearCurrentReferences(e){let t=this.COPILOT_CURRENT_REFERENCES_KEY(e);this.localStorage.removeItem(t)}migrateNullThreadToNewThread(e){let t=this.getSavedMessage(null);this.setSavedMessageFast(null,null),t&&this.setSavedMessageFast(e,t);let r=this.getCurrentReferences(null);this.clearCurrentReferences(null),r&&this.setCurrentReferences(e,r)}getImmersiveSidebarCollapsedState(){let e=this.localStorage.getItem(this.COPILOT_IMMERSIVE_SIDEBAR_COLLAPSED_STATE_KEY);return null===e||"true"===e}setImmersiveSidebarCollapsedState(e){this.localStorage.setItem(this.COPILOT_IMMERSIVE_SIDEBAR_COLLAPSED_STATE_KEY,String(e))}getCopilotDiffReferences(){let e=this.localStorage.getItem(this.COPILOT_DIFF_REFERENCES_KEY);return e?JSON.parse(e):null}setCopilotDiffReferences(e){let t=Array.isArray(e)?e:[e];this.localStorage.setItem(this.COPILOT_DIFF_REFERENCES_KEY,JSON.stringify(t))}removeCopilotDiffReferences(){this.localStorage.removeItem(this.COPILOT_DIFF_REFERENCES_KEY)}getMeterBannerFlag(){let e=this.localStorage.getItem(this.COPILOT_METER_BANNER_FLAG);return null===e?null:"true"===e}setMeterBannerFlag(e){this.localStorage.setItem(this.COPILOT_METER_BANNER_FLAG,String(e))}removeMeterBannerFlag(){this.localStorage.removeItem(this.COPILOT_METER_BANNER_FLAG)}getQuotaExceededBannerFlag(){let e=this.tempStorage.getItem(this.COPILOT_QUOTA_EXCEEDED_BANNER_FLAG);return null===e?null:"true"===e}setQuotaExceededBannerFlag(e){this.tempStorage.setItem(this.COPILOT_QUOTA_EXCEEDED_BANNER_FLAG,String(e))}removeQuotaExceededBannerFlag(){this.tempStorage.removeItem(this.COPILOT_QUOTA_EXCEEDED_BANNER_FLAG)}getTrialSuccessBannerFlag(){return this.getBooleanFlag(this.COPILOT_TRIAL_SUCCESS_BANNER_FLAG)}setTrialSuccessBannerFlag(e){this.tempStorage.setItem(this.COPILOT_TRIAL_SUCCESS_BANNER_FLAG,String(e))}removeTrialSuccessBannerFlag(){this.tempStorage.removeItem(this.COPILOT_TRIAL_SUCCESS_BANNER_FLAG)}getProPlusSuccessBannerFlag(){return this.getBooleanFlag(this.COPILOT_PRO_PLUS_SUCCESS_BANNER_FLAG)}setProPlusSuccessBannerFlag(e){this.tempStorage.setItem(this.COPILOT_PRO_PLUS_SUCCESS_BANNER_FLAG,String(e))}removeProPlusSuccessBannerFlag(){this.tempStorage.removeItem(this.COPILOT_PRO_PLUS_SUCCESS_BANNER_FLAG)}getProPlusAnimationFlag(){return this.getBooleanFlag(this.COPILOT_PRO_PLUS_ANIMATION_FLAG)}setProPlusAnimationFlag(e){this.tempStorage.setItem(this.COPILOT_PRO_PLUS_ANIMATION_FLAG,String(e))}removeProPlusAnimationFlag(){this.tempStorage.removeItem(this.COPILOT_PRO_PLUS_ANIMATION_FLAG)}getTracingRequestedFlag(){return"true"===this.sessionStorage.getItem(this.COPILOT_TRACING_REQUESTED_FLAG)}setTracingRequestedFlag(e){this.sessionStorage.setItem(this.COPILOT_TRACING_REQUESTED_FLAG,String(e))}getWrapCodeLines(){return"true"===this.localStorage.getItem(this.COPILOT_WRAP_CODE_LINES_KEY)}setWrapCodeLines(e){this.localStorage.setItem(this.COPILOT_WRAP_CODE_LINES_KEY,String(e))}getBooleanFlag(e,t=this.tempStorage){let r=t.getItem(e);return null===r?null:"true"===r}getSpacesMcpBannerDismissalCount(){let e=this.localStorage.getItem(this.COPILOT_SPACES_MCP_BANNER_DISMISSAL_COUNT);return e?parseInt(e,10):0}setSpacesMcpBannerDismissalCount(e){let t=this.COPILOT_SPACES_MCP_BANNER_DISMISSAL_COUNT;this.localStorage.setItem(t,e.toString())}retrieveAndValidateRequestIDs(){let e=this.localStorage.getItem(this.COPILOT_MESSAGE_REQUEST_ID_KEY);try{let t=JSON.parse(e||"[]");if(!Array.isArray(t)||0===t.length)return[];return t.filter(e=>"string"==typeof e.messageID&&"string"==typeof e.requestID)}catch{return[]}}addRequestID(e,t){let r=this.retrieveAndValidateRequestIDs(),o=r.findIndex(t=>t.messageID===e);-1!==o&&r.splice(o,1),r.push({messageID:e,requestID:t}),r.length>this.MAX_MESSAGE_REQUEST_ID_STORAGE_COUNT&&r.shift(),this.localStorage.setItem(this.COPILOT_MESSAGE_REQUEST_ID_KEY,JSON.stringify(r))}getRequestID(e){let t=this.retrieveAndValidateRequestIDs().find(t=>t.messageID===e);return t?t.requestID:void 0}constructor(){(0,o._)(this,"COPILOT_REPO_CUSTOM_INSTRUCTIONS_STATE_KEY","COPILOT_REPO_CUSTOM_INSTRUCTIONS_STATE_KEY"),(0,o._)(this,"COPILOT_SELECTED_THREAD_ID_STORAGE_KEY","COPILOT_SELECTED_THREAD_ID_STORAGE_KEY"),(0,o._)(this,"COPILOT_COLLAPSED_STATE_KEY","COPILOT_COLLAPSED_STATE_KEY"),(0,o._)(this,"COPILOT_IMMERSIVE_SIDEBAR_COLLAPSED_STATE_KEY","COPILOT_IMMERSIVE_SIDEBAR_COLLAPSED_STATE_KEY"),(0,o._)(this,"COPILOT_PANEL_HEIGHT","COPILOT_PANEL_HEIGHT"),(0,o._)(this,"DEFAULT_PANEL_HEIGHT",600),(0,o._)(this,"COPILOT_PANEL_WIDTH","COPILOT_PANEL_WIDTH"),(0,o._)(this,"COPILOT_ENTRYPOINT_MESSAGE_KEY","COPILOT_ENTRYPOINT_MESSAGE_KEY"),(0,o._)(this,"COPILOT_MESSAGE_REQUEST_ID_KEY","COPILOT_MESSAGE_REQUEST_ID_KEY"),(0,o._)(this,"COPILOT_METER_BANNER_FLAG","COPILOT_METER_BANNER_FLAG"),(0,o._)(this,"COPILOT_QUOTA_EXCEEDED_BANNER_FLAG","COPILOT_QUOTA_EXCEEDED_BANNER_FLAG"),(0,o._)(this,"COPILOT_TRIAL_SUCCESS_BANNER_FLAG","COPILOT_TRIAL_SUCCESS_BANNER_FLAG"),(0,o._)(this,"COPILOT_PRO_PLUS_SUCCESS_BANNER_FLAG","COPILOT_PRO_PLUS_SUCCESS_BANNER_FLAG"),(0,o._)(this,"COPILOT_PRO_PLUS_ANIMATION_FLAG","COPILOT_PRO_PLUS_ANIMATION_FLAG"),(0,o._)(this,"COPILOT_WRAP_CODE_LINES_KEY","COPILOT_WRAP_CODE_LINES_KEY"),(0,o._)(this,"COPILOT_TRACING_REQUESTED_FLAG","COPILOT_TRACING_REQUESTED_FLAG"),(0,o._)(this,"COPILOT_DIFF_REFERENCES_KEY","COPILOT_DIFF_REFERENCES_KEY"),(0,o._)(this,"COPILOT_SPACES_MCP_BANNER_DISMISSAL_COUNT","COPILOT_SPACES_MCP_BANNER_DISMISSAL_COUNT"),(0,o._)(this,"COPILOT_LAST_USED_REPOSITORY_KEY","COPILOT_LAST_USED_REPOSITORY_KEY"),(0,o._)(this,"MAX_MESSAGE_REQUEST_ID_STORAGE_COUNT",100),(0,o._)(this,"DEFAULT_PANEL_WIDTH",480),(0,o._)(this,"COPILOT_SELECTED_MODEL_STORAGE_KEY",e=>`COPILOT_SELECTED_MODEL_${e}`),(0,o._)(this,"COPILOT_SETTINGS_STORAGE_KEY",e=>`COPILOT_SETTINGS_${e}`),(0,o._)(this,"COPILOT_SAVED_USER_MESSAGE_KEY",e=>`COPILOT_SAVED_USER_MESSAGE_${e}`),(0,o._)(this,"COPILOT_SAVED_USER_MESSAGE_ON_ERROR_KEY",e=>`COPILOT_SAVED_USER_MESSAGE_ON_ERROR_${e}`),(0,o._)(this,"COPILOT_CURRENT_REFERENCES_KEY",e=>`COPILOT_CURRENT_REFERENCES_${e}`),(0,o._)(this,"COPILOT_SELECTED_TOPIC_STORAGE_KEY",e=>`COPILOT_SELECTED_TOPIC_${e}`),(0,o._)(this,"localStorage",(0,a.A)("localStorage",{throwQuotaErrorsOnSet:!1,ttl:864e5})),(0,o._)(this,"longStorage",(0,a.A)("localStorage",{throwQuotaErrorsOnSet:!1})),(0,o._)(this,"tempStorage",(0,a.A)("localStorage",{throwQuotaErrorsOnSet:!1,ttl:18e5})),(0,o._)(this,"sessionStorage",(0,a.A)("sessionStorage",{throwQuotaErrorsOnSet:!1,ttl:864e5}))}};(0,s.Cg)([(0,n.s)(100)],CopilotLocalStorage.prototype,"setSavedMessage",null);let c=new CopilotLocalStorage;function u(e,t){let r,o,s,n=(0,i.c)(7);n[0]!==e?(r=()=>c[e](),n[0]=e,n[1]=r):r=n[1];let[a,_]=(0,l.useState)(r);n[2]!==t?(o=e=>{c[t](e),_(e)},n[2]=t,n[3]=o):o=n[3];let u=o;return n[4]!==a||n[5]!==u?(s=[a,u],n[4]=a,n[5]=u,n[6]=s):s=n[6],s}},44902:(e,t,r)=>{r.d(t,{R:()=>n,f:()=>i});var o=r(82075);let s="copilot_experiments";function i(){let e=(0,o.A)("localStorage").getItem(s);return e?e.split(","):[]}function n(e){(0,o.A)("localStorage").setItem(s,e.join(","))}},68637:(e,t,r)=>{r.d(t,{Pe:()=>i,oo:()=>s,y$:()=>n});var o=r(51213);function s(e){let t=null!=e?`failing job ${e}`:"this failing job";return`Please find a solution for ${t}. Use the logs, job definition, and any referenced files where the failure occurred. Keep your response focused on the solution and include code suggestions when appropriate.`}let i={"Languages & frameworks":["Show me Python beginner projects.","Explain Java's garbage collection.","Start me off with Node.js.","Introduce me to Django best practices."],"Tools & environments":["Set up a local development environment.","Demonstrate the basics of Docker.","Get me started with Git.","Recommend popular VS Code extensions."],"Open source & contribution":["Suggest 10 open source projects I can contribute to.","Walk me through the GitHub Pull Request flow.","How do I start my own open source project?","Guide me through contributing to React's codebase."],"Best practices & concepts":["Explain the SOLID principles of object-oriented design.","Introduce me to test-driven development.","Describe common design patterns.","Teach me about RESTful API design."],"Web development":["Guide me through creating a basic website.","Introduce HTML5 and CSS3 features.","Explain responsive web design.","Start me off with Tailwind CSS."],"Databases & data":["Get me started with SQL queries.","Recommend popular NoSQL databases.","How to back up a database?","Give a walkthrough on normalizing a database."],"Algorithms & data structures":["Teach me basic sorting algorithms.","Explain binary search trees.","Introduce me to graph algorithms.","What is a hash table?"],"Security & authentication":["Give a guide on basic web security.","Show me how to set up OAuth.","What's a JSON Web Token?","Describe common encryption techniques."],"Mobile development":["Kickstart my journey with Android development.","Introduce me to iOS app basics.","Recommend cross-platform mobile frameworks.","Give a guide to the app store submission process."],"Cloud & DevOps":["Start me off with AWS basics.","How do I deploy apps on Azure DevOps?","Introduce me to Kubernetes.","What are the basics of continuous integration/continuous deployment?"],"Frontend frameworks & libraries":["Get me started with React.","Walk me through Vue.js essentials.","What are some best practices in Angular development?","How do I use Svelte for web apps?"],"Performance & optimization":["Teach me about website performance optimization.","Explain database indexing benefits.","What are some tips to optimize JavaScript code?","Give a guide to efficient API caching."]},n={repository:[{question:"What questions can I ask?"},{question:"What does this repository do?"},{question:"How should I get started exploring this repo?"},{question:"Can you tell me about this repository?"}],issue:[{question:"Summarize this issue."},{question:"What are the main points being discussed here?"},{question:"Suggest next steps for this issue."}],alert:[{question:"Summarize this alert."}],file:[{question:"Explain this file."},{question:"Summarize this file for me."},{question:"How can I improve this file?"}],"pull-request":[{question:"Summarize this pull request."},{question:"What commits are included in this PR?"},{question:"Can you tell me about the changes in this PR?"}],discussion:[{question:"Summarize this discussion."},{question:"Summarize the comments made by user in a discussion."},{question:"What were some key decisions made in this discussion?"}],job:[{question:"Why did this job fail?",intent:o.wh.actionsAgent},{question:"How can I fix this build?",intent:o.wh.actionsAgent}],default:[{question:"What questions can I ask?"},{question:"What is the best way to get started with Copilot?"},{question:"How do I clone this repository?"},{question:"How do I revert a commit?"},{question:"How do I add myself as a reviewer?"},{question:"How do I create a repository?"}],issues:[{question:"How do I create an issue?"},{question:"How do I filter issues by label?"},{question:"What are the most recently updated issues?"}],"pull-requests":[{question:"How do I create a pull request?"},{question:"How do I filter pull requests by label?"},{question:"How do I reopen a closed pull request?"}],discussions:[{question:"How do I start a new discussion?"},{question:"How do I filter discussions by category or tag?"},{question:"How do I search for a specific discussion?"}]}}}]);
//# sourceMappingURL=packages_copilot-chat_utils_copilot-local-storage_ts-5b60b1a197ba.js.map