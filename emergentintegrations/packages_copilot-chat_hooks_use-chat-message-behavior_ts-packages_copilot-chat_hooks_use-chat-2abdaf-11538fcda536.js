"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["lazy-react-partial-actions-survey","lazy-react-partial-configure-mcp-server-partial","lazy-react-partial-single-sign-on-dropdown-partial","packages_copilot-chat_hooks_use-chat-message-behavior_ts-packages_copilot-chat_hooks_use-chat-2abdaf"],{77939:(e,t,n)=>{n.d(t,{A:()=>r});let r={messageContainer:"ChatMessage-module__messageContainer--P78Nq","message-action":"ChatMessage-module__message-action--vjrqQ",user:"ChatMessage-module__user--UGo2h",ai:"ChatMessage-module__ai--zMYOs",contentContainer:"ChatMessage-module__contentContainer--XTssz",message:"ChatMessage-module__message--iDqZL",messageContent:"ChatMessage-module__messageContent--x5cFE",hasClientConfirmations:"ChatMessage-module__hasClientConfirmations--UEFyq",agentUnauthorizedAvatar:"ChatMessage-module__agentUnauthorizedAvatar--GTuSs",skillExecutionText:"ChatMessage-module__skillExecutionText--HOEoJ",fileListItem:"ChatMessage-module__fileListItem--hX_vZ",avatar:"ChatMessage-module__avatar--ublrF",clientConfirmationContainer:"ChatMessage-module__clientConfirmationContainer--LgTin",confirmationStatusText:"ChatMessage-module__confirmationStatusText--pUhyM",messageContentWrapper:"ChatMessage-module__messageContentWrapper--L96Ez","snippet-clipboard-content":"ChatMessage-module__snippet-clipboard-content--gS3Lo",messageActionsContainer:"ChatMessage-module__messageActionsContainer--WIjsz"}},15518:(e,t,n)=>{n.d(t,{A:()=>r});let r={referenceToken:"ReferenceToken-module__referenceToken--WsIyo",small:"ReferenceToken-module__small--JKhUS",fullWidth:"ReferenceToken-module__fullWidth--b7qQo",loadingName:"ReferenceToken-module__loadingName--tXmXP",name:"ReferenceToken-module__name--nPIg4",description:"ReferenceToken-module__description--Md3k_",trailingVisual:"ReferenceToken-module__trailingVisual--X22Ay",removeButton:"ReferenceToken-module__removeButton--BwDIm",icon:"ReferenceToken-module__icon--YHCrp",openIcon:"ReferenceToken-module__openIcon--SCaYN",closedIcon:"ReferenceToken-module__closedIcon--McXYG",pullRequestClosedIcon:"ReferenceToken-module__pullRequestClosedIcon--qLOQA",pullRequestMergedIcon:"ReferenceToken-module__pullRequestMergedIcon--yvGds",figmaIconOuter:"ReferenceToken-module__figmaIconOuter--sVqOV",figmaIcon:"ReferenceToken-module__figmaIcon--lsVAI",nodeIconOuter:"ReferenceToken-module__nodeIconOuter--ooSEn"}},6224:(e,t,n)=>{n.d(t,{A:()=>r});let r={container:"UserMessage-module__container--qQMdD",mention:"UserMessage-module__mention--iKJnY"}},62227:(e,t,n)=>{n.d(t,{A:()=>r});let r={Box:"SingleSignOnBanner-module__Box--jDDJV",Flash:"SingleSignOnBanner-module__Flash--OYpTa",Box_1:"SingleSignOnBanner-module__Box_1--f7GQK",Octicon:"SingleSignOnBanner-module__Octicon--Mg3jx",Box_2:"SingleSignOnBanner-module__Box_2--Se3Ze",ForceWrap:"SingleSignOnBanner-module__ForceWrap--Vz1Sn",Paragraph:"SingleSignOnBanner-module__Paragraph--jaDvQ",ProtectedOrgs_FullList:"SingleSignOnBanner-module__ProtectedOrgs_FullList--siZfg",ProtectedOrgs_Shortened:"SingleSignOnBanner-module__ProtectedOrgs_Shortened--G8LoG",ShieldLockIcon:"SingleSignOnBanner-module__ShieldLockIcon--k2b_L"}},6665:(e,t,n)=>{n.d(t,{T:()=>d});var r=n(78314),a=n(25407),i=n(91747),o=n(30459),s=n(96379),l=n(96540),c=n(35898);function d(){let{sendAnalyticsEvent:e}=(0,o.s)(),t=function(){let e=function(){let e=(0,r.t)(),t=(0,c.i)();return(0,l.useMemo)(()=>({react_app:"code-view",repository_id:e.id,repository_nwo:`${e.ownerLogin}/${e.name}`,repository_public:e.public,repository_is_fork:e.isFork,actor_id:t?.id,actor_login:t?.login}),[e,t])}(),t=(0,r.t)(),n=(0,a.yH8)(a.tTz,{owner:t.ownerLogin,repo:t.name});return(0,l.useCallback)((t,r,a)=>{let i={target:t,interaction:r,context:a,...e,...{url:window.location.href,user_agent:window.navigator.userAgent,browser_width:window.innerWidth,browser_languages:window.navigator.languages.join(",")}};(0,s.lS)(n,{method:"POST",body:i})},[e,n])}(),n=(0,i.u)("code_nav_ui_events");return{sendRepoClickEvent:(0,l.useCallback)((r,a={})=>{e("repository.click",r,a),n&&t(r,"click",a)},[e,t,n]),sendRepoKeyDownEvent:(0,l.useCallback)((r,a={})=>{e("repository.keydown",r,a),n&&t(r,"keydown",a)},[e,t,n]),sendStats:(0,l.useCallback)((r,a={})=>{e(r,"",a),n&&t(r,"stats",a)},[e,t,n]),sendMarketplaceActionEvent:(0,l.useCallback)((t,n={})=>{e("marketplace.action.click",t,n)},[e])}}},54030:(e,t,n)=>{n.d(t,{o:()=>u});var r=n(5225),a=n(78314),i=n(25407),o=n(96379),s=n(96540);async function l(e){let t=await (0,o.lS)(e);return t.ok?await t.json():void 0}let c=new Map,d=(0,r.A)(l,{cache:c});function u(e,t,n){let r=(0,a.t)(),[o,l]=(0,s.useState)({list:[],directories:[],loading:!0}),c=(0,i.ClY)({repo:r,commitOid:e,includeDirectories:!n});return(0,s.useEffect)(()=>{let e=!1,n=async()=>{l({list:[],directories:[],loading:!0});let t=await d(c);if(e)return;let n=t?.paths||[],r=t?.directories||[];l({list:n.concat(r).sort(),directories:r,error:!t})};return t&&n(),function(){e=!0}},[c,t,n]),o}},19189:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(53552),a=n(78314),i=n(25407),o=n(54571),s=n(96540);function l(){let e=(0,a.t)(),{path:t,action:n,refInfo:l}=(0,r.eu)(),[c]=(0,o.I)(()=>!1,!0,[]);function d(e){return e?`?${e}`:""}function u(e){return c?"":void 0===e?window.location.hash:e?`#${e}`:""}return{getItemUrl:s.useCallback(t=>(0,i.IO9)({repo:e,commitish:l.name,action:"directory"===t.contentType?"tree":"blob",path:t.path}),[e.ownerLogin,e.name,l.name]),getUrl(r={}){let a=(0,i.IO9)({repo:e,commitish:r.commitish||l.name,action:r.action||n,path:r.path||t})+function({params:e,hash:t}){return d(e)+u(t)}(r);return r.absolute?new URL(a,window.location.origin).href:a},createPermalink(r={}){let a=(0,i.IO9)({repo:e,commitish:l.currentOid,action:r.action||n,path:r.path||t})+function({params:e,hash:t}){return d(e)+u(t)}(r);return r.absolute?new URL(a,window.location.origin).href:a},isCurrentPagePermalink:()=>!c&&l.name===l.currentOid&&window.location.pathname.includes(l.currentOid)}}},7808:(e,t,n)=>{n.d(t,{z:()=>WebWorker});var r=n(35750),a=n(18150),i=n(85242),o=n(50467);let WebWorker=class WebWorker{set onmessage(e){this.worker.onmessage=e}postMessage(e){this.worker.postMessage(e)}terminate(){this.worker.terminate()}constructor(e,t){(0,o._)(this,"worker",void 0);try{this.worker=new Worker(`${e}?module=true`,{type:"module"})}catch{console.warn("Web workers are not available. Please enable web workers to benefit from the improved performance."),this.worker=new MainThreadWorker(t)}}};var s=new WeakMap,l=new WeakMap;let MainThreadWorker=class MainThreadWorker{async postMessage(e){if((0,r._)(this,s))return;let t={data:(0,r._)(this,l).call(this,{data:e})};this.onmessage?.(t)}terminate(){(0,i._)(this,s,!0)}constructor(e){(0,a._)(this,s,{writable:!0,value:!1}),(0,o._)(this,"onmessage",void 0),(0,a._)(this,l,{writable:!0,value:void 0}),(0,i._)(this,l,e)}}},64642:(e,t,n)=>{n.d(t,{j:()=>o});var r=n(5225),a=n(91385);let i=(0,r.A)(a.fN);function o({data:e}){let{query:t,baseList:n,startTime:r}=e,o=t.replaceAll("\\","");return{query:t,list:n.filter(e=>{var t,n;return t=e,""===(n=o)||(0,a.qA)(n,t)&&i(n,t)>0}).sort((e,t)=>i(o,t)-i(o,e)),baseCount:n.length,startTime:r}}},27359:(e,t,n)=>{n.d(t,{v:()=>s});var r=n(21728),a=n(13017),i=n(47789),o=n(38627);function s(){let e,t=(0,r.c)(3),n=(0,i.qw)(),s=(0,a.zy)();return t[0]!==s||t[1]!==n?(e=(0,o.BW)(s,n),t[0]=s,t[1]=n,t[2]=e):e=t[2],e}},52940:(e,t,n)=>{n.d(t,{p:()=>p});var r=n(4559),a=n(53419),i=n(96540),o=n(46665),s=n(25641),l=n(2635),c=n(33592),d=n(72303),u=n(72206),m=n(17285),h=n(27359);function p({excludeFeedback:e,inputRef:t,isLatestMessage:n,isStreaming:p,removeOutdatedContentPreviewItems:f}){let{message:g}=(0,o.V)(),y=(0,l.bP)("currentUserLogin","mode"),x=(0,u.tD)(),v=(0,c.b)(),b=(0,h.v)(),_=(0,s.Th)(g,y.currentUserLogin),C="Copilot"===_.name,w="user"===_.type,S=C||(0,s.yh)(_),j=C&&!!g.agentErrors?.length,N=!j&&!!C&&!!g.error&&g.error.isError,I=C&&!e&&(!n||!p)&&!N,T=(0,i.useRef)(null),k=g.interrupted,R=g.clientConfirmations&&g.clientConfirmations.length>0,A=N&&g.error?.retryable,[E,L]=(0,i.useState)([]),[M,F]=(0,i.useState)(void 0),P=(A||k)&&n,D=(0,i.useMemo)(()=>({openLinksInCurrentTab:"assistive"===y.mode,isStreaming:n&&p,extensions:b?.markdownExtensions?b.markdownExtensions.map(e=>e()):[]}),[y.mode,n,p,b?.markdownExtensions]),$=!N&&(I||S&&!!g.content&&!p)&&(!w||!g.confirmations)||w&&!n||N&&n,O=(0,i.useRef)(0);(0,i.useEffect)(()=>{F(void 0),L([])},[g.id]),(0,i.useEffect)(()=>{let e=(g.skillExecutions??[]).find(e=>!E.some(t=>t.slug===e.slug&&t.statusMessage===e.statusMessage));if(e){let t=setTimeout(()=>{O.current=Date.now(),L([...E,e]),F(e)},Math.max(0,2e3-(Date.now()-O.current)));return()=>clearTimeout(t)}},[g.skillExecutions,E]),(0,i.useEffect)(()=>{n&&p&&(0,r.i)("Copilot is responding")},[n,p]),(0,i.useEffect)(()=>{n&&!p&&T.current&&(0,r.C)(T.current)},[n,p]);let B=(0,i.useCallback)(async(e,t,n)=>{if(n)n("accepted"===e.state);else{let n=x();await v.sendChatMessage({thread:(0,d.W)(n),content:`@${_.name} ${(0,m.Z)(e.state)} Confirmation: ${t}`,references:g.references??[],topic:n.currentTopic,context:n.context,confirmations:e,customInstructions:n.customInstructions,model:n.model})}},[x,v,_.name,g.references]),U=(0,i.useCallback)(()=>{window.setTimeout(()=>t?.current?.focus(),1)},[t]),z=(0,i.useCallback)(async()=>{let e=x(),t=(0,d.W)(e);t&&(f?.(),U(),(0,a.BI)("dotcom_chat.activate",{target:"RESPONSE_ACTION_RETRY",mode:e.mode}),await v.retryLastUnsuccessfulChatMessage(t))},[x,f,U,v]),W=(0,i.useCallback)(async e=>{let t=x(),n=(0,d.W)(t);n&&(f?.(),U(),(0,a.BI)("dotcom_chat.activate",{target:"RESPONSE_ACTION_RETRY_FOR_NEW_SUBTHREAD",mode:t.mode}),await v.retryUserChatMessage(n,g,e))},[x,v,g,f,U]),V=(0,i.useCallback)(async e=>{let t=x(),n=(0,d.W)(t);n&&(f?.(),await v.editUserChatMessage(n,g,e))},[x,v,g,f]);return{author:_,removeOutdatedContentPreviewItems:f,handleConfirmationAction:B,handleRetryErrorMessage:z,handleRetryCopilotResponse:W,handleEditUserMessage:V,hasClientConfirmations:R,isCopilot:C,isUser:w,isAI:S,isAgentError:j,isError:N,isInterrupted:k,myRef:T,rendererConfig:D,renderFeedback:I,shouldShowMessageActions:$,skillExecutionToUseForRespondingText:M,showRetryButton:P}}},87419:(e,t,n)=>{n.d(t,{Y:()=>d});var r=n(21728),a=n(96540),i=n(25641),o=n(79064),s=n(2635),l=n(33592),c=n(72303);function d(e){let t,n,d,u,m,h,p,f,g,y,x=(0,r.c)(26),v=(0,s.Pk)(),b=(0,l.b)(),{currentTopic:_,messages:C,selectedThreadID:w}=v;x[0]!==v?(t=(0,c.W)(v),x[0]=v,x[1]=t):t=x[1];let S=t,j=(0,a.useRef)(null),N=e||j;return x[2]!==b||x[3]!==C.length||x[4]!==S?(n=()=>{S&&C.length>0&&b.showTopicPicker(!1)},d=[S,C.length,b],x[2]=b,x[3]=C.length,x[4]=S,x[5]=n,x[6]=d):(n=x[5],d=x[6]),(0,a.useEffect)(n,d),x[7]!==_||x[8]!==w?(u=()=>{let e=_?(0,i.P)(_)?_.name:String(_.id):null;w&&e&&o.Jt.setSelectedTopic(w,e)},m=[w,_],x[7]=_,x[8]=w,x[9]=u,x[10]=m):(u=x[9],m=x[10]),(0,a.useEffect)(u,m),x[11]!==N?(h=()=>{let e=window.setTimeout(()=>{N.current?.focus()},1);return()=>{window.clearTimeout(e)}},p=[N],x[11]=N,x[12]=h,x[13]=p):(h=x[12],p=x[13]),(0,a.useEffect)(h,p),x[14]!==b||x[15]!==v.context?.[0]||x[16]!==v.currentRepository?(f=()=>{let e=v.context?.[0]??v.currentRepository;return e&&b.generateSuggestions(e),()=>{b.clearSuggestions()}},x[14]=b,x[15]=v.context?.[0],x[16]=v.currentRepository,x[17]=f):f=x[17],x[18]!==b||x[19]!==v.context||x[20]!==v.currentRepository||x[21]!==v.currentTopic||x[22]!==v.selectedThreadID?(g=[b,v.context,v.currentTopic,v.currentRepository,v.selectedThreadID],x[18]=b,x[19]=v.context,x[20]=v.currentRepository,x[21]=v.currentTopic,x[22]=v.selectedThreadID,x[23]=g):g=x[23],(0,a.useEffect)(f,g),x[24]!==N?(y={textAreaRef:N},x[24]=N,x[25]=y):y=x[25],y}},88392:(e,t,n)=>{n.d(t,{a:()=>s});var r=n(96540),a=n(63262),i=n(73952),o=n(51213);function s(e){let{streamingMessage:t,isWaitingOnCopilot:n,messages:s,selectedThreadID:l,pendingFirstMessage:c}=e,d=(0,r.useMemo)(()=>{let e={id:o.Wp,role:"assistant",content:"",createdAt:"",threadID:l||"",references:[],clientSide:!0,messageIndex:-1},r=(0,i.B)(s,c);return n?[...r,t??e]:r},[l,s,c,n,t]);return{messages:d,groupedMessages:(0,a.A)(d)}}},7730:(e,t,n)=>{n.d(t,{g:()=>i});var r=n(21728),a=n(96540);function i(e){let t,n=(0,r.c)(2),[i,o]=(0,a.useState)(!1);return n[0]!==e?(t=()=>{let t=e.current,n=t?.lastElementChild;if(!n)return;let r=new IntersectionObserver(e=>{let[t]=e;return o(t?.isIntersecting??!0)},{root:t,threshold:1});return r.observe(n),()=>r.disconnect()},n[0]=e,n[1]=t):t=n[1],(0,a.useEffect)(t),i}},26408:(e,t,n)=>{n.d(t,{U:()=>d});var r=n(16654),a=n(82490),i=n(96540),o=n(18312),s=n(2635),l=n(33592),c=n(23657);function d(e,t,n,m,h=!1){let[p,f]=(0,i.useState)(),g=(0,i.useCallback)(()=>f(void 0),[]),{topRepositoriesCache:y,currentRepository:x}=(0,s.Pk)(),v=(0,l.b)(),[b,_]=(0,i.useState)([]),[C,w]=(0,i.useState)(!y&&"initial"),S=(0,i.useRef)(void 0),j=(0,o.useRelayEnvironment)(),N=m&&""!==m.trim();if(p&&!y&&!e&&!N){let e=u(p||[]),{ownerLogin:t,name:n}=x??{};x&&!e.find(e=>`${e.ownerLogin}/${e.name}`==`${t}/${n}`)&&e.splice(0,0,{databaseId:x.id,isInOrganization:"Organization"===x.ownerType,name:x.name,nwo:`${x.ownerLogin}/${x.name}`,ownerLogin:x.ownerLogin,ownerAvatarUrl:`/${x.ownerLogin}.png?s=40`}),setTimeout(()=>v.setTopRepositoryTopics(e),10),w(!1),f(void 0)}let I=(0,i.useCallback)(async()=>{try{let e=await (0,r.St)(j,{first:n,owner:N?m:void 0});f(e)}catch{}finally{w(!1)}},[N,m,j,f,n]);return((0,i.useEffect)(()=>{t&&!N&&I()},[I,N,t,m]),(0,i.useEffect)(()=>{let t=async e=>{w(!0);let{repositories:t}=await (0,r.vO)(j,{query:N?(0,c.rl)(m,e,h):(0,a.J)(e,{includeForks:h}),onStart:e=>{S.current?.unsubscribe(),S.current=e}});_(t.length?u(t):[]),w(!1)};e||N?t(e):y&&_(y)},[e,N,m,j,y,h]),(0,i.useEffect)(()=>{v.setTopRepositoryTopics(void 0)},[v,m]),!y||e||N)?{repositories:b,loading:C,resetTopRepoResults:g}:{repositories:y,loading:!1,resetTopRepoResults:g}}function u(e){return e.map(({owner:{login:e,avatarUrl:t},isInOrganization:n,name:r,databaseId:a})=>({databaseId:a??0,isInOrganization:n,name:r,nwo:`${e}/${r}`,ownerLogin:e,ownerAvatarUrl:t}))}},14521:(e,t,n)=>{n.d(t,{G:()=>c});var r=n(21728),a=n(79802),i=n(96540),o=n(2635),s=n(23657),l=n(72303);function c(){let e,t=(0,r.c)(1),n=(0,i.useRef)(null);t[0]===Symbol.for("react.memo_cache_sentinel")?(e=e=>{let t=(0,l.W)(e),r=(0,a.O)(t);return(0,s.Ym)(n.current,r)?n.current:(n.current=r,r)},t[0]=e):e=t[0];let c=(0,o.pn)(e);return(0,s.iI)()||c}},99054:(e,t,n)=>{n.d(t,{JE:()=>p,Z3:()=>m,bn:()=>u,kw:()=>f,qj:()=>h});var r=n(21728),a=n(97286),i=n(8625),o=n(14521),s=n(25641),l=n(2635),c=n(33592),d=n(72206);let u="https://github.com/marketplace?type=apps&copilot_app=true",m="@",h=/^@(?<slug>\S+)$/;function p(e){let t,n,i,u,m,h,p=(0,r.c)(25),{agentsPath:f,model:g}=(0,l.bP)("agentsPath","model"),y=(0,d.tD)(),x=(0,c.b)(),v=!!(0,o.G)(),b=g?.hasLimitedCapabilities;p[0]!==y||p[1]!==v||p[2]!==b?(t=e=>{let{messages:t}=y();if(b||v)return{agents:[],showLimit:!1};let n=(0,s.Q7)(t)[0];return n?{agents:e.filter(e=>e.slug===n.name),showLimit:e.length>1}:{agents:e,showLimit:!1}},p[0]=y,p[1]=v,p[2]=b,p[3]=t):t=p[3];let _=t;p[4]!==f?(n=["copilot-chat","agents",f],p[4]=f,p[5]=n):n=p[5],p[6]!==f||p[7]!==x?(i=()=>f?x.fetchAgents(f):[],p[6]=f,p[7]=x,p[8]=i):i=p[8];let C=(void 0===e||e)&&!b&&!v;p[9]!==_||p[10]!==n||p[11]!==i||p[12]!==C?(u={queryKey:n,queryFn:i,select:_,enabled:C},p[9]=_,p[10]=n,p[11]=i,p[12]=C,p[13]=u):u=p[13];let{isLoading:w,data:S,refetch:j,isStale:N,isFetched:I}=(0,a.I)(u);p[14]!==S||p[15]!==I||p[16]!==N||p[17]!==j?(m=async()=>!I||N?(await j()).data:S,p[14]=S,p[15]=I,p[16]=N,p[17]=j,p[18]=m):m=p[18];let T=m,k=S?.agents,R=S?.showLimit??!1;return p[19]!==T||p[20]!==w||p[21]!==k||p[22]!==R||p[23]!==b?(h={loading:w,disabled:b,availableAgents:k,showLimit:R,imperativelyFetch:T},p[19]=T,p[20]=w,p[21]=k,p[22]=R,p[23]=b,p[24]=h):h=p[24],h}function f(e){let t,n,a=(0,r.c)(6),{inputOnChange:o,inputRef:s}=e;a[0]!==o||a[1]!==s?(t={inputRef:s,fallbackEventHandler:o},a[0]=o,a[1]=s,a[2]=t):t=a[2];let l=(0,i.H)(t);return a[3]!==l||a[4]!==s?(n=e=>{s.current?.value&&l(" ",[0,0]);let t=`${m}${void 0===e?"":e}`;l(t,[0,0],t.length)},a[3]=l,a[4]=s,a[5]=n):n=a[5],n}},26875:(e,t,n)=>{n.d(t,{O:()=>r});function r(e,t){let n={};for(let r of e){let e=t(r);n[e]??(n[e]=[]),n[e].push(r)}return n}},57448:(e,t,n)=>{n.d(t,{Ld:()=>g,M8:()=>y,Tz:()=>C,W5:()=>m,cx:()=>f,r_:()=>_,vn:()=>b,xG:()=>h});var r=n(21728),a=n(51987),i=n(97665),o=n(40458),s=n(94747),l=n(97286),c=n(96379),d=n(96540),u=n(79064);n(2635),n(33592);let m={Unindexed:"not_indexed",Indexed:"indexed",Indexing:"indexing",PartiallyIndexed:"partially_indexed",Unknown:"unknown"},h={Requested:"requested",NotFound:"not_found",Unauthorized:"unauthorized",ServiceUnavailable:"service_unavailable",QuotaExhausted:"quota_exhausted",Forbidden:"forbidden",CanIndex:"ok",IndexingError:"indexing_error",RequestFailed:"request_failed",Unknown:"unknown"},p=[h.NotFound,h.Unauthorized,h.ServiceUnavailable,h.QuotaExhausted,h.Forbidden,h.RequestFailed],f=256,g=400;function y(e){var t,n;let a,l,c,d,u,f,g,y,b,_,C=(0,r.c)(22),w=(0,i.jE)();C[0]!==w||C[1]!==e?(a=()=>Promise.all(e.map(e=>w.invalidateQueries({queryKey:["copilot-chat","repos-indexing-state",e]}))),C[0]=w,C[1]=e,C[2]=a):a=C[2];let j=a;C[3]!==e?(l=e.map(v),C[3]=e,C[4]=l):l=C[4],C[5]!==l?(c={queries:l},C[5]=l,C[6]=c):c=C[6];let T=(0,o.E)(c);C[7]===Symbol.for("react.memo_cache_sentinel")?(d=["repos-indexing-state"],C[7]=d):d=C[7],C[8]!==e?(u=()=>S(e),C[8]=e,C[9]=u):u=C[9],C[10]!==j||C[11]!==u?(f={mutationKey:d,mutationFn:u,onSuccess:j},C[10]=j,C[11]=u,C[12]=f):f=C[12];let{mutate:k}=(0,s.n)(f);C[13]!==T?(g={requestStatus:0===(n=(t=T.map(x)).map(e=>e.requestStatus)).length?h.Unknown:n.some(e=>p.includes(e))?h.IndexingError:n.every(e=>e===h.CanIndex)?h.CanIndex:(n.every(e=>e===h.Unknown),h.Unknown),code:N(t.map(e=>e.code)),docs:N(t.map(e=>e.docs)),remainingRepoIndexTokens:t[0]?.remainingRepoIndexTokens},C[13]=T,C[14]=g):g=C[14];let R=g,A=R.code===m.Indexing&&R.requestStatus!==h.IndexingError;return C[15]!==j?(y=()=>void j(),C[15]=j,C[16]=y):y=C[16],I(y,1e4*!!A),C[17]!==k?(b=()=>k(),C[17]=k,C[18]=b):b=C[18],C[19]!==R||C[20]!==b?(_=[R,b],C[19]=R,C[20]=b,C[21]=_):_=C[21],_}function x(e){return e.data}function v(e){return{queryKey:["copilot-chat","repos-indexing-state",e],queryFn:()=>w(e),placeholderData:{requestStatus:h.Unknown,code:m.Unknown,docs:m.Unknown},staleTime:1/0}}function b(e){let t,n,a,o,c,d,u,p,f,g,y,x=(0,r.c)(23),v=(0,i.jE)();x[0]!==v||x[1]!==e?(t=()=>Promise.resolve(v.invalidateQueries({queryKey:["repo-indexing-state",e]})),x[0]=v,x[1]=e,x[2]=t):t=x[2];let b=t;x[3]!==e?(n=["copilot-chat","repo-indexing-state",e],a=()=>w(e),x[3]=e,x[4]=n,x[5]=a):(n=x[4],a=x[5]),x[6]===Symbol.for("react.memo_cache_sentinel")?(o={requestStatus:h.Unknown,code:m.Unknown,docs:m.Unknown},x[6]=o):o=x[6],x[7]!==n||x[8]!==a?(c={queryKey:n,queryFn:a,placeholderData:o,staleTime:1/0},x[7]=n,x[8]=a,x[9]=c):c=x[9];let _=(0,l.I)(c);x[10]===Symbol.for("react.memo_cache_sentinel")?(d=["repo-indexing-state"],x[10]=d):d=x[10],x[11]!==e?(u=()=>S([e]),x[11]=e,x[12]=u):u=x[12],x[13]!==b||x[14]!==u?(p={mutationKey:d,mutationFn:u,onSuccess:b},x[13]=b,x[14]=u,x[15]=p):p=x[15];let{mutate:C}=(0,s.n)(p),j=_.data,N=j.code===m.Indexing&&j.requestStatus!==h.IndexingError;return x[16]!==b?(f=()=>void b(),x[16]=b,x[17]=f):f=x[17],I(f,1e4*!!N),x[18]!==C?(g=()=>C(),x[18]=C,x[19]=g):g=x[19],x[20]!==j||x[21]!==g?(y=[j,g],x[20]=j,x[21]=g,x[22]=y):y=x[22],y}function _(e){let t,n=(0,r.c)(2);n[0]!==e?(t={queryKey:["copilot-chat","repos-indexing-state",e],queryFn:()=>j(e),staleTime:1/0},n[0]=e,n[1]=t):t=n[1];let a=(0,l.I)(t);return!a.isError&&!!a.data?.canChat}function C(){let e=u.Jt.getPanelHeight(),t=u.Jt.getPanelWidth(),n=(0,d.useRef)(null),r=(0,d.useRef)(e),a=(0,d.useRef)(e),i=(0,d.useRef)(null),o=(0,d.useRef)(t),s=(0,d.useRef)(t),[l,c]=(0,d.useState)(e),[m,h]=(0,d.useState)(t),p=(0,d.useRef)(0);(0,d.useEffect)(()=>{p.current=parseFloat(getComputedStyle(document.documentElement).fontSize)},[]);let y=e=>Math.min(Math.max(e,f),window.innerHeight-p.current),x=e=>Math.min(Math.max(e,g),window.innerWidth-2*p.current),v=(0,d.useCallback)(e=>{if(null!==n.current){let t=n.current-e.clientY,i=y(r.current+t);c(i),a.current=i}if(null!==i.current){let t=i.current-e.clientX,n=x(o.current+t);h(n),s.current=n}},[]),b=(0,d.useCallback)(()=>{window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",b),null!==n.current&&(u.Jt.setPanelHeight(a.current),n.current=null),null!==i.current&&(u.Jt.setPanelWidth(s.current),i.current=null)},[v]),_=(0,d.useCallback)((e,t,a)=>{0===e.button&&(e.preventDefault(),a&&(n.current=e.clientY,r.current=l),t&&(i.current=e.clientX,o.current=m),window.addEventListener("mousemove",v),window.addEventListener("mouseup",b))},[l,m,v,b]),C=(0,d.useCallback)(e=>{if("ArrowUp"===e.key){let t=y(l+4);c(t),u.Jt.setPanelHeight(t),e.preventDefault()}else if("ArrowDown"===e.key){let t=y(l-4);c(t),u.Jt.setPanelHeight(t),e.preventDefault()}else if("ArrowRight"===e.key){let t=x(m-4);h(t),u.Jt.setPanelWidth(t),e.preventDefault()}else if("ArrowLeft"===e.key){let t=x(m+4);h(t),u.Jt.setPanelWidth(t),e.preventDefault()}},[l,m]);return{panelWidth:m,panelHeight:l,startResize:_,onResizerKeyDown:C}}async function w(e){let t=await fetch(`/search/check_indexing_status?nwo=${encodeURIComponent(e)}`,{headers:{Accept:"application/json",...(0,a.kt)()}});if(!t.ok)return{requestStatus:h.RequestFailed,code:m.Unknown,docs:m.Unknown};let n=await t.json();return{requestStatus:n.can_index,code:n.code_status,docs:n.docs_status}}async function S(e){let t=1===e.length?`nwo=${encodeURIComponent(e[0])}`:`nwos=${encodeURIComponent(JSON.stringify(e))}`;return(0,c.DI)(`/search/index_embeddings?${t}&index_code=true`,{method:"POST"})}async function j(e){let t=await fetch(`/github-copilot/docs/docsets/kb_indexed_repos?ids=${encodeURIComponent(JSON.stringify(e))}`,{headers:{Accept:"application/json",...(0,a.kt)()}});return t.ok?await t.json():{canChat:!1}}function N(e){return e.every(e=>e===m.Indexed)?m.Indexed:e.every(e=>e===m.Unindexed)?m.Unindexed:e.some(e=>e===m.Indexing)?m.Indexing:e.some(e=>e===m.Unindexed)?m.PartiallyIndexed:m.Unknown}function I(e,t){let n,a,i,o,s=(0,r.c)(6),l=(0,d.useRef)(void 0),c=(0,d.useRef)(e);return s[0]!==e?(n=()=>{c.current=e},a=[e],s[0]=e,s[1]=n,s[2]=a):(n=s[1],a=s[2]),(0,d.useEffect)(n,a),s[3]!==t?(i=()=>{if(t>0)return l.current=window.setInterval(()=>c.current(),t),()=>window.clearInterval(l.current)},o=[t],s[3]=t,s[4]=i,s[5]=o):(i=s[4],o=s[5]),(0,d.useEffect)(i,o),l}},60905:(e,t,n)=>{n.d(t,{s:()=>CopilotImageAttacher});var r=n(50467),a=n(53419),i=n(25641),o=n(35247),s=n(76166),l=n(30456);let c=["image/gif","image/jpeg","image/png","image/webp"];let CopilotImageAttacher=class CopilotImageAttacher{static getAllowedImageFileExtensions(e){return this.getFileExtensions(e).join(",")}static isTypeAllowed(e,t){return e=e.toLowerCase(),this.getMimeTypes(t).includes(e)}static getAllowedFiles(e,t){let[n,r]=e.reduce(([e,n],r)=>this.isTypeAllowed(r.type,t)?[[...e,r],n]:[e,[...n,r]],[[],[]]);return[n,r]}static getAttachmentLimit(){return o.W.attachMultipleImages?4:1}static getAttachmentSizeLimit(){return 3932160}static makeImageReference(e,t){let n=crypto.randomUUID(),r=new l.N(n,e,t);return{id:n,attachment:r,type:"image",name:e.name||"Image"}}static getFileExtensions(e){if(Array.isArray(e))return Array.from(new Set(e.flatMap(e=>this.getFileExtensions(e))));let t=this.getMimeTypes(e).map(e=>`.${e.split("/")[1]}`);return t.includes(".jpeg")&&t.push(".jpg"),t}static getMimeTypes(e){return Array.isArray(e)?Array.from(new Set(e.flatMap(e=>this.getMimeTypes(e)))):e.capabilities.limits.vision?e.capabilities.limits.vision.supported_media_types.filter(e=>c.includes(e)):[]}async addImageAttachments(e,t="unknown",n,r=!1){if(0===e.length)return[];let l=null,c=this.state.selectedThreadID,d=this.manager.getPendingThreadId(n),u=o.W.visionSkipThreadCreate;if(n&&!c&&d&&(c=d),!c&&!u)try{c=(l=await this.manager.createThread({customCopilotId:n,preventThreadSelection:r})).id}catch(t){let e="An error occurred creating the thread. Sending a single message should create a new thread.";throw t instanceof Error&&(e||(e=t.message)),this.manager.addAmbientError(e),Error(e)}let m=this.state.currentReferences.filter(e=>"image"===e.type).length,h=CopilotImageAttacher.getAttachmentLimit();if(m+e.length>h){let e=o.W.attachMultipleImages?`You can add up to ${h} image files per message.`:"Only one image can be uploaded at a time";return this.manager.addAmbientError(e),(0,s.d)("file_limit_reached"),[]}let p=[],f=[];for(let n of e){if(!CopilotImageAttacher.isTypeAllowed(n.type,this.state.model))return(0,s.d)("included_unsupported_file",{fileTypes:n.type,uploadType:t}),[];if(n.size>CopilotImageAttacher.getAttachmentSizeLimit())return this.manager.addAmbientError("Only images below 3.75MB are supported"),(0,s.d)("size_limit_exceeded",{size:n.size}),[];if(null==c&&!u)throw this.manager.addAmbientError("Please manually create a thread before uploading an image"),Error("ThreadID resolution for image attachment is not functioning properly");let e=CopilotImageAttacher.makeImageReference(n,c);if(this.state.model.id.startsWith("claude")&&this.state.model.capabilities.supports.vision){let t=await e.attachment.getDimensions();if(t.width&&t.height&&(t.width>8e3||t.height>8e3)){this.manager.addAmbientError("The image you uploaded exceeds the maximum allowed dimensions for Claude models. Please try again with another model."),(0,s.d)("dimension_limit_exceeded",{width:t.width,height:t.height});continue}}let r=(0,i.Vc)(n.name);this.manager.addReference(r,"image-attacher"),0===f.length&&this.manager.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!0,attachmentType:"file-upload"}),f.push({file:n,placeholder:r,reference:e})}return await Promise.all(f.map(async({file:e,placeholder:n,reference:r})=>{try{l&&await r.attachment.prefetch(),this.manager.setImageAttachmentUploaded(r.id,r.attachment),this.manager.replaceReference(n,r),(0,a.BI)("dotcom_chat.vision.image_added",{uploadType:t}),p.push(r)}catch(r){this.manager.removeReference(n);let t="An unexpected error occurred while reading the file";if("string"==typeof r)throw this.manager.addAmbientError(`An error occurred uploading the attachment ${e.name}`),(0,s.d)("ErrorString",{message:r}),Error(r);if(r instanceof Error)if((0,s.d)(r.name,{message:r.message}),"GenericServerError"===r.name&&r.message.includes("Error creating policy"))this.manager.addAmbientError(t);else throw this.manager.addAmbientError(t),r;else throw this.manager.addAmbientError(t),r}})).finally(()=>{this.manager.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!1})}),r&&n&&l&&this.manager.setPendingThreadId(l.id,n),p}constructor(e,t){(0,r._)(this,"state",void 0),(0,r._)(this,"manager",void 0),this.state=e,this.manager=t}}},76166:(e,t,n)=>{n.d(t,{d:()=>a});var r=n(53419);function a(e,t){(0,r.BI)("dotcom_chat.vision.error",{type:e,...t})}},72439:(e,t,n)=>{n.d(t,{E:()=>CopilotTextAttacher,x:()=>s});var r=n(50467),a=n(53419),i=n(25641),o=n(23967);let s="application/x.clipboard",l=/^\s*`?([\w-_]{3,40}\.\w{1,10})`?\s*$/;let CopilotTextAttacher=class CopilotTextAttacher{static async isAttachable(e){if(e.size>CopilotTextAttacher.getAttachmentSizeLimit())return!1;let t=await e.text();return CopilotTextAttacher.isPlainText(t)}static getTextFileExtensions(){return CopilotTextAttacher.fileExtensionsCache??(CopilotTextAttacher.fileExtensionsCache=Object.values(o.r4).flatMap(e=>e.extensions??[]).filter(e=>"stl"!==e).join(","))}static getAttachmentSizeLimit(){return 512e3}static isPlainText(e){let t=Math.min(e.length,1e3),n=0,r=0;for(let a=0;a<t;a++){let t=e.charCodeAt(a);0===t?n++:t>127&&r++}let a=n/t,i=r/t;return a<=.1&&i<=.2}async makeReference(e,t){let n=await e.text(),r=e.name||(t?await t:await this.generateFileName(n,e.type));return this.makeReferenceSync(n,r)}makeReferenceSync(e,t){let n=t.split(".").pop();return(0,a.BI)("copilot.attach_pasted_file",{extension:n,characters:e.length}),{type:"thread-scoped-file",name:t,text:e,language:""}}async addAttachment(e,t,n){let r;if(e.size>CopilotTextAttacher.getAttachmentSizeLimit())return void this.manager.addAmbientError("Attached text files must be smaller than 500KB");let a=await e.text();if(!CopilotTextAttacher.isPlainText(a))return void this.manager.addAmbientError(`"${e.name}" has an unsupported file type. Please try again with a plain text file`);if(n)r=this.makeReferenceSync(a,n),this.manager.addReference(r,"text-attacher");else{let n=(0,i.Vc)(e.name);this.manager.addReference(n,"text-attacher"),this.manager.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!0,attachmentType:"file-upload"});try{r=await this.makeReference(e,t),this.manager.replaceReference(n,r)}catch{this.manager.addAmbientError("Failed to process file. Please try again."),this.manager.removeReference(n)}finally{this.manager.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!1})}}return r}async generateFileName(e,t){let n=this.existingFileNames.size>0?`

Follow the naming formats used by these existing files: ${Array.from(this.existingFileNames).slice(0,5).join(", ")}`:"",r=await this.manager.service.getSimpleCompletion(`Return a suitable filename for the following file contents.
      Follow the file naming conventions of the language and do not include any special characters except for period, underscore or hyphens.
      Try to limit the name to 20 characters or less.
      You MUST include the file extension. Include only the filename in your response and nothing else.${n}

File contents:
\`\`\`
${e}
\`\`\`
`),i=r.ok?l.exec(r.payload)?.[1]:null;return i?(0,a.BI)("copilot.generate_pasted_file_name.success"):(0,a.BI)("copilot.generate_pasted_file_name.failure"),this.uniqueFileName(i??this.defaultFileName(t))}uniqueFileName(e){if(!this.existingFileNames.has(e))return e;let t=e.lastIndexOf("."),n=t>0&&t<e.length-1,r=n?e.substring(0,t):e,a=n?e.substring(t):"",i=2;for(;this.existingFileNames.has(`${r}${i}${a}`);)i++;return`${r}${i}${a}`}defaultFileName(e){return e===s?"pasted.txt":"untitled.txt"}constructor(e,t=new Set){(0,r._)(this,"manager",void 0),(0,r._)(this,"existingFileNames",void 0),this.manager=e,this.existingFileNames=t}};(0,r._)(CopilotTextAttacher,"fileExtensionsCache",void 0)},79216:(e,t,n)=>{n.d(t,{Q:()=>o});let r=/^@(?<repo>[\w-.]+\/[\w-.]+)(?:\/(?<type>\w+)\/(?<id>.+))?$/,a=/^@(?<id>[a-zA-Z0-9_.-]+)$/,i={fromUrlType(e){switch(e){case"issues":return"issue";case"pull":return"pull-request";case"discussions":return"discussion";case"blob":case"tree":return"file";case void 0:return"repository"}},fromMentionType(e){switch(e){case"issues":return"issue";case"pull":return"pull-request";case"discussions":return"discussion";case"files":return"file";case void 0:return"repository"}}},o={fromUrl(e){let t;try{t=new URL(e)}catch{return}if(t.hostname!==window.location.hostname)return;let[,n,r,a,...o]=t.pathname.split("/"),s=o.join("/"),l=i.fromUrlType(a);if(n&&r&&l)return{repo:`${n}/${r}`,type:s?l:"repository",id:s}},stringify(e){switch(e.type){case"issue":return`@${e.repo}/issues/${e.id??""}`;case"pull-request":return`@${e.repo}/pull/${e.id??""}`;case"discussion":return`@${e.repo}/discussions/${e.id??""}`;case"repository":return`@${e.repo}`;case"file":return`@${e.repo}/files/${e.id??""}`;case"thread-scoped-file":return`@${e.id??""}`}},parse(e){let t=r.exec(e)?.groups;if(!t){let t=a.exec(e)?.groups;return t?{repo:"",type:"thread-scoped-file",id:t.id}:void 0}let n=i.fromMentionType(t.type);return n?{repo:t.repo,type:n,id:t.id}:void 0},isEqual:(e,t)=>o.stringify(e)===o.stringify(t),refersTo(e,t){let n=o.for(t);return null!==n&&o.isEqual(e,n)},for:e=>{switch(e.type){case"repository":return{type:"repository",repo:`${e.ownerLogin}/${e.name}`,reference:e};case"issue":return{type:"issue",repo:`${e.repository.owner}/${e.repository.name}`,id:e.number.toString(),reference:e};case"pull-request":return{type:"pull-request",repo:`${e.repository.ownerLogin}/${e.repository.name}`,id:e.number.toString(),reference:e};case"discussion":return{type:"discussion",repo:`${e.repository.owner}/${e.repository.name}`,id:e.number.toString(),reference:e};case"file":case"folder":return{type:"file",repo:`${e.repoOwner}/${e.repoName}`,id:e.path,reference:e};case"thread-scoped-file":return{type:"thread-scoped-file",repo:"",id:e.name,reference:e};default:return null}}}},17285:(e,t,n)=>{n.d(t,{Z:()=>r});function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}},20330:(e,t,n)=>{n.d(t,{U:()=>o});var r=n(99054),a=n(25641),i=n(79216);let o=function({references:e,agents:t}){this.parser=function(n){let o=n.split(/(\s+)/),s=[];for(let[n,l]of o.entries()){let o=0===n&&r.qj.exec(l)?.groups?.slug,c=o&&t.find(e=>e.slug===o);if(c){s.push({type:"agent-mention",value:l,data:{mentionedAgent:c}});continue}let d=i.Q.parse(l),u=d&&e?.find(e=>i.Q.refersTo(d,e));if(d){s.push({type:"reference-mention",value:l,data:{mentionedReferenceId:u&&(0,a.Vb)(u),referenceMention:d}});continue}let m=s.at(-1);m?.type==="text"?m.value+=l:s.push({type:"text",value:l})}return{type:"root",children:s}}}},16378:(e,t,n)=>{n.d(t,{O:()=>i,_:()=>o});var r=n(47970),a=n(99054);function i(e){let t=new Set;return(0,r.YR)(e,e=>{"reference-mention"===e.type&&void 0!==e.data.mentionedReferenceId&&t.add(e.data.mentionedReferenceId)}),t}function o(e){return a.qj.test(e.split(/\s/)[0]??"")}},84646:(e,t,n)=>{n.d(t,{$7:()=>u,AV:()=>y,Ao:()=>p,BV:()=>g,OW:()=>CopilotSpaceSSOError,Tx:()=>f,e9:()=>m,i9:()=>CopilotSpaceNotFoundError,jS:()=>h});var r=n(50467),a=n(97665),i=n(94747),o=n(97286),s=n(72011),l=n(33592),c=n(96540),d=n(2635);let CopilotSpaceNotFoundError=class CopilotSpaceNotFoundError extends Error{constructor(e="Copilot Space not found"){super(e),this.name="CopilotSpaceNotFoundError"}};let CopilotSpaceSSOError=class CopilotSpaceSSOError extends Error{constructor(e,t="Copilot Space SSO error"){super(t),(0,r._)(this,"protectedOrganizations",void 0),this.protectedOrganizations=e,this.name="CopilotSpaceSSOError"}};function u(){let e=(0,a.jE)(),t=(0,l.b)();return(0,i.n)({mutationFn:async e=>{let n=await (0,s.ee)(e);if(!n.ok)throw Error(n.error);return t.dispatch({type:"REMOVE_CUSTOM_COPILOT",customCopilotId:e}),{status:n.status,ok:!0,payload:n.payload}},onSuccess:async()=>{await e.invalidateQueries({queryKey:s.O6})}})}function m(e){let t=(0,l.b)(),{data:n}=h(e,{throwOnError:!1});(0,c.useEffect)(()=>{n&&t.dispatch({type:"SET_CUSTOM_COPILOTS",customCopilots:n})},[n,t])}function h(e,t={}){return(0,o.I)({queryKey:s.O6,queryFn:s.CT,enabled:e,staleTime:3e5,throwOnError:t.throwOnError})}function p(e){return(0,o.I)({queryKey:(0,s.dp)(e),queryFn:async()=>{let t=await (0,s.Lr)(e);if(!t.ok){if(404===t.status)throw new CopilotSpaceNotFoundError;throw Error(t.error)}if(void 0===t.payload.id)throw new CopilotSpaceSSOError(t.payload.protectedOrganizations);return t.payload},enabled:!!e})}function f(e,t){return(0,o.I)({queryKey:["visibility-settings",e,t],queryFn:async()=>(0,s.A2)({owner:e,id:t}),enabled:""!==e&&-1!==t,staleTime:3e5})}function g(){return(0,d.A3)("customCopilotsEnabled")}function y(){let e=function(){let e=(0,d.A3)("customCopilots");return e?.length??0}();return(0,c.useMemo)(()=>`New Space ${e+1}`,[e])}},17485:(e,t,n)=>{n.d(t,{C:()=>o});var r=n(25536),a=n(14521),i=n(96540);function o(){let e=(0,a.G)(),{selectedCopilotSpaceId:t,setSelectedCopilotSpaceId:n,selectedThreadId:o}=(0,r.O)(),s=!!o||!!e;(0,i.useEffect)(()=>{n(e||void 0)},[e,n]);let l=t||e,c=(0,i.useCallback)(e=>{s||n({id:e.id,owner:e.owner})},[n,s]),d=(0,i.useCallback)(()=>{s||n(void 0)},[n,s]);return{activeCopilotSpaceId:l,readOnly:s,handleSpaceSelect:c,clearSpaceSelection:d}}},51563:(e,t,n)=>{n.d(t,{$:()=>d});var r=n(33592),a=n(23657),i=n(72011),o=n(97665),s=n(94747),l=n(96379),c=n(31971);let d=e=>{let t=(0,r.b)(),n=(0,o.jE)(),{mutateAsync:d,...u}=(0,s.n)({onSuccess:async()=>{n.invalidateQueries({queryKey:i.O6}),e&&await n.invalidateQueries({queryKey:(0,i.dp)(e)})},mutationFn:async n=>{let r=e?(0,a.fn)(e):"/custom_copilots",i={custom_copilot:{owner_id:n.ownerId,owner_type:n.ownerType,name:n.name,icon_type:n.iconType,icon_color:n.iconColor,description:n.description,general_instructions:n.generalInstructions,resources_attributes:n.resources?.map(e=>({id:e.databaseId,copilot_chat_attachment_id:e.copilotChatAttachmentId,resource_type:e.type,_destroy:e.markedForDestroy,metadata:(0,c.M)(e)})),visibility:n.visibility,base_role:n.baseRole}},o=await (0,l.lS)(r,{method:e?"PUT":"POST",body:i}),s=await o.json();if(!o.ok)throw s.errorMessages;return t?.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:s}),s}});return{upsertCopilotSpace:d,...u}}},39176:(e,t,n)=>{n.d(t,{k:()=>r});function r(e){return function e(t,n){let r=t[n];return r?r.items.map(n=>({data:n,items:"directory"===n.contentType?e(t,n.path):[]})).sort((e,t)=>"directory"===e.data.contentType&&"directory"!==t.data.contentType?-1:"directory"!==e.data.contentType&&"directory"===t.data.contentType?1:e.data.name.localeCompare(t.data.name)):[]}(function(e){let{paths:t,directories:n}=e,r={},a=new Set(n);for(let e of(r[""]={items:[],totalCount:0},[...n].sort())){let t=e.substring(0,e.lastIndexOf("/"))||"",n={name:e.substring(e.lastIndexOf("/")+1),path:e,contentType:"directory"};r[t]||(r[t]={items:[],totalCount:0}),r[t].items.push(n),r[e]||(r[e]={items:[],totalCount:0})}for(let e of t.filter(e=>!a.has(e)).sort()){let t=e.substring(0,e.lastIndexOf("/"))||"",n={name:e.substring(e.lastIndexOf("/")+1),path:e,contentType:"file"};r[t]||(r[t]={items:[],totalCount:0}),r[t].items.push(n)}for(let e in r){let t=r[e];t&&t.items.sort((e,t)=>"directory"===e.contentType&&"directory"!==t.contentType?-1:"directory"!==e.contentType&&"directory"===t.contentType?1:e.name.localeCompare(t.name))}let i=e=>{let t=r[e];return t?t.items.reduce((e,t)=>"directory"===t.contentType?e+1+i(t.path):e+1,0):0};for(let e in r){let t=r[e];t&&(t.totalCount=i(e))}return r}(e),"")}},97564:(e,t,n)=>{n.d(t,{V:()=>a});var r=n(96379);async function a(e){let t=await (0,r.lS)(`/github-copilot/chat/repositories/${e}`,{method:"GET"});if(!t.ok)throw Error(`Failed to fetch repository details: ${t.status}`);return await t.json()}},72011:(e,t,n)=>{n.d(t,{A2:()=>m,CT:()=>c,Lr:()=>d,O6:()=>s,dp:()=>l,ee:()=>u});var r=n(25641),a=n(23657),i=n(96379);let o="/github-copilot/chat",s=["copilot-chat","custom-copilots"];function l(e){return e?["copilot-chat","custom-copilot",{id:e.id,owner:e.owner}]:["copilot-chat","custom-copilot",null]}async function c(){let e=await (0,i.lS)(`${o}/custom_copilots`);if(!e.ok)throw Error(`Failed to fetch spaces: ${r.nN[e.status]||r.DW}`);return await e.json()}async function d(e){if(!e||!e.owner)return{status:500,ok:!1,error:"unexpected null custom copilot id or missing owner"};let{owner:t,id:n}=e,a=`${o}/custom_copilots/${t}/${n}`,s=await (0,i.lS)(a);if(!s.ok)return{status:s.status,ok:!1,error:r.nN[s.status]||r.DW};let l=await s.json();return{status:s.status,ok:!0,payload:l}}async function u(e){let t=await (0,i.lS)((0,a.fn)(e),{method:"DELETE"});return t.ok?{status:t.status,ok:!0,payload:null}:t}async function m(e){let t=await (0,i.lS)(`${(0,a.fn)(e)}/settings/visibility`);if(!t.ok)throw Error("Error fetching visibility settings");try{let e=await t.json();return{memberCount:e.member_count&&"number"==typeof e.member_count?e.member_count:null}}catch(e){throw Error(`Error parsing visibility settings: ${e}`)}}},31971:(e,t,n)=>{n.d(t,{M:()=>r});function r(e){switch(e.type){case"repository":return{repository_id:e.repositoryId};case"github_file":return{repository_id:e.repositoryId,file_path:e.filePath,sha:e.sha};case"free_text":return{text:e.text,name:e.name};case"github_issue":case"github_pull_request":return{repository_id:e.repositoryId,number:e.number};case"uploaded_text_file":return{name:e.name};case"media_content":return{media_type:e.mediaType,name:e.name,url:e.url,height:e.height,width:e.width};default:throw Error("Unsupported resource")}}},34535:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(96540);function a({focusRowRef:e,mouseRowRef:t}){let[n,a]=r.useState(!1);return r.useEffect(()=>{if(e.current&&t.current){let n=()=>{let t=e.current?.querySelector(".PRIVATE_TreeView-item-content-text");t?.scrollWidth!==t?.offsetWidth&&a(!0)};e.current.onfocus=()=>{n()},e.current.onblur=()=>{a(!1)},t.current.onmouseenter=()=>{n()},t.current.onmouseleave=()=>{a(!1)}}},[e,t]),n}},37272:(e,t,n)=>{n.d(t,{E:()=>i});var r=n(74848),a=n(64375);function i({children:e}){return(0,a.P)()?(0,r.jsx)(r.Fragment,{children:e}):null}try{i.displayName||(i.displayName="AllShortcutsEnabled")}catch{}},64375:(e,t,n)=>{n.d(t,{$:()=>o,P:()=>s});var r=n(74848),a=n(96540);let i=a.createContext(!0);function o({allShortcutsEnabled:e,children:t}){return(0,r.jsxs)(i.Provider,{value:e,children:[" ",t," "]})}function s(){return a.useContext(i)}try{i.displayName||(i.displayName="AllShortcutsEnabledContext")}catch{}try{o.displayName||(o.displayName="AllShortcutsEnabledProvider")}catch{}},31078:(e,t,n)=>{n.d(t,{Ck:()=>s,JS:()=>o});var r=n(74848),a=n(96540);let i=(0,a.createContext)({query:"",setQuery:()=>void 0});function o(){return(0,a.useContext)(i)}function s({children:e}){let[t,n]=(0,a.useState)(""),o=(0,a.useMemo)(()=>({query:t,setQuery:n}),[n,t]);return(0,r.jsx)(i.Provider,{value:o,children:e})}try{i.displayName||(i.displayName="FileQueryContext")}catch{}try{s.displayName||(s.displayName="FileQueryProvider")}catch{}},53552:(e,t,n)=>{n.d(t,{eu:()=>l,qV:()=>s,sq:()=>c});var r=n(74848),a=n(79634),i=n(96540);let o=i.createContext({});function s({children:e,...t}){return(0,r.jsx)(o.Provider,{value:t,children:e})}function l(){return i.useContext(o)}function c(){return(0,a.X)()}try{o.displayName||(o.displayName="FilesPageInfoContext")}catch{}try{s.displayName||(s.displayName="FilesPageInfoProvider")}catch{}},97793:(e,t,n)=>{n.d(t,{O:()=>p});var r=n(74848),a=n(96379),i=n(38621),o=n(15042),s=n(36284),l=n(99511),c=n(43371),d=n.n(c),u=n(96540);let m={dialogForm:"McpServerDialog-module__dialogForm--pUtNF",underline:"McpServerDialog-module__underline--YKUMk",inputError:"McpServerDialog-module__inputError--Ojb_P",formField:"McpServerDialog-module__formField--rsUqW",hiddenSubmitButton:"McpServerDialog-module__hiddenSubmitButton--KcK0s"},h=(0,r.jsx)("a",{href:"https://modelcontextprotocol.io/specification/2025-06-18/basic/authorization",target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"underline"},children:"MCP authorization specification"}),p=({isOpen:e,onClose:t,returnUrl:n,onServerAdded:c,returnFocusRef:p,showSettingsLink:f=!0})=>{let[g,y]=(0,u.useState)(""),[x,v]=(0,u.useState)(""),[b,_]=(0,u.useState)(null),[C,w]=(0,u.useState)(null),S=(0,u.useCallback)(()=>{y(""),v(""),_(null),w(null),t()},[t]),j=async e=>{if(e&&e.preventDefault(),""===g.trim()||""===x.trim()){x.trim()||_("MCP server URL is required"),g.trim()||w("Name is required");return}try{if(_(null),!function(e){try{let t=new URL(e.trim(),window.location.origin),n=d()();return"https:"===t.protocol&&!!t.hostname&&/^[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t.hostname)&&!n.test(e)}catch{return!1}}(x))return void _("Invalid HTTPS URL format");let e=new FormData;e.append("mcp_server_url",x.trim()),e.append("name",g.trim()),n&&e.append("return_url",n);let t=await (0,a.DI)("/copilot/mcp/servers",{method:"POST",body:e});if(!t.ok){let e="Failed to add MCP server";try{let n=await t.text();try{let t=JSON.parse(n);if("unsupported_server_type"===t.error)e=(0,r.jsxs)(r.Fragment,{children:["This server does not conform to the ",h,"."]});else if(t.field_errors){for(let[e,n]of Object.entries(t.field_errors)){let t=n.join(", ");"mcp_server_url"===e?_(t):"display_name"===e&&w(t)}return}else t.message&&(e=t.message)}catch{e=n.includes("well-known/oauth-authorization-server")||"Client setup failed"===n.trim()?(0,r.jsxs)(r.Fragment,{children:["This server does not conform to the ",h,"."]}):n||e}}catch{e="Failed to add MCP server"}_(e);return}let i=(await t.json()).redirect_url;i&&"string"==typeof i?(S(),c?.(),window.location.assign(i)):(S(),c?.())}catch(e){e instanceof Error?_(e.message):_("An unknown error occurred")}};return e?(0,r.jsx)(o.l,{title:"Add MCP server",onClose:S,footerButtons:[{buttonType:"default",content:"Cancel",onClick:S},{buttonType:"primary",content:(0,r.jsxs)(r.Fragment,{children:["Connect to MCP server",(0,r.jsx)("span",{style:{marginLeft:8},children:(0,r.jsx)(i.LinkExternalIcon,{size:16})})]}),onClick:()=>{j()}}],returnFocusRef:p,children:(0,r.jsxs)("form",{className:m.dialogForm,onSubmit:j,autoComplete:"on",children:[(0,r.jsxs)(s.A,{required:!0,className:m.formField,children:[(0,r.jsx)(s.A.Label,{children:"MCP server name"}),(0,r.jsx)(l.A,{name:"mcp-server-name",type:"text",value:g,onChange:e=>{y(e.target.value),w(null)},placeholder:"Enter a name for this MCP server",className:C?m.inputError:void 0,autoComplete:"on",block:!0}),C&&(0,r.jsx)(s.A.Validation,{variant:"error",children:C})]}),(0,r.jsxs)(s.A,{required:!0,className:m.formField,children:[(0,r.jsx)(s.A.Label,{children:"MCP server URL"}),(0,r.jsx)(l.A,{name:"mcp-url",type:"url",value:x,onChange:e=>{v(e.target.value),_(null)},placeholder:"https://mcp.example.com",className:b?m.inputError:void 0,autoComplete:"on",block:!0}),b&&(0,r.jsx)(s.A.Validation,{variant:"error",children:b})]}),(0,r.jsx)("button",{type:"submit",className:m.hiddenSubmitButton,tabIndex:-1,children:"Submit"}),(0,r.jsxs)("p",{children:["MCP Server data will be processed by models coming from third-party providers. Always review the permissions required by the MCP server and only connect to MCP servers you know and trust.",f&&(0,r.jsxs)(r.Fragment,{children:[" ","You can revoke access for the MCP server at any time in"," ",(0,r.jsx)("a",{href:"/settings",className:m.underline,children:"your settings"}),"."]})]})]})}):null};try{h.displayName||(h.displayName="MCP_SPEC_LINK")}catch{}try{p.displayName||(p.displayName="McpServerDialog")}catch{}},97315:(e,t,n)=>{n.d(t,{P:()=>c});var r=n(74848),a=n(21728),i=n(97949),o=n(96540),s=n(33592);let l={ambientErrorBanner:"AmbientErrorBanner-module__ambientErrorBanner--lajPC",largeBorderRadius:"AmbientErrorBanner-module__largeBorderRadius--NGjjE",mediumBorderRadius:"AmbientErrorBanner-module__mediumBorderRadius--aAp6Z"};function c(e){let t,n,c,u,m,h,p=(0,a.c)(14),{ambientError:f,useLargerBorderRadius:g}=e,y=(0,s.b)(),[x,v]=(0,o.useState)(0),b=void 0!==g&&g?l.largeBorderRadius:l.mediumBorderRadius,_=(0,o.useRef)(null);p[0]!==f.message?(t=()=>{if(f.message){v(d);let e=setTimeout(()=>{_.current&&_.current.focus()},250);return()=>clearTimeout(e)}},p[0]=f.message,p[1]=t):t=p[1],p[2]!==f?(n=[f],p[2]=f,p[3]=n):n=p[3],(0,o.useEffect)(t,n);let C=`${l.ambientErrorBanner} ${b}`;return p[4]===Symbol.for("react.memo_cache_sentinel")?(c={outline:"none"},p[4]=c):c=p[4],p[5]!==f.message?(u=(0,r.jsx)("div",{ref:_,tabIndex:-1,style:c,children:f.message}),p[5]=f.message,p[6]=u):u=p[6],p[7]!==y?(m=()=>{y.dismissAmbientError()},p[7]=y,p[8]=m):m=p[8],p[9]!==x||p[10]!==C||p[11]!==u||p[12]!==m?(h=(0,r.jsx)(i.l,{"aria-atomic":"true",className:C,description:u,variant:"critical",title:"Error during copilot chat has occurred.",hideTitle:!0,onDismiss:m},x),p[9]=x,p[10]=C,p[11]=u,p[12]=m,p[13]=h):h=p[13],h}function d(e){return e+1}try{c.displayName||(c.displayName="AmbientErrorBanner")}catch{}},55009:(e,t,n)=>{n.d(t,{o:()=>d});var r=n(74848),a=n(21728),i=n(34164),o=n(96540);let s={chatImageAttachment:"ChatImage-module__chatImageAttachment--yonSm",squareView:"ChatImage-module__squareView--nZPWG",fullView:"ChatImage-module__fullView--hHWSy",userAttachedImage:"ChatImage-module__userAttachedImage--e5PZR",overlay:"ChatImage-module__overlay--Z0bfs",overlayScreen:"ChatImage-module__overlayScreen--oZnB_",expandIcon:"ChatImage-module__expandIcon--H2k4g"};function l(e){let t,n,i=(0,a.c)(5),{className:o,size:s}=e,l=s||14,c=s||14;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M13.672 5.342a.8.8 0 0 0 .05-.295V.805a.75.75 0 0 0-.75-.75H8.73a.75.75 0 0 0 0 1.5h2.433L8.138 4.577A.75.75 0 0 0 9.2 5.638l3.024-3.023v2.432a.75.75 0 0 0 1.45.295M.328 8.657a.8.8 0 0 0-.05.295v4.243a.75.75 0 0 0 .75.75h4.243a.75.75 0 0 0 0-1.5H2.838l3.024-3.023A.75.75 0 1 0 4.8 8.362l-3.024 3.023V8.952a.75.75 0 0 0-1.45-.295",clipRule:"evenodd"}),i[0]=t):t=i[0],i[1]!==o||i[2]!==l||i[3]!==c?(n=(0,r.jsx)("svg",{className:o,xmlns:"http://www.w3.org/2000/svg",width:l,height:c,fill:"none",viewBox:"0 0 14 14",role:"presentation",children:t}),i[1]=o,i[2]=l,i[3]=c,i[4]=n):n=i[4],n}try{l.displayName||(l.displayName="ExpandIcon")}catch{}let c=e=>{let t,n,c,d,u,m,h,p,f,g=(0,a.c)(25),{src:y,alt:x,onClick:v,useOverlay:b,mode:_,squareView:C}=e,[w,S]=(0,o.useState)(!1),j=C?s.squareView:s.fullView,N="assistive"===_;g[0]!==j||g[1]!==N?(t=(0,i.$)(s.chatImageAttachment,j,{assistive:N}),g[0]=j,g[1]=N,g[2]=t):t=g[2];let I=C?s.squareView:s.fullView;return g[3]!==I?(n=(0,i.$)(s.userAttachedImage,I),g[3]=I,g[4]=n):n=g[4],g[5]!==x||g[6]!==y||g[7]!==n?(c=(0,r.jsx)("img",{className:n,src:y,alt:x}),g[5]=x,g[6]=y,g[7]=n,g[8]=c):c=g[8],g[9]!==w||g[10]!==C?(d=(0,i.$)(s.overlay,{hovered:w,[s.squareView]:C}),g[9]=w,g[10]=C,g[11]=d):d=g[11],g[12]===Symbol.for("react.memo_cache_sentinel")?(u=()=>S(!0),m=()=>S(!1),g[12]=u,g[13]=m):(u=g[12],m=g[13]),g[14]!==b?(h=b&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:s.overlayScreen}),(0,r.jsx)(l,{className:s.expandIcon,size:20})]}),g[14]=b,g[15]=h):h=g[15],g[16]!==v||g[17]!==y||g[18]!==h||g[19]!==d?(p=(0,r.jsx)("a",{href:y,className:d,onClick:v,onMouseEnter:u,onMouseLeave:m,"aria-label":"Open image thumbnail",target:"_blank",rel:"noreferrer",children:h}),g[16]=v,g[17]=y,g[18]=h,g[19]=d,g[20]=p):p=g[20],g[21]!==p||g[22]!==t||g[23]!==c?(f=(0,r.jsxs)("div",{className:t,children:[c,p]}),g[21]=p,g[22]=t,g[23]=c,g[24]=f):f=g[24],f},d=(0,o.memo)(c);try{c.displayName||(c.displayName="ChatImageUnmemoized")}catch{}try{d.displayName||(d.displayName="ChatImage")}catch{}},30938:(e,t,n)=>{n.d(t,{V:()=>nt});var r,a,i=n(74848),o=n(21728),s=n(53419),l=n(13017),c=n(11196),d=n(21373),u=n(1992),m=n(5524),h=n(46251),p=n(69726),f=n(96540),g=n(82595),y=n(84646),x=n(2635),v=n(79802),b=n(17485),_=n(25641),C=n(34164);let w={toggleButton:"ToggleButton-module__toggleButton--JlWKX",selected:"ToggleButton-module__selected--fx0LM",icon:"ToggleButton-module__icon--mJLXC",textContent:"ToggleButton-module__textContent--xX6cl"},S=(0,f.forwardRef)((e,t)=>{let n,r,a,s,l,c,d,u,m,h,p,f,g,y,x,v,b=(0,o.c)(33);if(b[0]!==e){let{icon:t,isSelected:i,onClick:o,hasMenu:m,isMenuOpen:h,selectedItemLabel:p,children:f,...g}=e;a=t,c=o,d=p,n=f,l=void 0!==i&&i,r=void 0!==m&&m,s=void 0!==h&&h,u=Object.keys(g).reduce((e,t)=>(t.startsWith("aria-")&&(e[t]=g[t]),e),{}),b[0]=e,b[1]=n,b[2]=r,b[3]=a,b[4]=s,b[5]=l,b[6]=c,b[7]=d,b[8]=u}else n=b[1],r=b[2],a=b[3],s=b[4],l=b[5],c=b[6],d=b[7],u=b[8];let _=u;b[9]!==r||b[10]!==s||b[11]!==l?(m=()=>r?{"aria-haspopup":"menu","aria-expanded":s}:{"aria-pressed":l},b[9]=r,b[10]=s,b[11]=l,b[12]=m):m=b[12];let S=m;b[13]!==S?(h=S(),b[13]=S,b[14]=h):h=b[14],b[15]!==_||b[16]!==h?(p={..._,...h},b[15]=_,b[16]=h,b[17]=p):p=b[17];let j=p,N=r&&d?d:n;b[18]!==c?(f=e=>{c&&c(e)},b[18]=c,b[19]=f):f=b[19];let I=f,T=l&&w.selected;return b[20]!==T?(g=(0,C.$)(w.toggleButton,T),b[20]=T,b[21]=g):g=b[21],b[22]!==a?(y=!!a&&(0,i.jsx)("span",{className:w.icon,children:a}),b[22]=a,b[23]=y):y=b[23],b[24]!==N?(x=(0,i.jsx)("span",{className:w.textContent,children:N}),b[24]=N,b[25]=x):x=b[25],b[26]!==j||b[27]!==I||b[28]!==t||b[29]!==g||b[30]!==y||b[31]!==x?(v=(0,i.jsxs)("button",{ref:t,type:"button",className:g,onClick:I,...j,children:[y,x]}),b[26]=j,b[27]=I,b[28]=t,b[29]=g,b[30]=y,b[31]=x,b[32]=v):v=b[32],v});S.displayName="ToggleButton";var j=n(15033),N=n(33592),I=n(35247),T=n(38621);let k={disabledSpacesButton:"SpacesSelect-module__disabledSpacesButton--yz3ao"};function R({openCreateSpaceDialog:e}){let t=(0,N.b)(),{usePlanningIntent:n}=(0,x.Pk)(),[r,a]=(0,f.useState)(!1),o=(0,l.Zp)(),{handleSpaceSelect:C,clearSpaceSelection:w,activeCopilotSpaceId:R,readOnly:A}=(0,b.C)(),E=(0,f.useRef)(null),L=(0,f.useRef)(null),[M,F]=(0,f.useState)(!1),P=()=>{F(!0),e&&e(!0),(0,s.BI)("dotcom_chat.activate",{target:"SPACES_INPUT_CREATE_SPACE",mode:"immersive"})},{data:D=[],isLoading:$}=function(){let{threads:e}=(0,x.Pk)(),t=Array.from(e.values()).sort((e,t)=>new Date(t.updatedAt).getTime()-new Date(e.updatedAt).getTime()).map(e=>(0,v.O)(e)).filter(e=>null!==e),n=(0,y.jS)(!0),{data:r}=n;if(void 0===r)return n;let a=new Set,i=[...t.map(e=>r.find(t=>e.id===t.id&&e.owner===t.owner)).filter(e=>{if(void 0===e)return!1;let t=`${e.owner}:${e.id}`;return!a.has(t)&&(a.add(t),!0)}),...[...r].sort((e,t)=>new Date(t.updatedAt).getTime()-new Date(e.updatedAt).getTime()).filter(e=>{let t=`${e.owner}:${e.id}`;return!a.has(t)})].slice(0,5);return{...n,data:i}}(),{data:O=[],isLoading:B}=(0,y.jS)(!0),U=(0,y.BV)(),z=$||B;if((0,f.useEffect)(()=>{if(z&&r&&E.current)E.current.focus();else if(!z&&r&&L.current){let e=setTimeout(()=>{L.current?.focus()},0);return()=>clearTimeout(e)}},[z,r]),!U||A)return;if(I.W.planningAgent&&n)return(0,i.jsx)(c.m,{text:"Spaces are not compatible with Planning mode.",children:(0,i.jsx)(d.Q,{leadingVisual:T.SpaceIcon,inactive:!0,"aria-disabled":!0,className:k.disabledSpacesButton,children:"Space"})});let W=R?O.find(e=>e.id===R.id&&e.owner===R.owner):void 0,V=W?W.name:"Space",q="260px";return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(u.W,{open:r,onOpenChange:a,children:[(0,i.jsx)(u.W.Anchor,{children:I.W.spacesAsAttachmentsEnabled?(0,i.jsxs)(m.l.Item,{onSelect:()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_COPILOT_SPACES",mode:"immersive"})},"aria-label":"Select a copilot space for this conversation",children:[(0,i.jsx)(m.l.LeadingVisual,{children:(0,i.jsx)(T.SpaceIcon,{})}),"Spaces\u2026"]}):(0,i.jsx)(S,{icon:(0,i.jsx)(g.I,{icon:"spaces"}),isSelected:!!W,onClick:()=>{},hasMenu:!0,"aria-label":"Select a copilot space for this conversation",isMenuOpen:r,selectedItemLabel:V,children:V})}),(0,i.jsx)(u.W.Overlay,{style:D.length>0?{width:q}:{},children:z?(0,i.jsxs)(h.B,{direction:"horizontal",align:"center",justify:"center",padding:"normal",style:{width:q},children:[(0,i.jsx)("div",{ref:E,role:"status",className:"sr-only",tabIndex:-1,children:"Loading spaces"}),(0,i.jsx)(p.A,{})]}):(0,i.jsx)(m.l,{selectionVariant:"single",role:"menu","aria-label":"Select a space",children:D.length>0?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(m.l.Group,{children:[(0,i.jsx)(m.l.GroupHeading,{"aria-label":"Recent spaces",children:"Recent"}),D.map((n,r)=>{let o=!!R&&n.id===R.id&&n.owner===R.owner;return(0,i.jsx)(m.l.Item,{ref:0===r?L:void 0,role:"menuitemradio",onSelect:()=>{R&&n.id===R.id&&n.owner===R.owner?w():(e&&t.addReference({...n,type:"copilot-space"},"spaces"),C({id:n.id,owner:n.owner}),(0,s.BI)("dotcom_chat.activate",{target:"SPACES_INPUT_SELECT_SPACE",space:`${n.owner}/${n.id}`})),a(!1)},selected:o,"aria-checked":o,children:(0,i.jsx)("span",{children:n.name})},`${n.owner}, ${n.id}`)})]}),(0,i.jsx)(m.l.Divider,{}),(0,i.jsx)(m.l.Item,{onSelect:()=>{o(_.VR),(0,s.BI)("dotcom_chat.activate",{target:"SPACES_INPUT_VIEW_ALL_SPACES",mode:"immersive"})},children:"View all spaces"}),(0,i.jsx)(m.l.Divider,{}),(0,i.jsx)(m.l.Item,{onSelect:P,children:"Create a space"})]}):(0,i.jsx)(m.l.Item,{ref:L,onSelect:P,children:"Create your first space"})})})]}),M?(0,i.jsx)(j.D,{closeDialog:()=>{(0,s.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CREATE_DIALOG_CLOSE",mode:"immersive"}),F(!1)}}):null]})}try{R.displayName||(R.displayName="SpacesSelect")}catch{}var A=n(29731),E=n(83494),L=n(8625),M=n(52870),F=n(59121),P=n(94747),D=n(96379),$=n(7277),O=n(47970),B=n(79216),U=n(20330);let z=/^(?:https:\/\/)?(?:www\.)?(figma\.com\/.+)$/,W=class FigmaNotAuthorizedError extends Error{constructor(){super(),this.name="FigmaNotAuthorizedError"}};async function V(e){let t=await (0,D.lS)(`/copilot/immersive/figma-link?item_url=${e}`);if(!t.ok){if(403===t.status)throw new W;throw Error(`Failed to fetch Figma reference data (${t.status}: ${t.statusText})`)}return await t.json()}async function q(e){let{itemUrl:t}=e,n=await (0,D.lS)(`/copilot/chat-links?item_url=${t}`);if(!n.ok)throw Error(`Failed to fetch reference data (${n.status}: ${n.statusText})`);return await n.json()}var G=n(88431),H=n(79064),K=n(72303);let Z=async(e,t,n)=>{if((e[0]??"")!=="/")return!1;e=e.substring(1);let r=(({manager:e})=>[{label:"Delete conversation",command:"delete",icon:T.TrashIcon,requiresParams:!1,action:async(t,n)=>{e.dispatch({type:"SLASH_COMMANDS_LOADING"});try{let t=(0,K.W)(n);if(!t)throw Error("Thread not found");await e.deleteThread(t),(0,s.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_DELETE_THREAD",mode:n.mode}),e.dispatch({type:"SLASH_COMMANDS_LOADED"})}catch{e.dispatch({type:"SLASH_COMMANDS_ERROR"})}}},{label:"Rename conversation",command:"rename",icon:T.PencilIcon,requiresParams:!0,action:async(t,n)=>{e.dispatch({type:"SLASH_COMMANDS_LOADING"});try{let r=(0,K.W)(n);if(!r)throw Error("Thread not found");await e.renameThread(r,t),(0,s.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_RENAME",mode:n.mode}),e.dispatch({type:"SLASH_COMMANDS_LOADED"})}catch{e.dispatch({type:"SLASH_COMMANDS_ERROR"})}}},{label:"Start a new conversation",command:"new",icon:T.PlusIcon,requiresParams:!1,action:async(t,n)=>{e.dispatch({type:"SLASH_COMMANDS_LOADING"});try{await e.selectThread(null),(0,s.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_NEW_THREAD",mode:n.mode}),e.dispatch({type:"SLASH_COMMANDS_LOADED"})}catch{e.dispatch({type:"SLASH_COMMANDS_ERROR"})}}}])({manager:n}).filter(t=>{let n=(e.split(" ",1)[0]??"").toLowerCase().trim();return t.command.toLowerCase().includes(n)});if(1!==r.length)return!1;let a=r[0],i=e.substring(a.command.length).trim();return await a.action(i,t),!0};var Q=n(46062);let ChatInputValidationError=class ChatInputValidationError extends Error{constructor(e){super(e),this.name="ChatInputValidationError"}};function J(e,t,n){if("immersive"===e&&/^\/copilot(\/agents|\/spaces\/[a-zA-Z0-9-_]+\/[0-9]+)?\/?$/.test(t)){let e=n.get("prompt");if(e)return e}}var Y=n(26239),X=n(60905),ee=n(76166),et=n(72439),en=n(23657),er=n(72206),ea=n(14521),ei=n(47789),eo=n(99054),es=n(77430);function el(e){let t,n,r,a,l,c,d=(0,o.c)(24),{onSelectPanel:h,onSelectAgent:p}=e,{availableAgents:f,showLimit:g,disabled:y,loading:x}=(0,eo.JE)(),v=f&&f.length>0;if(x){let e;return d[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsxs)(m.l.Item,{disabled:!0,children:[(0,i.jsx)(m.l.LeadingVisual,{children:(0,i.jsx)(T.AppsIcon,{})}),"Extensions\u2026"]}),d[0]=e):e=d[0],e}if(y){let e,t,n;return d[1]!==h?(e=()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_NOT_SUPPORTED",mode:"immersive"}),h("agents-not-supported")},d[1]=h,d[2]=e):e=d[2],d[3]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(m.l.LeadingVisual,{children:(0,i.jsx)(T.AppsIcon,{})}),d[3]=t):t=d[3],d[4]!==e?(n=(0,i.jsxs)(m.l.Item,{onSelect:e,children:[t,"Extensions\u2026"]}),d[4]=e,d[5]=n):n=d[5],n}if(!v){let e,t,n;return d[6]!==h?(e=()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_NOT_AVAILABLE",mode:"immersive"}),h("no-agents-available")},d[6]=h,d[7]=e):e=d[7],d[8]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(m.l.LeadingVisual,{children:(0,i.jsx)(T.AppsIcon,{})}),d[8]=t):t=d[8],d[9]!==e?(n=(0,i.jsxs)(m.l.Item,{onSelect:e,children:[t,"Extensions\u2026"]}),d[9]=e,d[10]=n):n=d[10],n}if(d[11]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(u.W.Anchor,{children:(0,i.jsxs)(m.l.Item,{onSelect:ed,children:[(0,i.jsx)(m.l.LeadingVisual,{children:(0,i.jsx)(T.AppsIcon,{})}),"Extensions\u2026"]})}),d[11]=t):t=d[11],d[12]!==f||d[13]!==p||d[14]!==g){let e;d[16]!==p||d[17]!==g?(e=e=>(0,i.jsxs)(m.l.Item,{onSelect:()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_SELECTED",mode:"immersive"}),p(e)},children:[(0,i.jsx)(m.l.LeadingVisual,{children:(0,i.jsx)(es.r,{src:e.avatarUrl})}),e.name,!g&&(0,i.jsxs)(m.l.Description,{variant:"inline",truncate:!0,children:[eo.Z3,e.slug]}),g&&(0,i.jsx)(m.l.Description,{variant:"block",children:"Start a new conversation to use other extensions."})]},e.slug),d[16]=p,d[17]=g,d[18]=e):e=d[18],n=f.map(e),d[12]=f,d[13]=p,d[14]=g,d[15]=n}else n=d[15];return d[19]===Symbol.for("react.memo_cache_sentinel")?(r=(0,i.jsx)(m.l.Divider,{}),d[19]=r):r=d[19],d[20]===Symbol.for("react.memo_cache_sentinel")?(a=(0,i.jsx)(m.l.LeadingVisual,{children:(0,i.jsx)(T.TelescopeIcon,{})}),d[20]=a):a=d[20],d[21]===Symbol.for("react.memo_cache_sentinel")?(l=(0,i.jsxs)(m.l.LinkItem,{href:eo.bn,onClick:ec,children:[a,"Marketplace",(0,i.jsx)(m.l.TrailingVisual,{children:(0,i.jsx)(T.LinkExternalIcon,{})})]}),d[21]=l):l=d[21],d[22]!==n?(c=(0,i.jsxs)(u.W,{children:[t,(0,i.jsx)(u.W.Overlay,{width:"small",children:(0,i.jsxs)(m.l,{children:[n,r,l]})})]}),d[22]=n,d[23]=c):c=d[23],c}function ec(){(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_MARKETPLACE",mode:"immersive"})}function ed(){(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION",mode:"immersive"})}try{el.displayName||(el.displayName="AgentMenu")}catch{}var eu=n(1805),em=n(15042);let eh={AgentsDialogsMainContainer:"AgentsDialogs-module__AgentsDialogsMainContainer--ymBth",dialogContentWrapper:"AgentsDialogs-module__dialogContentWrapper--v7abd",dialogTitle:"AgentsDialogs-module__dialogTitle--tEo3x",dialogDescription:"AgentsDialogs-module__dialogDescription--LPgKm",documentationLinkContainer:"AgentsDialogs-module__documentationLinkContainer--ydpZ9",AgentsDialogsAlternateContainer:"AgentsDialogs-module__AgentsDialogsAlternateContainer--iIZFy",alertIconContainer:"AgentsDialogs-module__alertIconContainer--jNjdz"};function ep(e){let t,n,r=(0,o.c)(4),{onClose:a,returnFocusRef:s}=e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(t={narrow:"fullscreen",regular:"center"},r[0]=t):t=r[0],r[1]!==a||r[2]!==s?(n=(0,i.jsx)(em.l,{width:"large",title:"Extensions",position:t,onClose:a,returnFocusRef:s,renderBody:ef}),r[1]=a,r[2]=s,r[3]=n):n=r[3],n}function ef(){return(0,i.jsx)("div",{className:eh.AgentsDialogsMainContainer,children:(0,i.jsxs)("div",{className:eh.dialogContentWrapper,children:[(0,i.jsx)(T.TelescopeIcon,{size:24}),(0,i.jsx)("h3",{className:eh.dialogTitle,children:"Chat with your favorite tools and services"}),(0,i.jsx)("p",{className:eh.dialogDescription,children:"Browse the marketplace to find extensions for the tools and services you rely on"}),(0,i.jsx)(d.Q,{as:"a",href:eo.bn,children:"Browse marketplace"}),(0,i.jsx)("div",{className:eh.documentationLinkContainer,children:(0,i.jsx)(eu.A,{href:"https://gh.io/copilot-extensions-docs",children:"Documentation"})})]})})}function eg(e){let t,n,r,a=(0,o.c)(9),{onClose:s,returnFocusRef:l}=e,c=(0,N.b)(),u=(0,x.Pk)(),m=(0,y.BV)(),h=(0,Q.GF)(u.availableModels);return a[0]===Symbol.for("react.memo_cache_sentinel")?(t={narrow:"fullscreen",regular:"center"},a[0]=t):t=a[0],a[1]!==m||a[2]!==h||a[3]!==c?(n=()=>(0,i.jsx)("div",{className:eh.AgentsDialogsAlternateContainer,children:(0,i.jsxs)("div",{className:eh.dialogContentWrapper,children:[(0,i.jsx)("div",{className:eh.alertIconContainer,children:(0,i.jsx)(T.AlertIcon,{size:24})}),(0,i.jsxs)("h3",{className:eh.dialogTitle,children:[m?"Copilots and extensions":"Extensions"," aren't supported by this model"]}),(0,i.jsxs)("p",{className:eh.dialogDescription,children:["Switch back to the ",h.displayName," model or start a new conversation"]}),(0,i.jsx)(d.Q,{onClick:()=>{c.selectThread(null),c.selectModel(h)},children:"New conversation"})]})}),a[1]=m,a[2]=h,a[3]=c,a[4]=n):n=a[4],a[5]!==s||a[6]!==l||a[7]!==n?(r=(0,i.jsx)(em.l,{width:"large",title:"Extensions",position:t,onClose:s,returnFocusRef:l,renderBody:n}),a[5]=s,a[6]=l,a[7]=n,a[8]=r):r=a[8],r}try{ep.displayName||(ep.displayName="NoAgentsAvailableDialog")}catch{}try{eg.displayName||(eg.displayName="AgentsNotSupportedDialog")}catch{}var ey=n(77809),ex=n(97564);function ev(e){let t,n,r,a,s=(0,o.c)(14),{isOpen:l,onClose:c,initialRepo:d,onRepoSelect:u}=e,m=(0,N.b)(),{findFileWorkerPath:h}=(0,x.Pk)(),p=(0,f.useRef)(null);s[0]!==m||s[1]!==c?(t=async e=>{let t=await (0,ex.V)(e.repositoryId),n=(0,_.qS)(t);m.addReference(n,"references-menu"),c()},s[0]=m,s[1]=c,s[2]=t):t=s[2];let g=t;s[3]!==m||s[4]!==c?(n=async e=>{if(0===e.length)return void c();let t=await (0,ex.V)(e[0].repositoryId);for(let n of e.map(e=>"github_folder"===e.type?(0,_.OC)(e.filePath,t):(0,_.Od)(e.filePath,t)))m.addReference(n,"references-menu");c()},s[3]=m,s[4]=c,s[5]=n):n=s[5];let y=n;return l?(s[6]===Symbol.for("react.memo_cache_sentinel")?(r=[],s[6]=r):r=s[6],s[7]!==h||s[8]!==y||s[9]!==g||s[10]!==d||s[11]!==c||s[12]!==u?(a=(0,i.jsx)(ey.Q,{formData:r,onCancel:c,onSaveFiles:y,onSaveRepository:g,findFileWorkerPath:h,attachmentButtonRef:p,initialRepo:d,onRepoSelect:u,allowFolderReferences:!0,maxFileCount:20}),s[7]=h,s[8]=y,s[9]=g,s[10]=d,s[11]=c,s[12]=u,s[13]=a):a=s[13],a):null}try{ev.displayName||(ev.displayName="CopilotFilePicker")}catch{}var eb=n(82075),e_=n(26108),eC=n(5839),ew=n(81960),eS=n(31604),ej=n(69497),eN=n(10095),eI=n(21998),eT=n(40961);let ek={disabledForPreviewModelsPanel:"KnowledgeSelectPanel-module__disabledForPreviewModelsPanel--5fRzV",knowledgeBaseIcon:"KnowledgeSelectPanel-module__knowledgeBaseIcon--peP3C",KnowledgeSelectPanelContainer:"KnowledgeSelectPanel-module__KnowledgeSelectPanelContainer--_RbkD",panelHeader:"KnowledgeSelectPanel-module__panelHeader--kWY60",headerContent:"KnowledgeSelectPanel-module__headerContent--AQ0gC",panelTitle:"KnowledgeSelectPanel-module__panelTitle--oQLU4",emptyStateContainer:"KnowledgeSelectPanel-module__emptyStateContainer--Rk1JI",emptyStateContent:"KnowledgeSelectPanel-module__emptyStateContent--BiaDj",emptyStateMessage:"KnowledgeSelectPanel-module__emptyStateMessage--S8iOa",emptyStateDescription:"KnowledgeSelectPanel-module__emptyStateDescription--d4gqH",emptyStateInstructions:"KnowledgeSelectPanel-module__emptyStateInstructions--pOJKv",actionButtonsContainer:"KnowledgeSelectPanel-module__actionButtonsContainer--NjnfZ",createButton:"KnowledgeSelectPanel-module__createButton--AfP6G",organizationsSection:"KnowledgeSelectPanel-module__organizationsSection--YaCxl",sectionTitle:"KnowledgeSelectPanel-module__sectionTitle--hm4Tw",organizationsList:"KnowledgeSelectPanel-module__organizationsList--UvNcy",organizationLink:"KnowledgeSelectPanel-module__organizationLink--UkWa7",organizationAvatar:"KnowledgeSelectPanel-module__organizationAvatar--igPHI",organizationName:"KnowledgeSelectPanel-module__organizationName--V_3Jw",ssoNotice:"KnowledgeSelectPanel-module__ssoNotice--EKDTO"},eR=(0,f.forwardRef)(function(e,t){let n,r,a,s,l,c=(0,o.c)(12);c[0]!==e?({open:r,setOpen:a,...n}=e,c[0]=e,c[1]=n,c[2]=r,c[3]=a):(n=c[1],r=c[2],a=c[3]);let d=!!r||void 0;return c[4]!==r||c[5]!==a?(s=()=>a(!r),c[4]=r,c[5]=a,c[6]=s):s=c[6],c[7]!==n||c[8]!==t||c[9]!==d||c[10]!==s?(l=(0,i.jsx)(e_.K,{ref:t,"aria-expanded":d,"aria-haspopup":!0,"aria-label":"Attach knowledge base","aria-labelledby":void 0,icon:T.BookIcon,onClick:s,variant:"invisible",className:ek.knowledgeBaseIcon,...n}),c[7]=n,c[8]=t,c[9]=d,c[10]=s,c[11]=l):l=c[11],l});function eA({disabledForPreviewModelsProps:e,emptyKnowledgeBaseProps:t,open:n,onOpenChange:r,anchorRef:a}){let o=(0,x.Pk)(),s=(0,N.b)(),l=(0,eb.A)("localStorage"),{knowledgeBases:c}=o,[d,u]=(0,f.useState)([]),[m,h]=(0,f.useState)(!0),[p,g]=(0,f.useState)(""),y=(0,f.useRef)(null),v=l.getItem("lastUsedKnowledgeBaseId")||"",b=l.getItem("lastUsedKnowledgeBaseOrg")||"",{currentReferences:C}=o;(0,f.useEffect)(()=>{n||g("")},[n]);let w=(0,f.useMemo)(()=>""===p?c:c.filter(e=>e.name.toLowerCase().includes(p.toLowerCase())),[p,c]),S=(0,f.useMemo)(()=>w.reduce((e,t)=>{let n=e.find(e=>e.org===t.ownerLogin);return n?n.docsets.push(t):e.push({org:t.ownerLogin,docsets:[t]}),e},[]),[w]),[j,I]=(0,f.useState)(!1),T=m||"pending"===o.knowledgeBasesLoading.state,k=j||"error"===o.knowledgeBasesLoading.state,R=(0,f.useRef)(!1);(0,f.useEffect)(()=>{let e=async()=>{h(!0),await s.fetchKnowledgeBases();let e=await s.service.listAdministratedCopilotEnterpriseOrganizations();e.ok?u(e.payload||[]):I(!0),h(!1)};n&&!R.current&&(R.current=!0,e())},[n,s]);let E=eD();if(o.model?.hasLimitedCapabilities)return(0,i.jsx)(eB,{open:n,setOpen:r,...e});if(!T&&0===c.length)return(0,i.jsx)(eE,{administratedCopilotEnterpriseOrganizations:d,persistentPanelStyles:{position:["fixed","fixed","absolute"],bottom:["60px","60px","0 !important"],"@media screen and (max-height: 480px)":{bottom:"0 !important"},top:"initial !important",left:["18px","18px","calc(50% - 360px) !important"],maxHeight:"100%"},open:n,setOpen:r,mode:o.mode,...t});let L=w.sort((e,t)=>e.id===v?-1:+(t.id===v)).map(e=>({id:e.id,key:e.id,groupId:e.ownerLogin,text:e.name,description:e.description,disabled:!e.canChat,descriptionVariant:"block"})),M=[...S].sort((e,t)=>e.org===b?-1:+(t.org===b)).map(e=>({id:e.org,key:e.org,text:e.org,groupId:e.org,header:{title:e.org}})),F=c.filter(e=>C.some(t=>(0,_.P)(t)&&t.id===e.id));return(0,i.jsx)("div",{ref:y,...(0,A.G)("knowledge-select-panel"),children:(0,i.jsx)(eC.X,{title:"Select knowledge bases",subtitle:"Knowledge bases consolidate content from multiple repositories for an improved chat experience.",onCancel:()=>{(0,eT.flushSync)(()=>r(!1)),a.current?.focus()},open:n,renderAnchor:null,anchorRef:a,onOpenChange:r,loading:T,items:L,onFilterChange:g,groupMetadata:M,notice:null!==E?{text:E,variant:"info"}:void 0,message:k?{variant:"error",title:"Failed to load knowledge bases",body:"Try again later"}:0===S.length?{variant:"empty",title:`No knowledge bases found for \`${p}\``,body:"Try a different search term"}:void 0,...{selected:F,onSelectedChange:e=>(e=>{var t=e.map(e=>c.find(t=>t.id===e.id)).filter(e=>void 0!==e);let n=t.filter(e=>(0,_.P)(e)&&!C.some(t=>(0,_.P)(t)&&t.id===e.id));for(let e of C.filter(e=>(0,_.P)(e)&&!t.some(t=>t.id===e.id)))s.removeReference(e);for(let e of n)s.addReference((0,_.UU)(e),"docsetMenu")})(e)},variant:"modal",overlayProps:{maxHeight:"xlarge"},width:"large"})})}function eE(e){let t,n,r,a,s,l,c,d,u,m,h,p,f,g,y,x,v,b,_,C,w,S,j,N,I=(0,o.c)(53),{administratedCopilotEnterpriseOrganizations:k,anchorRef:R,open:E,setOpen:L}=e,M=eD();I[0]!==R||I[1]!==E||I[2]!==L?(t=R?{anchorRef:R,renderAnchor:null}:{anchorRef:void 0,renderAnchor:e=>{let{...t}=e;return(0,i.jsx)(eR,{open:E,setOpen:L,...t})}},I[0]=R,I[1]=E,I[2]=L,I[3]=t):t=I[3];let F=t,P=k?.length===0;I[4]!==P?(n=P?{flexGrow:1,maxHeight:"100%",overflowY:"auto"}:{},I[4]=P,I[5]=n):n=I[5];let D=n;I[6]!==P?(r=P?{maxHeight:"100%"}:{},I[6]=P,I[7]=r):r=I[7];let $=r;I[8]!==P?(a=P?{height:"100%"}:{},I[8]=P,I[9]=a):a=I[9];let O=a;return I[10]!==L?(s=()=>L(!0),l=()=>L(!1),I[10]=L,I[11]=s,I[12]=l):(s=I[11],l=I[12]),I[13]===Symbol.for("react.memo_cache_sentinel")?(c={anchorSide:"outside-bottom",style:{width:"min(100%, 350px)"}},I[13]=c):c=I[13],I[14]!==O?(d={...O},I[14]=O,I[15]=d):d=I[15],I[16]===Symbol.for("react.memo_cache_sentinel")?(u=(0,A.G)("empty-knowledge-base-picker"),I[16]=u):u=I[16],I[17]===Symbol.for("react.memo_cache_sentinel")?(m=(0,i.jsx)(ew.A,{id:"knowledge-base-dialog-title",as:"h4",className:ek.panelTitle,children:"Attach a knowledge base"}),I[17]=m):m=I[17],I[18]!==L?(h=(0,i.jsx)("div",{className:ek.panelHeader,children:(0,i.jsxs)("div",{className:ek.headerContent,children:[m,(0,i.jsx)(e_.K,{unsafeDisableTooltip:!0,"aria-label":"Close",icon:T.XIcon,variant:"invisible",onClick:()=>L(!1)})]})}),I[18]=L,I[19]=h):h=I[19],I[20]!==D?(p={...D},I[20]=D,I[21]=p):p=I[21],I[22]===Symbol.for("react.memo_cache_sentinel")?(f=(0,i.jsx)(eN.A,{icon:T.BookIcon,size:"medium",className:ek.knowledgeBaseIcon}),I[22]=f):f=I[22],I[23]!==$?(g={...$},I[23]=$,I[24]=g):g=I[24],I[25]===Symbol.for("react.memo_cache_sentinel")?(y=(0,i.jsx)("span",{className:ek.emptyStateMessage,children:"You don't have any knowledge bases"}),I[25]=y):y=I[25],I[26]===Symbol.for("react.memo_cache_sentinel")?(x=(0,i.jsx)("p",{children:"Knowledge bases consolidate content from multiple repositories for an improved chat experience."}),I[26]=x):x=I[26],I[27]!==P?(v=P&&(0,i.jsx)("p",{className:ek.emptyStateInstructions,...(0,A.G)("ask-admin-for-knowledge-base"),children:"Speak with an organization owner about creating a knowledge base for your organization."}),I[27]=P,I[28]=v):v=I[28],I[29]!==v?(b=(0,i.jsxs)("div",{className:ek.emptyStateDescription,children:[x,v]}),I[29]=v,I[30]=b):b=I[30],I[31]!==k?(_=k.length>0&&(0,i.jsx)(eL,{administratedCopilotEnterpriseOrganizations:k}),I[31]=k,I[32]=_):_=I[32],I[33]!==g||I[34]!==b||I[35]!==_?(C=(0,i.jsxs)(eI.az,{sx:g,className:ek.emptyStateContent,children:[y,b,_]}),I[33]=g,I[34]=b,I[35]=_,I[36]=C):C=I[36],I[37]!==p||I[38]!==C?(w=(0,i.jsxs)(eI.az,{sx:p,className:ek.emptyStateContainer,children:[f,C]}),I[37]=p,I[38]=C,I[39]=w):w=I[39],I[40]!==M?(S=M&&(0,i.jsx)("div",{className:ek.actionButtonsContainer,children:(0,i.jsx)(eP,{message:M})}),I[40]=M,I[41]=S):S=I[41],I[42]!==h||I[43]!==w||I[44]!==S||I[45]!==d?(j=(0,i.jsxs)(eI.az,{role:"dialog","aria-labelledby":"knowledge-base-dialog-title",sx:d,className:ek.KnowledgeSelectPanelContainer,...u,children:[h,w,S]}),I[42]=h,I[43]=w,I[44]=S,I[45]=d,I[46]=j):j=I[46],I[47]!==F||I[48]!==E||I[49]!==j||I[50]!==s||I[51]!==l?(N=(0,i.jsx)(eS.T,{open:E,onOpen:s,onClose:l,overlayProps:c,...F,children:j}),I[47]=F,I[48]=E,I[49]=j,I[50]=s,I[51]=l,I[52]=N):N=I[52],N}function eL(e){let t=(0,o.c)(11),{administratedCopilotEnterpriseOrganizations:n}=e;if(1===n.length){let e,r,a;return t[0]!==n[0]?(e=eO(n[0]),t[0]=n[0],t[1]=e):e=t[1],t[2]===Symbol.for("react.memo_cache_sentinel")?(r=(0,A.G)("create-knowledge-base-button"),t[2]=r):r=t[2],t[3]!==e?(a=(0,i.jsx)(d.Q,{as:"a",href:e,className:ek.createButton,...r,children:"Create a knowledge base"}),t[3]=e,t[4]=a):a=t[4],a}{let e,r,a,o;return t[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,A.G)("create-knowledge-base-dropdown"),r=(0,i.jsx)(ew.A,{as:"h3",className:ek.sectionTitle,children:"Create a knowledge base for an organization"}),t[5]=e,t[6]=r):(e=t[5],r=t[6]),t[7]!==n?(a=n.map(eM),t[7]=n,t[8]=a):a=t[8],t[9]!==a?(o=(0,i.jsxs)("div",{className:ek.organizationsSection,...e,children:[r,(0,i.jsx)(m.l,{className:ek.organizationsList,children:a})]}),t[9]=a,t[10]=o):o=t[10],o}}function eM(e){return(0,i.jsx)(eF,{org:e},e.id)}function eF(e){let t,n,r,a,s=(0,o.c)(11),{org:l}=e;return s[0]!==l?(t=eO(l),s[0]=l,s[1]=t):t=s[1],s[2]!==l.avatarUrl||s[3]!==l.login?(n=(0,i.jsx)(es.r,{square:!0,src:l.avatarUrl,alt:l.login,"aria-hidden":"true",className:ek.organizationAvatar}),s[2]=l.avatarUrl,s[3]=l.login,s[4]=n):n=s[4],s[5]!==l.login?(r=(0,i.jsx)(ej.A,{inline:!0,title:l.login,className:ek.organizationName,children:l.login}),s[5]=l.login,s[6]=r):r=s[6],s[7]!==t||s[8]!==n||s[9]!==r?(a=(0,i.jsx)(m.l.Item,{children:(0,i.jsxs)(eu.A,{href:t,className:ek.organizationLink,children:[n,r]})}),s[7]=t,s[8]=n,s[9]=r,s[10]=a):a=s[10],a}function eP(e){let t,n=(0,o.c)(2),{message:r}=e;return r?(n[0]!==r?(t=(0,i.jsx)("div",{"data-testid":"knowledge-select-panel-sso",className:ek.ssoNotice,children:r}),n[0]=r,n[1]=t):t=n[1],t):null}function eD(){let e=(0,x.Pk)(),t=e.ssoOrganizations.map(e$);for(let n of e.knowledgeBases)for(let e of n.protectedOrganizations)t.includes(e)||t.push(e);if(!t||0===t.length)return null;{if(1===t.length)return`Single sign-on to see content from ${t[0]}.`;if(2===t.length)return`Single sign-on to see content from ${t[0]} and ${t[1]}.`;let e=t.length-2;return`Single sign-on to see content from ${t[0]}, ${t[1]}, and ${e} organization${e>1?"s":""}`}}function e$(e){return e.login}function eO(e){return`/organizations/${e.login}/settings/copilot/chat_settings/new`}function eB(e){let t,n,r,a,s,l=(0,o.c)(13),{anchorRef:c,open:d,setOpen:u}=e;l[0]!==c||l[1]!==d||l[2]!==u?(t=c?{anchorRef:c,renderAnchor:null}:{anchorRef:void 0,renderAnchor:e=>{let{...t}=e;return(0,i.jsx)(eR,{open:d,setOpen:u,...t})}},l[0]=c,l[1]=d,l[2]=u,l[3]=t):t=l[3];let m=t;return l[4]!==u?(n=()=>u(!0),r=()=>u(!1),l[4]=u,l[5]=n,l[6]=r):(n=l[5],r=l[6]),l[7]===Symbol.for("react.memo_cache_sentinel")?(a=(0,i.jsxs)("div",{className:(0,C.$)("m-3 d-flex flex-column flex-items-center text-center",ek.disabledForPreviewModelsPanel),children:[(0,i.jsx)(T.AlertIcon,{className:"fgColor-attention mb-3"}),(0,i.jsx)("h3",{className:"h5 mb-2",children:"Knowledge bases aren't supported by this model"}),(0,i.jsx)("span",{className:"text-small fgColor-muted",children:"Switch back to the GPT-4o model or start a new conversation"})]}),l[7]=a):a=l[7],l[8]!==m||l[9]!==d||l[10]!==n||l[11]!==r?(s=(0,i.jsx)(eS.T,{open:d,onOpen:n,onClose:r,...m,children:a}),l[8]=m,l[9]=d,l[10]=n,l[11]=r,l[12]=s):s=l[12],s}try{eR.displayName||(eR.displayName="KBIconButton")}catch{}try{(r=KBIconButtonInner).displayName||(r.displayName="KBIconButtonInner")}catch{}try{eA.displayName||(eA.displayName="KnowledgeSelectPanel")}catch{}try{eE.displayName||(eE.displayName="EmptyKnowledgeBase")}catch{}try{eL.displayName||(eL.displayName="CreateKnowledgeBaseButton")}catch{}try{eF.displayName||(eF.displayName="CreateKnowledgeBaseActionRow")}catch{}try{eP.displayName||(eP.displayName="SSOFooter")}catch{}try{eB.displayName||(eB.displayName="DisabledForPreviewModels")}catch{}var eU=n(35673),ez=n(70170),eW=n(18096),eV=n(97286);async function eq(e,t,n,r){return new Promise((a,i)=>{if(!window.Worker)return void setTimeout(()=>a(e.filter(e=>e.includes(t))));let o=new Worker(n);o.addEventListener("message",e=>a(e.data.list)),o.addEventListener("error",e=>i(Error(`Worker error: ${e.message}`))),r.addEventListener("abort",()=>{o.terminate(),i(Error("Worker aborted"))}),o.postMessage({baseList:e,query:t})})}function eG(e,t){let n,r,a,i=(0,o.c)(9),{findFileWorkerPath:s}=(0,x.Pk)();i[0]!==e||i[1]!==t||i[2]!==s?(n=["copilot-worker-filter",s,e,t],r=async n=>{let{signal:r}=n;return e?0===t.length?e:eq(e,t,s,r):[]},i[0]=e,i[1]=t,i[2]=s,i[3]=n,i[4]=r):(n=i[3],r=i[4]);let l=null!==e;return i[5]!==n||i[6]!==r||i[7]!==l?(a={queryKey:n,queryFn:r,enabled:l,staleTime:1/0,gcTime:1e4,networkMode:"always",retry:!1,placeholderData:eH},i[5]=n,i[6]=r,i[7]=l,i[8]=a):a=i[8],(0,eV.I)(a)}function eH(e){return e}function eK(e,t){let n,r,a,i=(0,o.c)(11),s=void 0===t||t,l=(0,N.b)(),c=null!==e;return i[0]!==s||i[1]!==e?(n=["copilot-repository-files",e,s],i[0]=s,i[1]=e,i[2]=n):n=i[2],i[3]!==s||i[4]!==l||i[5]!==e?(r=async()=>{if(!e)return{};let t=await l.service.listRepoFiles(e,s);if(!t.ok)throw Error("Failed to fetch files for repository");return t.payload},i[3]=s,i[4]=l,i[5]=e,i[6]=r):r=i[6],i[7]!==c||i[8]!==n||i[9]!==r?(a={enabled:c,queryKey:n,queryFn:r,staleTime:3e5},i[7]=c,i[8]=n,i[9]=r,i[10]=a):a=i[10],(0,eV.I)(a)}function eZ(e,t){let n,r,a,i=(0,o.c)(11),s=(0,N.b)(),l=null!==e&&t.length>0;return i[0]!==e||i[1]!==t?(n=["copilot-repository-symbols",e,t],i[0]=e,i[1]=t,i[2]=n):n=i[2],i[3]!==s||i[4]!==e||i[5]!==t?(r=async()=>{if(!e)return[];let n=await s.service.querySymbols(e,t);if(!n.ok)throw Error("Failed to fetch symbols for repository");return n.payload.filter(eQ)},i[3]=s,i[4]=e,i[5]=t,i[6]=r):r=i[6],i[7]!==l||i[8]!==n||i[9]!==r?(a={enabled:l,queryKey:n,queryFn:r},i[7]=l,i[8]=n,i[9]=r,i[10]=a):a=i[10],(0,eV.I)(a)}function eQ(e){return!!e.symbol}var eJ=n(26875),eY=n(70845);let eX={chooseRepoInstructionPanel:"ReferencesSelectPanel-module__chooseRepoInstructionPanel--zT6kZ",chooseRepoTitle:"ReferencesSelectPanel-module__chooseRepoTitle--T61jD",chooseRepoSubtitle:"ReferencesSelectPanel-module__chooseRepoSubtitle--sQVTX",selectPanelContainer:"ReferencesSelectPanel-module__selectPanelContainer--wSTmy",ActionList:"ReferencesSelectPanel-module__ActionList--SpdwU",referenceListItem:"ReferencesSelectPanel-module__referenceListItem--mq8Ni",referenceItemText:"ReferencesSelectPanel-module__referenceItemText--JlIMs"};var e0=n(87086);let e1="Search",e2=e=>{let t,n,r,a,s,l=(0,o.c)(26),{open:c,onOpenChange:d,cancelReturnFocusRef:u,submitReturnFocusRef:m,...h}=e,p=(0,N.b)(),[g,y]=(0,f.useState)();l[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>y(void 0),l[0]=t):t=l[0],l[1]!==c?(n=[c],l[1]=c,l[2]=n):n=l[2],(0,f.useEffect)(t,n);let v=(0,x.pn)(tn);l[3]!==v?(r=new Set(v.filter(tr).map(ta)),l[3]=v,l[4]=r):r=l[4];let b=r,[_,C]=(0,f.useState)(),w=(0,f.useRef)(!1);l[5]!==p.service?(a=async e=>{C(void 0),w.current=!0;let t=await p.service.fetchRepo(e);t.ok?y(t.payload):C("Error: failed to load repository details. Please try again."),w.current=!1},l[5]=p.service,l[6]=a):a=l[6];let S=a,j=(e=>{let t=e.includes("files"),n=e.includes("folders"),r=e.includes("symbols");return t&&n&&r?"Choose a repository to browse for files, folders, and symbols.":t&&n?"Choose a repository to browse for files and folders.":t&&r?"Choose a repository to browse for files and symbols.":n&&r?"Choose a repository to browse for folders and symbols.":t?"Choose a repository to browse for files.":n?"Choose a repository to browse for folders.":r?"Choose a repository to browse for symbols.":"Choose a repository to browse for references."})(h.supportedReferenceTypes??e5);if(!g){let e,t,n;return l[7]!==d?(e=e=>{w.current||d(e)},l[7]=d,l[8]=e):e=l[8],l[9]===Symbol.for("react.memo_cache_sentinel")?(t=new Set,l[9]=t):t=l[9],l[10]!==u||l[11]!==j||l[12]!==S||l[13]!==c||l[14]!==b||l[15]!==_||l[16]!==m||l[17]!==e?(n=(0,i.jsx)(e0.X1,{selectionVariant:"instant",open:c,onOpenChange:e,selectedRepoIds:t,onSelectRepo:S,cancelReturnFocusRef:u,submitReturnFocusRef:m,description:j,featuredRepoIds:b,error:_}),l[10]=u,l[11]=j,l[12]=S,l[13]=c,l[14]=b,l[15]=_,l[16]=m,l[17]=e,l[18]=n):n=l[18],n}return l[19]!==u||l[20]!==d||l[21]!==c||l[22]!==h||l[23]!==g||l[24]!==m?(s=(0,i.jsx)(e3,{...h,open:c,onOpenChange:d,sourceRepository:g,cancelReturnFocusRef:u,submitReturnFocusRef:m}),l[19]=u,l[20]=d,l[21]=c,l[22]=h,l[23]=g,l[24]=m,l[25]=s):s=l[25],s},e5=["files","folders","symbols"],e3=e=>{let t,n,r,a,s,l,c,d,u,h,p,g,y,v=(0,o.c)(40),{renderAnchor:b,anchorRef:C,open:w,onOpenChange:S,submitReturnFocusRef:j,cancelReturnFocusRef:I,sourceRepository:T,supportedReferenceTypes:k}=e,R=void 0===k?e5:k,[A,E]=(0,f.useState)("");v[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,ez.s)(E,250),v[0]=t):t=v[0];let L=(0,f.useRef)(t);v[1]!==w?(n=()=>{w||E("")},r=[w],v[1]=w,v[2]=n,v[3]=r):(n=v[2],r=v[3]),(0,f.useEffect)(n,r);let{initialLoading:M,filterLoading:F,selected:P,unselected:D,toggleSelection:$}=function(e,t,n,r=e5){let a=(0,x.Pk)(),i=(0,N.b)(),s=function(e,t,n,r){let a,i,s,l,c,d=(0,o.c)(16),u=void 0===r?e5:r;d[0]!==u?(a=u.includes("folders"),d[0]=u,d[1]=a):a=d[1];let m=a,h=u.includes("symbols");d[2]!==u?(i=u.includes("files"),d[2]=u,d[3]=i):i=d[3];let p=i,f=n?t:null,g=eK(f,m),y=eG(g.data?.paths??null,e),x=eG(g.data?.directories??null,e),v=eZ(h?f:null,e);d[4]!==v.data?(s=v.data?.map(tt)??null,d[4]=v.data,d[5]=s):s=d[5];let b=eG(s,e);if(d[6]!==x||d[7]!==y.data||d[8]!==b.data||d[9]!==p||d[10]!==m){let e=p?y.data?.slice(0,7).map(te)??[]:[];l=[...e,...m?x.data?.slice(0,7).map(e9)??[]:[],...b.data?.slice(0,7).map(e8)??[]],d[6]=x,d[7]=y.data,d[8]=b.data,d[9]=p,d[10]=m,d[11]=l}else l=d[11];let _=l,C=null===y.data&&null===x.data&&null===v.data,w=g.isFetching||y.isFetching||x.isFetching||v.isFetching||b.isFetching;return d[12]!==w||d[13]!==C||d[14]!==_?(c={items:_,filterLoading:w,initialLoading:C},d[12]=w,d[13]=C,d[14]=_,d[15]=c):c=d[15],c}(t,n,e,r),l=r.includes("symbols"),c=eZ(e&&l?n:null,t).data,[d,u,m]=(0,f.useMemo)(()=>{let e=new Set,t=new Set,r=new Set;for(let i of a.currentReferences)"file"===i.type&&i.repoOwner===n?.ownerLogin&&i.repoName===n?.name?e.add(i.path):"folder"===i.type&&i.repoOwner===n?.ownerLogin&&i.repoName===n?.name?t.add(i.path):"symbol"===i.type&&"suggestionSymbol"===i.kind&&i.suggestionDefinitions?.some(e=>e.repoOwner===n?.ownerLogin&&e.repoName===n?.name)&&r.add(i.name);return[e,t,r]},[a.currentReferences,n?.ownerLogin,n?.name]),{selected:h=[],unselected:p=[]}=(0,eJ.O)(s.items,e=>{switch(e.type){case"file":return d.has(e.text)?"selected":"unselected";case"folder":return u.has(e.text)?"selected":"unselected";case"symbol":return m.has(e.text)?"selected":"unselected"}}),g=(0,f.useCallback)(e=>{let t;if(!n)return;switch(e.type){case"file":t=(0,_.Od)(e.text,n);break;case"folder":t=(0,_.OC)(e.text,n);break;case"symbol":{let r=c?.find(t=>(0,_.Sm)(t)===e.text);if(!r)return;t=(0,_.Qt)(r,n)}}let r=(0,_.Vb)(t),o=a.currentReferences.find(e=>r===(0,_.Vb)(e));o?i.removeReference(o):i.addReference(t,"references-menu")},[i,n,a.currentReferences,c]);return{...s,selected:h,unselected:p,toggleSelection:g}}(w,A,T,R),O=P.length+D.length,B=`${T.ownerLogin}/${T.name}`;return v[4]!==b?(a=b?.({}),v[4]=b,v[5]=a):a=v[5],v[6]!==R?(s=(e=>{let t=e.includes("files"),n=e.includes("folders"),r=e.includes("symbols");return t&&n&&r?"Select files, folders, and symbols":t&&n?"Select files and folders":t&&r?"Select files and symbols":n&&r?"Select folders and symbols":t?"Select files":n?"Select folders":r?"Select symbols":"Select references"})(R),v[6]=R,v[7]=s):s=v[7],v[8]!==B||v[9]!==R?(l=((e,t)=>{let n=t.includes("files"),r=t.includes("folders"),a=t.includes("symbols"),i="references";return n&&r&&a?i="files, folders, and symbols":n&&r?i="files and folders":n&&a?i="files and symbols":r&&a?i="folders and symbols":n?i="files":r?i="folders":a&&(i="symbols"),`Choose ${i} from ${e} to chat about. Use fewer references for more accurate responses.`})(B,R),v[8]=B,v[9]=R,v[10]=l):l=v[10],v[11]!==S||v[12]!==j?(c=()=>{(0,eT.flushSync)(()=>S(!1)),j.current?.focus()},v[11]=S,v[12]=j,v[13]=c):c=v[13],v[14]!==I||v[15]!==S?(d=()=>{(0,eT.flushSync)(()=>S(!1)),I.current?.focus()},v[14]=I,v[15]=S,v[16]=d):d=v[16],v[17]===Symbol.for("react.memo_cache_sentinel")?(u=e=>L.current(e.target.value),v[17]=u):u=v[17],v[18]!==F?(h=(0,i.jsx)(eW.X.Header,{children:(0,i.jsx)(eW.X.SearchInput,{loading:F,onChange:u,placeholder:e1,"aria-label":e1})}),v[18]=F,v[19]=h):h=v[19],v[20]!==F||v[21]!==M||v[22]!==P||v[23]!==R||v[24]!==$||v[25]!==O||v[26]!==D?(p=(0,i.jsx)(m.l,{className:eX.ActionList,children:M?(0,i.jsx)(eW.X.Loading,{children:(e=>{let t=e.includes("files"),n=e.includes("folders"),r=e.includes("symbols");return t&&n&&r?"Fetching files, folders, and symbols\u2026":t&&n?"Fetching files and folders\u2026":t&&r?"Fetching files and symbols\u2026":n&&r?"Fetching folders and symbols\u2026":t?"Fetching files\u2026":n?"Fetching folders\u2026":r?"Fetching symbols\u2026":"Fetching references\u2026"})(R)}):0!==O||F?(0,i.jsxs)(i.Fragment,{children:[P.map(e=>(0,i.jsx)(e7,{item:e,selected:!0,toggleSelection:$},e6(e))),P.length>0&&D.length>0&&(0,i.jsx)(m.l.Divider,{}),D.map(e=>(0,i.jsx)(e7,{item:e,selected:!1,toggleSelection:$},e6(e)))]}):(0,i.jsx)("div",{children:(0,i.jsx)(eY.O,{delay:500,children:(0,i.jsx)(eW.X.Message,{variant:"empty",title:(e=>{let t=e.includes("files"),n=e.includes("folders"),r=e.includes("symbols");return t&&n&&r?"No files, folders, or symbols found":t&&n?"No files or folders found":t&&r?"No files or symbols found":n&&r?"No folders or symbols found":t?"No files found":n?"No folders found":r?"No symbols found":"No references found"})(R),children:"Try a different search term"})})})}),v[20]=F,v[21]=M,v[22]=P,v[23]=R,v[24]=$,v[25]=O,v[26]=D,v[27]=p):p=v[27],v[28]!==C||v[29]!==w||v[30]!==h||v[31]!==p||v[32]!==s||v[33]!==l||v[34]!==c||v[35]!==d?(g=(0,i.jsxs)(eW.X,{anchorRef:C,title:s,description:l,onCancel:c,onSubmit:d,open:w,selectionVariant:"multiple",variant:"modal",width:"large",maxHeight:"xlarge",children:[h,p]}),v[28]=C,v[29]=w,v[30]=h,v[31]=p,v[32]=s,v[33]=l,v[34]=c,v[35]=d,v[36]=g):g=v[36],v[37]!==g||v[38]!==a?(y=(0,i.jsxs)("div",{className:eX.selectPanelContainer,children:[a,g]}),v[37]=g,v[38]=a,v[39]=y):y=v[39],y};function e4(e){let t,n,r,a,s,l=(0,o.c)(11),{open:c,setOpen:d,renderAnchor:u}=e;return l[0]!==d?(t=()=>d(!0),n=()=>d(!1),l[0]=d,l[1]=t,l[2]=n):(t=l[1],n=l[2]),l[3]!==u?(r=e=>u?.(e)??(0,i.jsx)(i.Fragment,{}),l[3]=u,l[4]=r):r=l[4],l[5]===Symbol.for("react.memo_cache_sentinel")?(a=(0,i.jsxs)("div",{className:eX.chooseRepoInstructionPanel,children:[(0,i.jsx)(T.PaperclipIcon,{}),(0,i.jsx)("h3",{className:eX.chooseRepoTitle,children:"Attach a repository first"}),(0,i.jsx)("p",{className:eX.chooseRepoSubtitle,children:"To pick attachments, attach a repository where the files are stored."})]}),l[5]=a):a=l[5],l[6]!==c||l[7]!==t||l[8]!==n||l[9]!==r?(s=(0,i.jsx)(eS.T,{open:c,onOpen:t,onClose:n,renderAnchor:r,children:a}),l[6]=c,l[7]=t,l[8]=n,l[9]=r,l[10]=s):s=l[10],s}let e6=e=>`${e.type}#${e.text}`;function e7(e){let t,n,r,a,s,l=(0,o.c)(15),{toggleSelection:c,selected:d,item:u}=e;return l[0]!==u||l[1]!==c?(t=()=>{c(u),setTimeout(()=>{document.getElementById(e6(u))?.focus()})},l[0]=u,l[1]=c,l[2]=t):t=l[2],l[3]!==u?(n=e6(u),l[3]=u,l[4]=n):n=l[4],l[5]!==u.type?(r=(0,i.jsx)(m.l.LeadingVisual,{children:"symbol"===u.type?(0,i.jsx)(T.CodeSquareIcon,{}):"folder"===u.type?(0,i.jsx)(T.FileDirectoryFillIcon,{}):(0,i.jsx)(T.FileIcon,{})}),l[5]=u.type,l[6]=r):r=l[6],l[7]!==u.text?(a=(0,i.jsx)("div",{className:eX.referenceItemText,children:u.text}),l[7]=u.text,l[8]=a):a=l[8],l[9]!==d||l[10]!==t||l[11]!==n||l[12]!==r||l[13]!==a?(s=(0,i.jsxs)(m.l.Item,{onSelect:t,selected:d,id:n,className:eX.referenceListItem,children:[r,a]}),l[9]=d,l[10]=t,l[11]=n,l[12]=r,l[13]=a,l[14]=s):s=l[14],s}function e8(e){return{type:"symbol",text:e}}function e9(e){return{type:"folder",text:e}}function te(e){return{type:"file",text:e}}function tt(e){return(0,_.Sm)(e)}try{(a=e=>{let t,n,r,a,s=(0,o.c)(12);s[0]!==e?({open:n,onOpenChange:t,...r}=e,s[0]=e,s[1]=t,s[2]=n,s[3]=r):(t=s[1],n=s[2],r=s[3]);let{currentTopic:l}=(0,x.Pk)();if(!(0,_.Z6)(l)){let e;return s[4]!==t||s[5]!==n?(e=(0,i.jsx)(e4,{open:n,setOpen:t}),s[4]=t,s[5]=n,s[6]=e):e=s[6],e}return s[7]!==l||s[8]!==t||s[9]!==n||s[10]!==r?(a=(0,i.jsx)(e3,{...r,open:n,onOpenChange:t,sourceRepository:l}),s[7]=l,s[8]=t,s[9]=n,s[10]=r,s[11]=a):a=s[11],a}).displayName||(a.displayName="TopicReferencesSelectPanel")}catch{}try{e2.displayName||(e2.displayName="MultistepReferencesSelectPanel")}catch{}try{e3.displayName||(e3.displayName="ReferencesSelectPanel")}catch{}try{e4.displayName||(e4.displayName="ChooseRepositoryInstruction")}catch{}try{e7.displayName||(e7.displayName="ReferenceListItem")}catch{}function tn(e){return e.currentReferences}function tr(e){return"repository"===e.type}function ta(e){return e.id}let ti=(0,f.memo)(({panel:e,onPanelChange:t,anchorRef:n,initialRepo:r,onRepoSelect:a,...o})=>{let{inputRef:l}=o,c=(0,N.b)(),d=(0,x.Pk)(),h=(0,ei.qw)(),{supportedAttachmentTypes:p,supportedReferenceTypes:g}=function(){let e=(0,x.Pk)(),t=null!==(0,ea.G)(),n=["upload"],r=e.renderKnowledgeBases&&(e.currentTopic&&(0,_.Z6)(e.currentTopic)||!e.currentTopic),a=I.W.knowledgeBasesDisabled;return t||n.push("repositories"),n.push("references"),!r||t||a||n.push("knowledge-bases"),!t&&I.W.spacesAsAttachmentsEnabled&&n.push("copilot-spaces"),t||n.push("agents"),{supportedAttachmentTypes:n,supportedReferenceTypes:t?["files"]:["files","folders","symbols"]}}(),{model:y}=(0,x.bP)("model"),v="immersive"===d.mode&&!!y.capabilities?.supports?.vision,b=(0,eo.kw)(o),C=(0,f.useRef)(null),w=(0,ea.G)(),S=(0,en.FQ)(!0),k=!!(w&&S),[E,L]=(0,f.useState)(!1);return(0,i.jsxs)("div",{children:[p.includes("upload")&&(0,i.jsx)("input",{id:"image-uploader",...(0,A.G)("image-uploader"),hidden:!0,ref:C,type:"file",accept:[v?X.s.getAllowedImageFileExtensions(y):"",et.E.getTextFileExtensions()].join(","),multiple:!0,onChange:e=>{if(!e.target.files)return;let[t,n]=X.s.getAllowedFiles([...e.target.files],y),r=[];for(let e of(v?new X.s(d,c).addImageAttachments(t,"menu",w,k):r.push(...t),n))new et.E(c).addAttachment(e);for(let e of r)(0,s.BI)("dotcom_chat.upload_unsupported_file",{name:e.name,type:e.type,size:e.size});e.currentTarget.value=""}}),(0,i.jsx)(u.W,{anchorRef:n,open:"attachment-types"===e,onOpenChange:e=>t(t=>e&&null===t?"attachment-types":e||"attachment-types"!==t?t:null),children:(0,i.jsx)(u.W.Overlay,{width:"small",side:"outside-bottom",align:"start",portalContainerName:"assistive"===d.mode?eU.E5:void 0,children:(0,i.jsxs)(m.l,{children:[p.includes("repositories")&&(0,i.jsxs)(m.l.Item,{onSelect:()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_REPOSITORIES",mode:d.mode}),t("repositories")},children:[(0,i.jsx)(m.l.LeadingVisual,{children:(0,i.jsx)(T.RepoIcon,{})}),"Repositories\u2026"]}),(0,i.jsxs)(m.l.Item,{onSelect:()=>{I.W.multiFilePickerAttachment?((0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_MULTI_FILE_PICKER",mode:d.mode}),t("multi-file-picker")):((0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_REFERENCES",mode:d.mode}),t("references"))},inactiveText:p.includes("references")?void 0:"First attach a repository",children:[(0,i.jsx)(m.l.LeadingVisual,{children:(0,i.jsx)(T.FileCodeIcon,{})}),(e=>{let t=e.includes("files"),n=e.includes("folders"),r=e.includes("symbols"),a="References";return t&&n&&r?a="Files, folders, and symbols":t&&n?a="Files and folders":t&&r?a="Files and symbols":n&&r?a="Folders and symbols":t?a="Files":n?a="Folders":r&&(a="Symbols"),a})(g),"\u2026"]}),p.includes("knowledge-bases")&&(0,i.jsxs)(m.l.Item,{onSelect:()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_KNOWLEDGE_BASES",mode:d.mode}),t("knowledge-bases")},children:[(0,i.jsx)(m.l.LeadingVisual,{children:(0,i.jsx)(T.BookIcon,{})}),(0,i.jsx)("span",{...(0,A.G)("knowledge-bases-action-list-item"),children:"Knowledge bases\u2026"})]}),p.includes("copilot-spaces")&&(0,i.jsx)(R,{openCreateSpaceDialog:L}),h.map(e=>{let n=e.attachmentMenuContribution;return n?(0,i.jsx)(n.MenuItemComponent,{onSelect:()=>t(n.attachmentType)},e.id):null}),p.includes("upload")&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(m.l.Divider,{}),(0,i.jsxs)(m.l.Item,{onSelect:()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_IMAGES",mode:d.mode}),t(null),C.current?.click()},children:[(0,i.jsx)(m.l.LeadingVisual,{children:(0,i.jsx)(T.UploadIcon,{})}),"Upload from computer"]})]}),p.includes("agents")&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(m.l.Divider,{}),(0,i.jsx)(el,{onSelectPanel:e=>t(e),onSelectAgent:e=>setTimeout(()=>b(e.slug))})]})]})})}),"references"===e&&(0,i.jsx)(e2,{open:!0,onOpenChange:e=>t(e?"references":null),submitReturnFocusRef:l,cancelReturnFocusRef:n,supportedReferenceTypes:g}),"multi-file-picker"===e&&(0,i.jsx)(ev,{isOpen:!0,onClose:()=>t(null),initialRepo:r,onRepoSelect:a}),(0,i.jsx)(e0.FZ,{open:"repositories"===e,onOpenChange:e=>t(e?"repositories":null),submitReturnFocusRef:l,cancelReturnFocusRef:n}),p.includes("knowledge-bases")&&(0,i.jsx)(eA,{disabledForPreviewModelsProps:{anchorRef:n},emptyKnowledgeBaseProps:{anchorRef:n},open:"knowledge-bases"===e,onOpenChange:e=>t(e?"knowledge-bases":null),anchorRef:n}),E&&(0,i.jsx)(j.D,{closeDialog:()=>L(!1)}),"no-agents-available"===e&&(0,i.jsx)(ep,{onClose:()=>t(null),returnFocusRef:n}),"agents-not-supported"===e&&(0,i.jsx)(eg,{onClose:()=>t(null),returnFocusRef:n}),h.map(r=>r.attachmentMenuContribution&&r.attachmentMenuContribution.attachmentType===e?(0,i.jsx)(r.attachmentMenuContribution.PanelComponent,{onSubmit:()=>{t(null),l.current?.focus()},onDismiss:()=>{t(null),n.current?.focus()}},r.id):null)]})});ti.displayName="AttachmentMenu";var to=n(71555);let ts={agents:"Extensions",repositories:"Repositories",files:"Files and folders",issues:"Issues",pulls:"Pull requests",discussions:"Discussions"},tl=[{name:ts.agents,icon:T.AppsIcon,value:"agents",where:"start"},{name:ts.repositories,icon:T.RepoIcon,value:"repositories",where:"anywhere"},{name:ts.files,icon:T.FileIcon,value:"repositories:files",where:"anywhere"},{name:ts.issues,icon:T.IssueOpenedIcon,value:"repositories:issues",where:"anywhere"},{name:ts.pulls,icon:T.GitPullRequestIcon,value:"repositories:pulls",where:"anywhere"},{name:ts.discussions,icon:T.CommentDiscussionIcon,value:"repositories:discussions",where:"anywhere"}],tc={is:e=>tl.some(t=>t.value===e)};function td(e){let t,n,r,a,s,l=(0,o.c)(12);return l[0]!==e?({agent:t,...n}=e,l[0]=e,l[1]=t,l[2]=n):(t=l[1],n=l[2]),l[3]!==t.avatarUrl?(r=(0,i.jsx)(m.l.LeadingVisual,{children:(0,i.jsx)(es.r,{src:t.avatarUrl})}),l[3]=t.avatarUrl,l[4]=r):r=l[4],l[5]!==t.slug?(a=(0,i.jsxs)(m.l.Description,{variant:"inline",truncate:!0,children:[eo.Z3,t.slug]}),l[5]=t.slug,l[6]=a):a=l[6],l[7]!==t.name||l[8]!==n||l[9]!==r||l[10]!==a?(s=(0,i.jsxs)(m.l.Item,{...n,children:[r,t.name,a]}),l[7]=t.name,l[8]=n,l[9]=r,l[10]=a,l[11]=s):s=l[11],s}try{td.displayName||(td.displayName="AgentSuggestion")}catch{}function tu(e){let t,n,r,a,s,l,c,d,u=(0,o.c)(20);u[0]!==e?({leadingVisual:t,...n}=e,u[0]=e,u[1]=t,u[2]=n):(t=u[1],n=u[2]);let h=(0,f.useId)(),p=(0,f.useId)();return u[3]!==p||u[4]!==h?(r=(0,C.$)(h,p),u[3]=p,u[4]=h,u[5]=r):r=u[5],u[6]!==t?(a=void 0!==t&&(0,i.jsx)(m.l.LeadingVisual,{children:t}),u[6]=t,u[7]=a):a=u[7],u[8]!==h||u[9]!==n.children?(s=(0,i.jsx)("span",{id:h,children:n.children}),u[8]=h,u[9]=n.children,u[10]=s):s=u[10],u[11]!==p?(l=(0,i.jsx)("span",{className:"d-none","aria-hidden":!0,id:p,children:"Opens in new tab."}),u[11]=p,u[12]=l):l=u[12],u[13]===Symbol.for("react.memo_cache_sentinel")?(c=(0,i.jsx)(m.l.TrailingVisual,{children:(0,i.jsx)(T.LinkExternalIcon,{})}),u[13]=c):c=u[13],u[14]!==n||u[15]!==r||u[16]!==a||u[17]!==s||u[18]!==l?(d=(0,i.jsxs)(m.l.Item,{...n,"aria-labelledby":r,children:[a,s,l,c]}),u[14]=n,u[15]=r,u[16]=a,u[17]=s,u[18]=l,u[19]=d):d=u[19],d}try{tu.displayName||(tu.displayName="LinkSuggestion")}catch{}function tm(e){return{value:`@${e.slug}`,render:t=>(0,i.jsx)(td,{agent:e,...t})}}function th(e){let t,n,r,a,s,l=(0,o.c)(9);return l[0]!==e?({leadingVisual:t,...n}=e,l[0]=e,l[1]=t,l[2]=n):(t=l[1],n=l[2]),l[3]!==t?(r=void 0!==t&&(0,i.jsx)(m.l.LeadingVisual,{children:t}),l[3]=t,l[4]=r):r=l[4],l[5]===Symbol.for("react.memo_cache_sentinel")?(a=(0,i.jsx)(m.l.TrailingVisual,{children:(0,i.jsx)(T.ArrowRightIcon,{})}),l[5]=a):a=l[5],l[6]!==n||l[7]!==r?(s=(0,i.jsxs)(m.l.Item,{"aria-haspopup":!0,...n,children:[r,n.children,a]}),l[6]=n,l[7]=r,l[8]=s):s=l[8],s}try{th.displayName||(th.displayName="MultistepSuggestion")}catch{}function tp(e){let t,n,r,a,s=(0,o.c)(9);s[0]!==e?({category:n,...t}=e,s[0]=e,s[1]=t,s[2]=n):(t=s[1],n=s[2]);let{name:l,icon:c}=n;return s[3]!==c?(r=(0,i.jsx)(c,{}),s[3]=c,s[4]=r):r=s[4],s[5]!==l||s[6]!==t||s[7]!==r?(a=(0,i.jsx)(th,{leadingVisual:r,...t,children:l}),s[5]=l,s[6]=t,s[7]=r,s[8]=a):a=s[8],a}try{tp.displayName||(tp.displayName="CategorySuggestion")}catch{}let tf={asyncSuggestion:"shared-module__asyncSuggestion--AXibl",stale:"shared-module__stale--R4Im6"};function tg(e){let t,n,r,a,s,l,c,d,u,h,p,f=(0,o.c)(25);f[0]!==e?({discussion:n,stale:a,className:t,...r}=e,f[0]=e,f[1]=t,f[2]=n,f[3]=r,f[4]=a):(t=f[1],n=f[2],r=f[3],a=f[4]);let g=a&&tf.stale;return f[5]!==t||f[6]!==g?(s=(0,C.$)(tf.asyncSuggestion,g,t),f[5]=t,f[6]=g,f[7]=s):s=f[7],f[8]!==n.state?(l="open"===n.state&&(0,i.jsx)(T.CommentDiscussionIcon,{className:"fgColor-open"}),f[8]=n.state,f[9]=l):l=f[9],f[10]!==n.state?(c="closed"===n.state&&(0,i.jsx)(T.DiscussionClosedIcon,{className:"fgColor-muted"}),f[10]=n.state,f[11]=c):c=f[11],f[12]!==l||f[13]!==c?(d=(0,i.jsxs)(m.l.LeadingVisual,{children:[l,c]}),f[12]=l,f[13]=c,f[14]=d):d=f[14],f[15]!==n.title?(u=(0,i.jsx)(ej.A,{title:n.title,maxWidth:350,children:n.title}),f[15]=n.title,f[16]=u):u=f[16],f[17]!==n.number?(h=(0,i.jsxs)(m.l.Description,{children:["#",n.number]}),f[17]=n.number,f[18]=h):h=f[18],f[19]!==r||f[20]!==s||f[21]!==d||f[22]!==u||f[23]!==h?(p=(0,i.jsxs)(m.l.Item,{...r,className:s,children:[d,u,h]}),f[19]=r,f[20]=s,f[21]=d,f[22]=u,f[23]=h,f[24]=p):p=f[24],p}try{tg.displayName||(tg.displayName="DiscussionSuggestion")}catch{}function ty(e){let t,n,r,a,s,l,c,d,u,h,p,f,g,y,x,v=(0,o.c)(35);if(v[0]!==e?({type:s,path:n,stale:a,className:t,...r}=e,v[0]=e,v[1]=t,v[2]=n,v[3]=r,v[4]=a,v[5]=s):(t=v[1],n=v[2],r=v[3],a=v[4],s=v[5]),v[6]!==t||v[7]!==n||v[8]!==r||v[9]!==a||v[10]!==s){let e=n.split("/"),o=e.pop();c=m.l.Item,h=r;let y=a&&tf.stale;v[19]!==t||v[20]!==y?(p=(0,C.$)(tf.asyncSuggestion,y,t),v[19]=t,v[20]=y,v[21]=p):p=v[21],v[22]!==s?(f=(0,i.jsx)(m.l.LeadingVisual,{children:"folder"===s?(0,i.jsx)(T.FileDirectoryFillIcon,{}):(0,i.jsx)(T.FileIcon,{})}),v[22]=s,v[23]=f):f=v[23],g=o,l=m.l.Description,d="inline",u=e.join("/"),v[6]=t,v[7]=n,v[8]=r,v[9]=a,v[10]=s,v[11]=l,v[12]=c,v[13]=d,v[14]=u,v[15]=h,v[16]=p,v[17]=f,v[18]=g}else l=v[11],c=v[12],d=v[13],u=v[14],h=v[15],p=v[16],f=v[17],g=v[18];return v[24]!==l||v[25]!==d||v[26]!==u?(y=(0,i.jsxs)(l,{variant:d,children:[u,"/"]}),v[24]=l,v[25]=d,v[26]=u,v[27]=y):y=v[27],v[28]!==c||v[29]!==h||v[30]!==p||v[31]!==f||v[32]!==g||v[33]!==y?(x=(0,i.jsxs)(c,{...h,className:p,children:[f,g,y]}),v[28]=c,v[29]=h,v[30]=p,v[31]=f,v[32]=g,v[33]=y,v[34]=x):x=v[34],x}try{ty.displayName||(ty.displayName="FileSuggestion")}catch{}function tx(e){let t,n,r,a,s,l,c,d,u,h,p,f,g=(0,o.c)(28);g[0]!==e?({issue:n,stale:a,className:t,...r}=e,g[0]=e,g[1]=t,g[2]=n,g[3]=r,g[4]=a):(t=g[1],n=g[2],r=g[3],a=g[4]);let y=a&&tf.stale;return g[5]!==t||g[6]!==y?(s=(0,C.$)(tf.asyncSuggestion,y,t),g[5]=t,g[6]=y,g[7]=s):s=g[7],g[8]!==n.state?(l="draft"===n.state&&(0,i.jsx)(T.IssueDraftIcon,{className:"fgColor-neutral"}),g[8]=n.state,g[9]=l):l=g[9],g[10]!==n.state?(c="open"===n.state&&(0,i.jsx)(T.IssueOpenedIcon,{className:"fgColor-open"}),g[10]=n.state,g[11]=c):c=g[11],g[12]!==n.state?(d="closed"===n.state&&(0,i.jsx)(T.IssueClosedIcon,{className:"fgColor-done"}),g[12]=n.state,g[13]=d):d=g[13],g[14]!==l||g[15]!==c||g[16]!==d?(u=(0,i.jsxs)(m.l.LeadingVisual,{children:[l,c,d]}),g[14]=l,g[15]=c,g[16]=d,g[17]=u):u=g[17],g[18]!==n.title?(h=(0,i.jsx)(ej.A,{title:n.title,maxWidth:350,children:n.title}),g[18]=n.title,g[19]=h):h=g[19],g[20]!==n.number?(p=(0,i.jsxs)(m.l.Description,{children:["#",n.number]}),g[20]=n.number,g[21]=p):p=g[21],g[22]!==r||g[23]!==s||g[24]!==u||g[25]!==h||g[26]!==p?(f=(0,i.jsxs)(m.l.Item,{...r,className:s,children:[u,h,p]}),g[22]=r,g[23]=s,g[24]=u,g[25]=h,g[26]=p,g[27]=f):f=g[27],f}try{tx.displayName||(tx.displayName="IssueSuggestion")}catch{}function tv(e){let t,n,r,a,s,l,c,d,u,h,p,f,g=(0,o.c)(28);g[0]!==e?({pullRequest:r,stale:a,className:t,...n}=e,g[0]=e,g[1]=t,g[2]=n,g[3]=r,g[4]=a):(t=g[1],n=g[2],r=g[3],a=g[4]);let y=a&&tf.stale;return g[5]!==t||g[6]!==y?(s=(0,C.$)(tf.asyncSuggestion,y,t),g[5]=t,g[6]=y,g[7]=s):s=g[7],g[8]!==r.state?(l="draft"===r.state&&(0,i.jsx)(T.GitPullRequestDraftIcon,{className:"fgColor-neutral"}),g[8]=r.state,g[9]=l):l=g[9],g[10]!==r.state?(c="open"===r.state&&(0,i.jsx)(T.GitPullRequestIcon,{className:"fgColor-open"}),g[10]=r.state,g[11]=c):c=g[11],g[12]!==r.state?(d="closed"===r.state&&(0,i.jsx)(T.GitPullRequestClosedIcon,{className:"fgColor-done"}),g[12]=r.state,g[13]=d):d=g[13],g[14]!==l||g[15]!==c||g[16]!==d?(u=(0,i.jsxs)(m.l.LeadingVisual,{children:[l,c,d]}),g[14]=l,g[15]=c,g[16]=d,g[17]=u):u=g[17],g[18]!==r.title?(h=(0,i.jsx)(ej.A,{title:r.title,maxWidth:350,children:r.title}),g[18]=r.title,g[19]=h):h=g[19],g[20]!==r.number?(p=(0,i.jsxs)(m.l.Description,{children:["#",r.number]}),g[20]=r.number,g[21]=p):p=g[21],g[22]!==n||g[23]!==s||g[24]!==u||g[25]!==h||g[26]!==p?(f=(0,i.jsxs)(m.l.Item,{...n,className:s,children:[u,h,p]}),g[22]=n,g[23]=s,g[24]=u,g[25]=h,g[26]=p,g[27]=f):f=g[27],f}try{tv.displayName||(tv.displayName="PullRequestSuggestion")}catch{}function tb(e){let t,n,r,a,s,l,c,d,u=(0,o.c)(18);u[0]!==e?({repository:a,isMultistep:n,stale:s,className:t,...r}=e,u[0]=e,u[1]=t,u[2]=n,u[3]=r,u[4]=a,u[5]=s):(t=u[1],n=u[2],r=u[3],a=u[4],s=u[5]);let h=s&&tf.stale;u[6]!==t||u[7]!==h?(l=(0,C.$)(tf.asyncSuggestion,h,t),u[6]=t,u[7]=h,u[8]=l):l=u[8];let p=l;u[9]!==a.isInOrganization||u[10]!==a.ownerAvatarUrl?(c=a.ownerAvatarUrl?(0,i.jsx)(es.r,{src:a.ownerAvatarUrl,alt:"",size:16,square:a.isInOrganization}):(0,i.jsx)(T.RepoIcon,{}),u[9]=a.isInOrganization,u[10]=a.ownerAvatarUrl,u[11]=c):c=u[11];let f=c;return u[12]!==f||u[13]!==p||u[14]!==n||u[15]!==r||u[16]!==a.nwo?(d=n?(0,i.jsx)(th,{...r,className:p,leadingVisual:f,children:a.nwo},a.nwo):(0,i.jsxs)(m.l.Item,{...r,className:p,children:[(0,i.jsx)(m.l.LeadingVisual,{children:f}),a.nwo]},a.nwo),u[12]=f,u[13]=p,u[14]=n,u[15]=r,u[16]=a.nwo,u[17]=d):d=u[17],d}try{tb.displayName||(tb.displayName="RepositorySuggestion")}catch{}function t_(e){return{value:null,key:e.value,render:t=>(0,i.jsx)(tp,{category:e,...t})}}function tC(e){return null!==e}function tw(e){let t,n,r=(0,o.c)(3),[a,i]=(0,f.useState)(null);return(null===a&&null!==e||null!==a&&null===e)&&i(e),r[0]!==e?(t=()=>{let t=setTimeout(()=>i(e),200);return()=>clearTimeout(t)},n=[e],r[0]=e,r[1]=t,r[2]=n):(t=r[1],n=r[2]),(0,f.useEffect)(t,n),a}function tS(e){return e}function tj(e){return e}function tN(e){return e}var tI=n(26408);function tT(e){let t,n,r,a,s=(0,o.c)(9);return s[0]!==e?({org:t,...n}=e,s[0]=e,s[1]=t,s[2]=n):(t=s[1],n=s[2]),s[3]!==t.avatarUrl?(r=(0,i.jsx)(es.r,{square:!0,src:t.avatarUrl}),s[3]=t.avatarUrl,s[4]=r):r=s[4],s[5]!==t.login||s[6]!==n||s[7]!==r?(a=(0,i.jsx)(tu,{leadingVisual:r,...n,children:t.login}),s[5]=t.login,s[6]=n,s[7]=r,s[8]=a):a=s[8],a}function tk(e){let t,n,r,a=(0,o.c)(7);return a[0]!==e?({orgs:t,...n}=e,a[0]=e,a[1]=t,a[2]=n):(t=a[1],n=a[2]),a[3]!==t[0]?.login||a[4]!==t.length||a[5]!==n?(r=1===t.length?(0,i.jsxs)(tu,{leadingVisual:(0,i.jsx)(T.ShieldLockIcon,{}),...n,children:["Single sign-on to ",(0,i.jsx)("strong",{children:t[0]?.login})," for more"]}):(0,i.jsx)(th,{leadingVisual:(0,i.jsx)(T.ShieldLockIcon,{}),...n,children:"Single sign-on for more"}),a[3]=t[0]?.login,a[4]=t.length,a[5]=n,a[6]=r):r=a[6],r}try{tT.displayName||(tT.displayName="SSOOrgSuggestion")}catch{}try{tk.displayName||(tk.displayName="SSOPromptSuggestion")}catch{}let tR=e=>`/orgs/${encodeURIComponent(e.login)}/sso?return_to=${encodeURIComponent(location.href)}`;function tA(e){return{value:null,key:`open-link:${tR(e)}`,render:t=>(0,i.jsx)(tT,{org:e,...t})}}let tE=[{triggerChar:"@",insertSpaceOnCommit:!0,keepTriggerCharOnCommit:!1,multiWord:!0}];function tL(e){let t,n,r,a,l,c,d,u,h,p,g=(0,o.c)(25),{children:y,onSelectReference:v,onShowAgentsDialog:b,hideAutocomplete:_}=e,{mode:C}=(0,x.Pk)(),[w,S]=(0,f.useState)(tM);g[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>S(!0),n=[],g[0]=t,g[1]=n):(t=g[0],n=g[1]),(0,f.useEffect)(t,n);let[j,I]=(0,f.useState)(null),{suggestions:k,stale:R}=function(e){let t=(0,o.c)(7),n=function(e){let t,n=(0,o.c)(3),{currentReferences:r}=(0,x.Pk)();e:{let a;if(!e){t=null;break e}if(n[0]!==r||n[1]!==e){let t=e.filter.toLowerCase(),o=e=>e.toLowerCase().includes(t)&&e.toLowerCase()!==t,s=r.map(e=>{let t=B.Q.for(e);switch(t?.type){case void 0:break;case"repository":{let e=`${t.reference.ownerLogin}/${t.reference.name}`;if(!o(e))return null;return{value:B.Q.stringify(t),render:n=>(0,i.jsx)(tb,{repository:{databaseId:t.reference.id,isInOrganization:"Organization"===t.reference.ownerType,name:t.reference.name,nwo:e,ownerLogin:t.reference.ownerLogin},...n})}}case"issue":{let e=t.reference.title??"";if(!o(e))return null;return{value:B.Q.stringify(t),render:n=>(0,i.jsx)(tx,{issue:{number:t.reference.number,state:t.reference.state??"",title:e},...n})}}case"pull-request":{let e=t.reference.title??"";if(!o(e))return null;return{value:B.Q.stringify(t),render:n=>(0,i.jsx)(tv,{pullRequest:{number:t.reference.number,state:t.reference.state??"",title:e},...n})}}case"discussion":{let e=t.reference.title??"";if(!o(e))return null;return{value:B.Q.stringify(t),render:n=>(0,i.jsx)(tg,{discussion:{number:t.reference.number,state:t.reference.state,title:e},...n})}}case"file":{let e=t.reference.path;if(!o(e))return null;return{value:B.Q.stringify(t),render:n=>(0,i.jsx)(ty,{type:"folder"===t.reference.type?"folder":"file",path:e,...n})}}}return null}).filter(tC),l=tl.filter(n=>n.name.toLowerCase().includes(t)&&function(e,t){switch(e){case"start":return 0===t.index;case"anywhere":return!0}}(n.where,e)).map(t_);if(l.length>0){let e=s.at(-1);if(e&&"object"==typeof e){let t=e.render;e.render=e=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t,{...e}),(0,i.jsx)(m.l.Divider,{})]})}}a=s.concat(l),n[0]=r,n[1]=e,n[2]=a}else a=n[2];t=a}return t}(e?.category==="categories"?e:null),r=function(e){let t,n=(0,o.c)(4),{availableAgents:r,loading:a,showLimit:s,disabled:l}=(0,eo.JE)(null!==e);e:{let o;if(l||!e){t=null;break e}if(a&&!r){t="loading";break e}n[0]!==r||n[1]!==e||n[2]!==s?(o=r?.filter(t=>e?.category==="agents"&&t.name.toLowerCase().includes(e.filter.toLowerCase())).map(tm).concat({value:null,key:`open-link:${eo.bn}`,render:e=>(0,i.jsxs)(i.Fragment,{children:[r.length>0&&(0,i.jsx)(m.l.Divider,{}),(0,i.jsx)(tu,{leadingVisual:(0,i.jsx)(T.TelescopeIcon,{}),...e,inactiveText:s?"Start a new conversation to use other extensions.":void 0,children:"Marketplace"})]})})??null,n[0]=r,n[1]=e,n[2]=s,n[3]=o):o=n[3],t=o}return t}(e?.category==="agents"?e:null),a=function(e){let{currentReferences:t}=(0,x.Pk)(),n=tw(e),r=e!==n,{repositories:a,loading:o}=(0,tI.U)(n?.filter??"",null!==n),s=(0,f.useMemo)(()=>new Set(t.filter(e=>"repository"===e.type).map(e=>e.id)),[t]),{ssoOrganizations:l}=(0,x.Pk)();return{suggestions:(0,f.useMemo)(()=>{if(!n)return null;if("initial"===o)return"loading";let e=void 0!==n.nextCategory,t=a.toSorted((e,t)=>s.has(e.databaseId)&&!s.has(t.databaseId)?-1:s.has(t.databaseId)&&!s.has(e.databaseId)?1:0).slice(0,5).map(t=>({value:e?null:B.Q.stringify({type:"repository",repo:t.nwo}),key:t.nwo,render:n=>(0,i.jsx)(tb,{repository:t,isMultistep:e,stale:!!o||r,...n})}))??[];return l.length>0&&t.push({value:null,key:1===l.length?`open-link:${tR(l[0])}`:"sso-orgs",render:e=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(m.l.Divider,{}),(0,i.jsx)(tk,{orgs:l,...e})]})}),t},[a,o,n,s,l,r]),stale:!0===o}}(e?.category==="repositories"?e:null),s=function(e){let t,n,r,a,s,l=(0,o.c)(18),{service:c}=(0,N.b)(),d=tw(e),u=e!==d,m=null!==d,h=d?.repository,p=d?.filter;l[0]!==h||l[1]!==p?(t=["copilot-autocomplete-issues",h,p],l[0]=h,l[1]=p,l[2]=t):t=l[2],l[3]!==d||l[4]!==c?(n=async()=>c.fetchAutocompleteIssues(d.repository,d.filter),l[3]=d,l[4]=c,l[5]=n):n=l[5],l[6]!==m||l[7]!==t||l[8]!==n?(r={enabled:m,queryKey:t,queryFn:n,placeholderData:tj},l[6]=m,l[7]=t,l[8]=n,l[9]=r):r=l[9];let f=(0,eV.I)(r);e:{let e;if(!d){a=null;break e}if(f.isLoading){a="loading";break e}l[10]!==d||l[11]!==u||l[12]!==f.data||l[13]!==f.isPlaceholderData?(e=f.data?.map(e=>({value:B.Q.stringify({type:"issue",repo:d.repository,id:e.number.toString()}),key:e.number.toString(),render:t=>(0,i.jsx)(tx,{...t,issue:e,stale:f.isPlaceholderData||u})}))??null,l[10]=d,l[11]=u,l[12]=f.data,l[13]=f.isPlaceholderData,l[14]=e):e=l[14],a=e}let g=a;return l[15]!==f.isPlaceholderData||l[16]!==g?(s={suggestions:g,stale:f.isPlaceholderData},l[15]=f.isPlaceholderData,l[16]=g,l[17]=s):s=l[17],s}(e?.category==="issues"?e:null),l=function(e){let t,n,r,a,s,l=(0,o.c)(18),{service:c}=(0,N.b)(),d=tw(e),u=e!==d,m=null!==d,h=d?.repository,p=d?.filter;l[0]!==h||l[1]!==p?(t=["copilot-autocomplete-pulls",h,p],l[0]=h,l[1]=p,l[2]=t):t=l[2],l[3]!==d||l[4]!==c?(n=async()=>c.fetchAutocompletePullRequests(d.repository,d.filter),l[3]=d,l[4]=c,l[5]=n):n=l[5],l[6]!==m||l[7]!==t||l[8]!==n?(r={enabled:m,queryKey:t,queryFn:n,placeholderData:tN},l[6]=m,l[7]=t,l[8]=n,l[9]=r):r=l[9];let f=(0,eV.I)(r);e:{let e;if(!d){a=null;break e}if(f.isLoading){a="loading";break e}l[10]!==d||l[11]!==u||l[12]!==f.data||l[13]!==f.isPlaceholderData?(e=f.data?.map(e=>({value:B.Q.stringify({type:"pull-request",repo:d.repository,id:e.number.toString()}),key:e.number.toString(),render:t=>(0,i.jsx)(tv,{...t,pullRequest:e,stale:f.isPlaceholderData||u})}))??null,l[10]=d,l[11]=u,l[12]=f.data,l[13]=f.isPlaceholderData,l[14]=e):e=l[14],a=e}let g=a;return l[15]!==f.isPlaceholderData||l[16]!==g?(s={suggestions:g,stale:f.isPlaceholderData},l[15]=f.isPlaceholderData,l[16]=g,l[17]=s):s=l[17],s}(e?.category==="pulls"?e:null),c=function(e){let t,n,r,a,s,l=(0,o.c)(18),{service:c}=(0,N.b)(),d=tw(e),u=e!==d,m=null!==d,h=d?.repository,p=d?.filter;l[0]!==h||l[1]!==p?(t=["copilot-autocomplete-discussions",h,p],l[0]=h,l[1]=p,l[2]=t):t=l[2],l[3]!==d||l[4]!==c?(n=async()=>c.fetchAutocompleteDiscussions(d.repository,d.filter),l[3]=d,l[4]=c,l[5]=n):n=l[5],l[6]!==m||l[7]!==t||l[8]!==n?(r={enabled:m,queryKey:t,queryFn:n,placeholderData:tS},l[6]=m,l[7]=t,l[8]=n,l[9]=r):r=l[9];let f=(0,eV.I)(r);e:{let e;if(!d){a=null;break e}if(f.isLoading){a="loading";break e}l[10]!==d||l[11]!==f.data||l[12]!==f.isPlaceholderData||l[13]!==u?(e=f.data?.map(e=>({value:B.Q.stringify({type:"discussion",repo:d.repository,id:e.number.toString()}),key:e.number.toString(),render:t=>(0,i.jsx)(tg,{...t,discussion:e,stale:f.isPlaceholderData||u})}))??null,l[10]=d,l[11]=f.data,l[12]=f.isPlaceholderData,l[13]=u,l[14]=e):e=l[14],a=e}let g=a;return l[15]!==f.isPlaceholderData||l[16]!==g?(s={suggestions:g,stale:f.isPlaceholderData},l[15]=f.isPlaceholderData,l[16]=g,l[17]=s):s=l[17],s}(e?.category==="discussions"?e:null),d=function(e){let t,n,r,a,s,l,c,d,u=(0,o.c)(23),m=(0,N.b)(),h=null!==e,p=e?.repository;u[0]!==p?(t=["copilot-repository",p],u[0]=p,u[1]=t):t=u[1],u[2]!==m||u[3]!==e?.repository?(n=async()=>{if(!e?.repository)return null;let t=await m.service.fetchRepo(e?.repository);if(!t.ok)throw Error("Failed to fetch repository");return t.payload},u[2]=m,u[3]=e?.repository,u[4]=n):n=u[4],u[5]!==h||u[6]!==t||u[7]!==n?(r={enabled:h,queryKey:t,queryFn:n,staleTime:3e5},u[5]=h,u[6]=t,u[7]=n,u[8]=r):r=u[8];let f=(0,eV.I)(r),g=eK(f.data??null);g.data?.directories,u[9]!==g.data?.directories?(a=g.data?.directories??[],u[9]=g.data?.directories,u[10]=a):a=u[10],u[11]!==a?(s=new Set(a),u[11]=a,u[12]=s):s=u[12];let y=s;u[13]!==g.data?(l=g.data?(g.data.paths??[]).concat(g.data.directories??[]):null,u[13]=g.data,u[14]=l):l=u[14];let x=eG(l,e?.filter??"");e:{let t;if(!e){c=null;break e}if(f.isLoading||g.isLoading||x.isLoading){c="loading";break e}u[15]!==y||u[16]!==x.data||u[17]!==x.isPlaceholderData||u[18]!==e?(t=[...x.data?.slice(0,5).map(t=>({value:B.Q.stringify({repo:e.repository,type:"file",id:t}),key:t,render:e=>(0,i.jsx)(ty,{...e,path:t,type:y.has(t)?"folder":"file",stale:x.isPlaceholderData})}))??[]],u[15]=y,u[16]=x.data,u[17]=x.isPlaceholderData,u[18]=e,u[19]=t):t=u[19];let n=t;c=n.length>0?n:null}let v=c;return u[20]!==f.isPlaceholderData||u[21]!==v?(d={suggestions:v,stale:f.isPlaceholderData},u[20]=f.isPlaceholderData,u[21]=v,u[22]=d):d=u[22],d}(e?.category==="files"?e:null),u=function(e){let t,n=(0,o.c)(5),{ssoOrganizations:r}=(0,x.Pk)();e:{let a;if(!e){t=null;break e}if(n[0]!==e||n[1]!==r){let t;n[3]!==e?(t=t=>t.login.toLowerCase().includes(e.filter.toLowerCase()),n[3]=e,n[4]=t):t=n[4],a=r.filter(t).slice(0,10).map(tA),n[0]=e,n[1]=r,n[2]=a}else a=n[2];t=a}return t}(e?.category==="sso-orgs"?e:null);switch(e?.category){case void 0:{let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={suggestions:null,stale:!1},t[0]=e):e=t[0],e}case"categories":{let e;return t[1]!==n?(e={suggestions:n,stale:!1},t[1]=n,t[2]=e):e=t[2],e}case"repositories":return a;case"issues":return s;case"agents":{let e;return t[3]!==r?(e={suggestions:r,stale:!1},t[3]=r,t[4]=e):e=t[4],e}case"discussions":return c;case"pulls":return l;case"files":return d;case"sso-orgs":{let e;return t[5]!==u?(e={suggestions:u,stale:!1},t[5]=u,t[6]=e):e=t[6],e}}}(j);if(g[2]!==b||g[3]!==j?(r={query:j,onShowAgentsDialog:b},g[2]=b,g[3]=j,g[4]=r):r=g[4],!function(e){let t,n,r=(0,o.c)(12),{query:a,onShowAgentsDialog:i}=e,s=a?.category==="agents",{availableAgents:l,loading:c,disabled:d}=(0,eo.JE)(s);r[0]!==s||r[1]!==l?.length||r[2]!==d||r[3]!==c||r[4]!==i?(t=()=>{s&&!c&&(d?i("agents-not-supported"):l?.length||i("no-agents-available"))},r[0]=s,r[1]=l?.length,r[2]=d,r[3]=c,r[4]=i,r[5]=t):t=r[5],r[6]!==s||r[7]!==l||r[8]!==d||r[9]!==c||r[10]!==i?(n=[s,c,l,d,i],r[6]=s,r[7]=l,r[8]=d,r[9]=c,r[10]=i,r[11]=n):n=r[11],(0,f.useEffect)(t,n)}(r),!w||_){let e;return g[5]!==y?(e=(0,i.jsx)("div",{children:y}),g[5]=y,g[6]=e):e=g[6],e}g[7]!==C||g[8]!==v||g[9]!==j?(a=e=>{let{suggestion:t}=e,n="string"==typeof t?t:t.value;(0,s.BI)("dotcom_chat.activate",{target:"AUTOCOMPLETE_ITEM_SELECTED",mode:C,suggestion:n});let r=null!==n&&j?.category!=="agents"?B.Q.parse(n):void 0;if(r&&v(r),"object"!=typeof t||null!==t.value)return;let a=/^open-link:(.+)$/.exec(t.key);if(a){I(null),window.open(a[1],"_blank");return}switch(j?.category){case"categories":tc.is(t.key)&&I(function(e){switch(e){case"repositories":return{category:"repositories",filter:""};case"agents":return{category:"agents",filter:""};case"repositories:discussions":return{category:"repositories",filter:"",nextCategory:"discussions"};case"repositories:issues":return{category:"repositories",filter:"",nextCategory:"issues"};case"repositories:pulls":return{category:"repositories",filter:"",nextCategory:"pulls"};case"repositories:files":return{category:"repositories",filter:"",nextCategory:"files"}}}(t.key));break;case"repositories":"sso-orgs"===t.key?I({category:"sso-orgs",filter:""}):j.nextCategory&&I({category:j.nextCategory,filter:"",repository:t.key})}},g[7]=C,g[8]=v,g[9]=j,g[10]=a):a=g[10];let A=a;g[11]===Symbol.for("react.memo_cache_sentinel")?(l=e=>I(t=>t?{...t,filter:e.query}:{category:"categories",filter:e.query,index:(e.target.selectionStart??0)-(e.query.length+e.trigger.triggerChar.length)}),g[11]=l):l=g[11];let E=l;g[12]===Symbol.for("react.memo_cache_sentinel")?(c=()=>I(null),g[12]=c):c=g[12];let L=c;return g[13]!==j?(d=j&&function(e){switch(e.category){case"categories":return null;case"repositories":switch(e.nextCategory){case"discussions":case"issues":case"pulls":case"files":return`${ts[e.nextCategory]} \u{203A}`;default:return"Repositories \u203A"}case"agents":return ts[e.category];case"discussions":case"issues":case"pulls":case"files":return`${ts[e.category]} \u{203A} ${e.repository} \u{203A}`;case"sso-orgs":return"Single sign-on"}}(j)||void 0,g[13]=j,g[14]=d):d=g[14],g[15]!==y||g[16]!==A||g[17]!==k||g[18]!==d?(u=(0,i.jsx)(to.a,{fullWidth:!0,suggestions:k,triggers:tE,tabInsertsSuggestions:!1,onHideSuggestions:L,onShowSuggestions:E,onSelectSuggestion:A,suggestionsPlacement:"above",title:d,asMenu:!0,children:y}),g[15]=y,g[16]=A,g[17]=k,g[18]=d,g[19]=u):u=g[19],g[20]!==R?(h=R&&(0,i.jsx)("span",{role:"status","aria-live":"polite",className:"sr-only",children:"Loading"}),g[20]=R,g[21]=h):h=g[21],g[22]!==u||g[23]!==h?(p=(0,i.jsxs)(i.Fragment,{children:[u,h]}),g[22]=u,g[23]=h,g[24]=p):p=g[24],p}function tM(){return"undefined"!=typeof document}try{tL.displayName||(tL.displayName="ChatInputAutocomplete")}catch{}let tF={container:"ChatInput-module__container--qmP6j",input:"ChatInput-module__input--HalEQ",containerSmall:"ChatInput-module__containerSmall--NfPkF",inputContainer:"ChatInput-module__inputContainer--cpjba",inputPreview:"ChatInput-module__inputPreview--Fdwj0",clicked:"ChatInput-module__clicked--u0igo",attachments:"ChatInput-module__attachments--Fv007",attachmentButton:"ChatInput-module__attachmentButton--qtFf6",toolbar:"ChatInput-module__toolbar--Kv3Gl",toolbarNoModes:"ChatInput-module__toolbarNoModes--KJL2k",extra:"ChatInput-module__extra--oQVm8",CommandIconButton:"ChatInput-module__CommandIconButton--lxm7H",mode:"ChatInput-module__mode--dH9c4",modeButton:"ChatInput-module__modeButton--y5Yp0",modeSelectButton:"ChatInput-module__modeSelectButton--rJ86j",modeSelectorMobile:"ChatInput-module__modeSelectorMobile--ZPCVa",modeSelectorDesktop:"ChatInput-module__modeSelectorDesktop--SifXL",actions:"ChatInput-module__actions--zbM52",actionsMultiple:"ChatInput-module__actionsMultiple--LHDC3",toolbarButtons:"ChatInput-module__toolbarButtons--YDoIY",lighterSegmentedControl:"ChatInput-module__lighterSegmentedControl--uAdMt"};var tP=n(16378),tD=n(6224);let t$=(0,f.forwardRef)(function(e,t){let n,r,a,s=(0,o.c)(8),{text:l}=e;s[0]!==l?(n=(0,tP._)(l),s[0]=l,s[1]=n):n=s[1];let{availableAgents:c}=(0,eo.JE)(n),{currentReferences:d}=(0,x.Pk)(),u=(0,N.b)(),m=(0,$.l)().use(U.U,{references:d,agents:void 0===c?[]:c}).parse(l),h=(0,tP.O)(m),p=(0,f.useRef)(h);(0,f.useEffect)(function(){for(let e of p.current)if(!h.has(e)){let t=d.find(t=>(0,_.Vb)(t)===e);t&&u.removeReference(t)}p.current=h}),s[2]===Symbol.for("react.memo_cache_sentinel")?(r=(0,A.G)("copilot-chat-input-textarea-preview"),s[2]=r):r=s[2];let g=m.children.map(tO);return s[3]!==t||s[4]!==r||s[5]!==tF.inputPreview||s[6]!==g?(a=(0,i.jsx)("div",{id:"copilot-chat-textarea-preview",...r,"aria-hidden":!0,className:tF.inputPreview,ref:t,role:"presentation",children:g}),s[3]=t,s[4]=r,s[5]=tF.inputPreview,s[6]=g,s[7]=a):a=s[7],a});try{t$.displayName||(t$.displayName="ChatInputPreview")}catch{}function tO(e,t){switch(e.type){case"text":return e.value;case"reference-mention":return void 0!==e.data.mentionedReferenceId?(0,i.jsx)("span",{className:tD.A.mention,...(0,A.G)("input-preview-ref"),children:e.value},t):e.value;case"agent-mention":return(0,i.jsx)("span",{className:tD.A.mention,children:e.value},t)}}var tB=n(11683),tU=n(45800),tz=n(7730),tW=n(57448);let tV={container:"ChatInputReferences-module__container--bNybl",attachmentsList:"ChatInputReferences-module__attachmentsList--mEJpJ",scrolledToEnd:"ChatInputReferences-module__scrolledToEnd--DONiv",loading:"ChatInputReferences-module__loading--kAJlw",divider:"ChatInputReferences-module__divider--k8d6S",menuButton:"ChatInputReferences-module__menuButton--IVLqN",functionLoading:"ChatInputReferences-module__functionLoading--Oimop",convertToFileContainer:"ChatInputReferences-module__convertToFileContainer--y1XOU",convertToFileButton:"ChatInputReferences-module__convertToFileButton--hnPn2"};var tq=n(1631),tG=n(15518);let tH=(0,f.memo)(e=>{let t,n,r,a,s,l,c,h,g,y,v,b,w,S,j,I,k,R=(0,o.c)(49),{className:E,isLoading:L,returnFocusRef:M,tokenSize:F,onSelectReference:P,getReferenceVersion:D,showConvertToFileText:$,onConvertToFile:O,onConvertToFileDismiss:B,hideAttachmentsMenu:U,onRemoveReference:z}=e,W=void 0===F?"medium":F,{currentReferences:V}=(0,x.Pk)(),q=(0,N.b)(),H=(0,f.useRef)(null),K=(0,tz.g)(H),[Z,Q]=(0,f.useState)(!1);R[0]!==V?(t=(0,_.rT)(V),R[0]=V,R[1]=t):t=R[1];let J=t,Y=(0,f.useRef)(null);R[2]===Symbol.for("react.memo_cache_sentinel")?(n={containerRef:Y,focusableElementFilter:tZ,bindKeys:tB.z0.ArrowHorizontal|tB.z0.HomeAndEnd,focusInStrategy:"previous",focusOutBehavior:"stop"},R[2]=n):n=R[2],R[3]!==J?(r=[J],R[3]=J,R[4]=r):r=R[4],(0,tU.G)(n,r),R[5]===Symbol.for("react.memo_cache_sentinel")?(a=[],R[5]=a):a=R[5];let X=(0,f.useRef)(a),ee=(e,t)=>{let n=X.current[t+1]??X.current[t-1]??M.current;n?.focus(),z?.(e),q.removeReference(e)};R[6]!==q||R[7]!==M?(s=()=>{setTimeout(()=>M.current?.focus()),q.clearCurrentReferences()},R[6]=q,R[7]=M,R[8]=s):s=R[8];let et=s,en=(0,f.useRef)(J);R[9]!==J?(l=()=>{if(en.current.length<J.length){let e=J.find(e=>!en.current.find(t=>(0,_.x_)(t,e))),t=e?J.indexOf(e):-1;X?.current?.[t]?.scrollIntoView({behavior:"smooth",block:"nearest",inline:"end"})}en.current=J},c=[J],R[9]=J,R[10]=l,R[11]=c):(l=R[10],c=R[11]),(0,G.N)(l,c),R[12]!==B?(h=()=>{B?.()},R[12]=B,R[13]=h):h=R[13];let er=h;R[14]===Symbol.for("react.memo_cache_sentinel")?(g=()=>{Q(tQ)},R[14]=g):g=R[14];let ea=g,ei=function(e,t,n,r){let a,i,s,l,c,d=(0,o.c)(14),[u,m]=(0,f.useState)(!1);d[0]!==r||d[1]!==t?(a=()=>{t.current&&m(t.current.some(e=>{if(!e)return!1;let t=e.querySelector(r);return!!t&&t.scrollWidth>t.clientWidth}))},d[0]=r,d[1]=t,d[2]=a):a=d[2];let h=a;return d[3]!==h||d[4]!==e.length?(i=()=>{if(0===e.length)return void m(!1);let t=requestAnimationFrame(h);return()=>cancelAnimationFrame(t)},d[3]=h,d[4]=e.length,d[5]=i):i=d[5],d[6]!==h||d[7]!==e?(s=[e,h],d[6]=h,d[7]=e,d[8]=s):s=d[8],(0,f.useEffect)(i,s),d[9]!==h||d[10]!==n||d[11]!==e.length?(l=()=>{if(0===e.length||!n.current)return;let t=new ResizeObserver(()=>{h()});return t.observe(n.current),()=>{t.disconnect()}},c=[e.length,h,n],d[9]=h,d[10]=n,d[11]=e.length,d[12]=l,d[13]=c):(l=d[12],c=d[13]),(0,f.useEffect)(l,c),u}(J,X,Y,`.${tG.A.name}`),eo=(0,f.useId)();R[15]!==er||R[16]!==$?(y=e=>{("Delete"===e.key||"Backspace"===e.key)&&(e.preventDefault(),e.stopPropagation(),$&&er())},R[15]=er,R[16]=$,R[17]=y):y=R[17];let es=y;if(0===J.length&&!L&&!$)return null;R[18]!==E?(v=(0,C.$)(E,tV.container),R[18]=E,R[19]=v):v=R[19];let el=K&&tV.scrolledToEnd,ec=L&&tV.loading;R[20]!==el||R[21]!==ec?(b=(0,C.$)(tV.attachmentsList,el,ec),R[20]=el,R[21]=ec,R[22]=b):b=R[22],R[23]!==eo||R[24]!==er||R[25]!==O||R[26]!==es||R[27]!==$||R[28]!==W?(w=$&&(0,i.jsxs)("div",{className:tV.convertToFileContainer,children:[(0,i.jsx)(d.Q,{onClick:O,leadingVisual:T.FileIcon,className:tV.convertToFileButton,"aria-describedby":eo,onKeyDown:es,children:"Convert to file"}),(0,i.jsx)(tq.lh,{size:W,onRemove:er,descriptionId:eo})]}),R[23]=eo,R[24]=er,R[25]=O,R[26]=es,R[27]=$,R[28]=W,R[29]=w):w=R[29];let ed=J.map((e,t)=>"repository"===e.type?(0,i.jsx)(tK,{reference:e,ref:e=>{X.current[t]=e},"data-index":t,size:W,fullWidth:Z,onRemove:()=>ee(e,t),onClick:P,getReferenceVersion:D},(0,_.Vb)(e)):(0,i.jsx)(tq.BR,{reference:e,ref:e=>{X.current[t]=e},"data-index":t,size:W,fullWidth:Z,onRemove:()=>ee(e,t),onClick:P,getReferenceVersion:D},(0,_.Vb)(e)));return R[30]!==L?(S=L&&(0,i.jsxs)("div",{className:tV.functionLoading,...(0,A.G)("loading-indicator"),children:[(0,i.jsx)(p.A,{size:"small"}),"Retrieving\u2026"]}),R[30]=L,R[31]=S):S=R[31],R[32]!==b||R[33]!==w||R[34]!==ed||R[35]!==S?(j=(0,i.jsxs)("div",{className:b,ref:H,children:[w,ed,S]}),R[32]=b,R[33]=w,R[34]=ed,R[35]=S,R[36]=j):j=R[36],R[37]!==ea||R[38]!==ei||R[39]!==U||R[40]!==et||R[41]!==J.length||R[42]!==Z||R[43]!==W?(I=J.length>0&&!U&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:tV.divider}),(0,i.jsxs)(u.W,{children:[(0,i.jsx)(u.W.Anchor,{children:(0,i.jsx)(e_.K,{icon:T.KebabHorizontalIcon,"aria-label":"Attachments options",variant:"invisible",tooltipDirection:"n",className:tV.menuButton,size:W})}),(0,i.jsx)(u.W.Overlay,{width:"small",children:(0,i.jsxs)(m.l,{children:[ei&&(0,i.jsxs)(m.l.Item,{onSelect:ea,children:[(0,i.jsx)(m.l.LeadingVisual,{children:Z?(0,i.jsx)(T.EyeClosedIcon,{}):(0,i.jsx)(T.EyeIcon,{})}),Z?"Hide full attachment names":"Show full attachment names"]}),(0,i.jsxs)(m.l.Item,{onSelect:et,children:[(0,i.jsx)(m.l.LeadingVisual,{children:(0,i.jsx)(T.TrashIcon,{})}),"Remove attachments"]})]})})]})]}),R[37]=ea,R[38]=ei,R[39]=U,R[40]=et,R[41]=J.length,R[42]=Z,R[43]=W,R[44]=I):I=R[44],R[45]!==v||R[46]!==j||R[47]!==I?(k=(0,i.jsxs)("div",{role:"toolbar","aria-label":"Attachments",className:v,ref:Y,children:[j,I]}),R[45]=v,R[46]=j,R[47]=I,R[48]=k):k=R[48],k});tH.displayName="ChatInputReferences";let tK=(0,f.forwardRef)(function(e,t){let n,r,a,s=(0,o.c)(8),l=e.reference,c=(0,x.pn)(tJ),d=`${l.ownerLogin}/${l.name}`,[u,m]=(0,tW.vn)(d),h=(0,f.useRef)(!1),p=u.code===tW.W5.Unindexed||u.docs===tW.W5.Unindexed;return s[0]!==c||s[1]!==p||s[2]!==m?(n=function(){!h.current&&p&&c&&(h.current=!0,m())},r=[c,p,m],s[0]=c,s[1]=p,s[2]=m,s[3]=n,s[4]=r):(n=s[3],r=s[4]),(0,f.useEffect)(n,r),s[5]!==e||s[6]!==t?(a=(0,i.jsx)(tq.BR,{ref:t,...e}),s[5]=e,s[6]=t,s[7]=a):a=s[7],a});try{tK.displayName||(tK.displayName="RepoReferenceToken")}catch{}try{tK.displayName||(tK.displayName="RepoReferenceToken")}catch{}function tZ(e){return!e.hasAttribute("aria-hidden")}function tQ(e){return!e}function tJ(e){return e.model&&!e.model.hasLimitedCapabilities}var tY=n(81829);let tX=()=>{let e,t=(0,o.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("svg",{"aria-label":"Tool",xmlns:"http://www.w3.org/2000/svg",width:"17",height:"16",fill:"none",viewBox:"0 0 17 16",children:(0,i.jsx)("path",{fill:"currentColor",d:"M6.146 2.344A6 6 0 0 1 11.44.679c.659.117 1.087.598 1.21 1.155a1.68 1.68 0 0 1-.47 1.544L10.19 5.371a.25.25 0 0 0-.069.224l.17.89c.02.101.098.18.198.199l.891.17a.25.25 0 0 0 .224-.069l1.994-1.993a1.68 1.68 0 0 1 1.544-.469 1.48 1.48 0 0 1 1.155 1.211 6 6 0 0 1-1.665 5.295 6 6 0 0 1-5.553 1.614c-.182-.041-.312.015-.37.076l-2.24 2.47a.75.75 0 0 1-1.11-1.007l2.249-2.48c.488-.527 1.199-.658 1.797-.524a4.5 4.5 0 0 0 4.166-1.21 4.5 4.5 0 0 0 1.249-3.972l-.003-.008c-.028-.005-.094 0-.159.065l-1.994 1.993c-.41.41-.996.59-1.565.481l-.89-.17a1.75 1.75 0 0 1-1.392-1.39l-.17-.89a1.75 1.75 0 0 1 .482-1.566l1.993-1.993c.065-.065.07-.132.065-.16l-.008-.003a4.5 4.5 0 0 0-3.972 1.25 4.5 4.5 0 0 0-1.21 4.165c.133.599.004 1.31-.522 1.797l-.007.006-2.474 2.244a.75.75 0 0 1-1.008-1.111l2.47-2.24c.061-.058.118-.187.077-.37a6 6 0 0 1 1.614-5.552"})}),t[0]=e):e=t[0],e};try{tX.displayName||(tX.displayName="MCPIcon")}catch{}var t0=n(97793),t1=n(97665),t2=n(99511),t5=n(8125),t3=n(26382);let t4={container:"McpToolsManager-module__container--PHa2N",header:"McpToolsManager-module__header--PXzkx",headerTitle:"McpToolsManager-module__headerTitle--CiuwN",searchInput:"McpToolsManager-module__searchInput--v2pAX",contentArea:"McpToolsManager-module__contentArea--aqxn4",loadingContainer:"McpToolsManager-module__loadingContainer--btAEV",emptyState:"McpToolsManager-module__emptyState--qpgwB",emptyStateTitle:"McpToolsManager-module__emptyStateTitle--PLCEY",emptyStateDescription:"McpToolsManager-module__emptyStateDescription--x7TOI",footer:"McpToolsManager-module__footer--UZmCo",serverName:"McpToolsManager-module__serverName--au45P",toolItem:"McpToolsManager-module__toolItem--Eo5Ka",toolNameContainer:"McpToolsManager-module__toolNameContainer--VKNAW",toolName:"McpToolsManager-module__toolName--EL2OQ",toolDescription:"McpToolsManager-module__toolDescription--nn86Q"},t6=({anchorRef:e,open:t,onOpenChange:n})=>{let[r,a]=(0,f.useState)(!1),[o,s]=(0,f.useState)(""),[l,c]=(0,f.useState)(null),[u,m]=(0,f.useState)(()=>new Set),{service:h}=(0,N.b)(),g=(0,t1.jE)(),{data:y,isPending:x,isError:v}=(0,eV.I)({enabled:t,queryKey:["copilot-chat-mcps"],queryFn:async()=>h.fetchMCPServers(),placeholderData:e=>e}),b=(0,f.useMemo)(()=>y||[],[y]),_=(0,f.useMemo)(()=>b.filter(e=>e.name.toLowerCase().includes(o.toLowerCase())),[b,o]),C=e=>{m(t=>{let n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eS.T,{open:t,onOpen:()=>n(!0),onClose:()=>n(!1),anchorRef:e,side:"outside-bottom",align:"end",renderAnchor:()=>(0,i.jsx)(i.Fragment,{}),width:"medium",children:(0,i.jsxs)("div",{className:t4.container,children:[(0,i.jsxs)("div",{className:t4.header,children:[(0,i.jsx)("div",{className:t4.headerTitle,children:"MCP Servers"}),(0,i.jsx)(t2.A,{placeholder:"Search by provider",value:o,onChange:e=>s(e.target.value),className:t4.searchInput,leadingVisual:T.SearchIcon})]}),(0,i.jsx)("div",{className:t4.contentArea,children:x?(0,i.jsx)("div",{className:t4.loadingContainer,children:(0,i.jsx)(p.A,{})}):v?(0,i.jsxs)(t3.E,{children:[(0,i.jsx)(t3.E.Visual,{children:"\u26A0\uFE0F"}),(0,i.jsx)(t3.E.Heading,{children:"Error loading tools"})]}):0===b.length?(0,i.jsxs)("div",{className:t4.emptyState,children:[(0,i.jsx)(T.ToolsIcon,{size:24}),(0,i.jsx)("div",{className:t4.emptyStateTitle,children:"You don't have any MCP tools configured"}),(0,i.jsx)("div",{className:t4.emptyStateDescription,children:"Add one to connect models to files, APIs, databases, and more."})]}):(0,i.jsx)(t5.G,{"aria-label":"MCP server selection",children:_.map(e=>(0,i.jsxs)(t5.G.Item,{id:e.id,onSelect:()=>(e=>{c(e),C(e)})(e.id),expanded:u.has(e.id),onExpandedChange:()=>C(e.id),current:l===e.id,"aria-selected":l===e.id,children:[(0,i.jsx)("span",{className:t4.serverName,children:e.name}),e.tools&&e.tools.length>0?(0,i.jsx)(t5.G.SubTree,{children:(e=>e.length>0&&"object"==typeof e[0]&&"name"in e[0])(e.tools)?e.tools.map(t=>{let n=`${e.id}-${t.name}`,r=l===n;return(0,i.jsx)(t5.G.Item,{id:n,current:r,"aria-selected":r,onSelect:()=>{!r&&I.W.mcpToolDescriptions?c(n):c(null)},children:I.W.mcpToolDescriptions?(0,i.jsxs)("div",{className:t4.toolItem,children:[(0,i.jsxs)("div",{className:t4.toolNameContainer,children:[r?(0,i.jsx)(T.DashIcon,{size:12}):(0,i.jsx)(T.PlusIcon,{size:12}),(0,i.jsx)("span",{className:t4.toolName,children:t.name})]}),t.description&&r&&(0,i.jsx)("div",{className:t4.toolDescription,children:t.description})]}):t.name},t.name)}):e.tools.map(t=>{let n=`${e.id}-${t}`;return(0,i.jsx)(t5.G.Item,{id:n,onSelect:()=>c(n),current:l===n,"aria-selected":l===n,children:t},t)})}):null]},e.id))})}),(0,i.jsx)("div",{className:t4.footer,children:(0,i.jsx)(d.Q,{variant:"default",leadingVisual:T.PlusIcon,onClick:()=>{a(!0)},block:!0,children:"New tool"})})]})},"mcp-tool-manager"),(0,i.jsx)(t0.O,{isOpen:r,onClose:()=>{a(!1)},onServerAdded:()=>{g.invalidateQueries({queryKey:["copilot-chat-mcps"]})}})]})};try{t6.displayName||(t6.displayName="McpToolsManager")}catch{}let t7=()=>{let e,t=(0,o.c)(2),[n,r]=(0,f.useState)(!1),a=(0,f.useRef)(null);return t[0]!==n?(e=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e_.K,{ref:a,icon:tX,variant:"invisible","aria-label":"MCP tools",onClick:()=>r(!n)}),(0,i.jsx)(t6,{anchorRef:a,open:n,onOpenChange:r})]}),t[0]=n,t[1]=e):e=t[1],e};try{t7.displayName||(t7.displayName="McpToolMenu")}catch{}var t8=n(12970);function t9(){let e,t,n,r=(0,o.c)(9),a=(0,N.b)(),{usePlanningIntent:s,selectedThreadID:l}=(0,x.Pk)(),{activeCopilotSpaceId:u}=(0,b.C)();r[0]!==a||r[1]!==s?(e=()=>a.setUsePlanningIntent(!s),r[0]=a,r[1]=s,r[2]=e):e=r[2];let m=e;if(u){let e;return r[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(c.m,{text:"Planning mode is not available when a Space is selected.",children:(0,i.jsx)(d.Q,{leadingVisual:T.TasklistIcon,inactive:!0,"aria-disabled":!0,children:"Plan"})}),r[3]=e):e=r[3],e}if(l){let e;return r[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(c.m,{text:"Planning mode is enabled and cannot be toggled after the conversation has started.",children:(0,i.jsx)(d.Q,{leadingVisual:T.TasklistIcon,inactive:!0,"aria-disabled":!0,"aria-pressed":!0,children:"Plan"})}),r[4]=e):e=r[4],e}return r[5]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(T.TasklistIcon,{}),r[5]=t):t=r[5],r[6]!==m||r[7]!==s?(n=(0,i.jsx)(S,{icon:t,isSelected:s,onClick:m,children:"Plan"}),r[6]=m,r[7]=s,r[8]=n):n=r[8],n}try{t9.displayName||(t9.displayName="PlanningIntentToggle")}catch{}let ne=["github:cancel","copilot-chat:send-message","copilot-chat:edit-last-message"],nt=e=>{let t,n,r,a,c,d,u,m,h,p,g,y,v,w,S,j,T,k,R,F,K,ea,ei,eo,es,el,ec,ed,eu,em,eh,ep,ef,eg,ey,ex,ev=(0,o.c)(161),eb=(0,x.bP)("defaultRecipient","isWaitingOnAttachment","attachmentProcessingType","isWaitingOnCopilot","messages","mode","model","selectedThreadID","skillOptions","slashCommandLoading","thirdPartyMcpAllowed"),{model:e_}=eb,eC=(0,er.tD)(),ew=(0,N.b)();ev[0]!==ew?(t=ew.maxMessagesReached(),ev[0]=ew,ev[1]=t):t=ev[1];let eS=t,[ej,eN]=(0,f.useState)(null),eI="loading"===eb.slashCommandLoading.state,{safeSetTimeout:eT}=(0,M.A)(),{onSelectReference:ek}=e,eR=(0,f.useRef)(null),eA=(0,f.useRef)(""),eE=(0,f.useRef)(!1),{activeCopilotSpaceId:eL}=(0,b.C)();ev[2]!==e.activeModeName||ev[3]!==e.modes?(n=e.modes.find(t=>t.name===e.activeModeName)||e.modes[0],ev[2]=e.activeModeName,ev[3]=e.modes,ev[4]=n):n=ev[4];let eM=n;ev[5]!==ew||ev[6]!==e.initialReference?(r=()=>{I.W.codingAgentFileReference&&e.initialReference&&ew.addReference(e.initialReference,"page-file-reference")},a=[e.initialReference,ew],ev[5]=ew,ev[6]=e.initialReference,ev[7]=r,ev[8]=a):(r=ev[7],a=ev[8]),(0,f.useEffect)(r,a),ev[9]!==ej||ev[10]!==eb.mode?(c=e=>{eR.current=null,eA.current="",eE.current=!1,ej&&(eN(null),void 0!==e&&e&&(0,s.BI)("dotcom_chat.activate",{target:"CONVERT_TO_FILE_DISMISS",mode:eb.mode}))},ev[9]=ej,ev[10]=eb.mode,ev[11]=c):c=ev[11];let eF=c,eP=eb.isWaitingOnCopilot||eb.isWaitingOnAttachment||eI;ev[12]!==eF||ev[13]!==e.onSubmit||ev[14]!==e.textAreaRef||ev[15]!==eP?(d={isLoading:eP,onSubmit:e.onSubmit,textAreaRef:e.textAreaRef,clearPastedFile:eF},ev[12]=eF,ev[13]=e.onSubmit,ev[14]=e.textAreaRef,ev[15]=eP,ev[16]=d):d=ev[16];let{typingHasStarted:eD,textAreaRef:e$,textareaPreviewRef:eO,textAreaPreviewContainerRef:eB,text:eU,setText:ez,handleSubmit:eW,handleSubmitToNewThread:eV,handleScroll:eq,handleChange:eG,handleStop:eH,handleFocus:eK}=function(e){let t=(0,x.Pk)(),n=(0,N.b)(),{selectedThreadID:r,mode:a,autoSubmit:i,model:o}=t,{clearPastedFile:c,isLoading:d,onSubmit:u}=e,m=H.Jt.getSavedMessage(r),h=H.Jt.getSavedUserMessageOnError(r),{pathname:p}=(0,l.zy)(),[g,y]=(0,l.ok)(),[v,b]=(0,f.useState)(()=>J(t.mode,p,g)??h??m??""),[_,C]=(0,f.useState)(!1),w=(0,f.useRef)(null),S=e.textAreaRef||w,j=(0,f.useRef)(null),T=(0,f.useRef)(null),k=(0,f.useRef)(0),R=(0,f.useRef)(null),A=(0,f.useRef)(()=>{}),E=(0,f.useRef)(!1),L=(0,Q.GF)(t.availableModels),M=(0,f.useRef)(r),F=(0,f.useCallback)(async()=>{t.renderAttachKnowledgeBaseHerePopover&&await n.fetchKnowledgeBases()},[n,t.renderAttachKnowledgeBaseHerePopover]);(0,f.useEffect)(()=>{F()},[F]),(0,f.useEffect)(()=>{if(!I.W.stableConversationView)return void H.Jt.setSavedMessage(r,v);r===M.current?H.Jt.setSavedMessage(r,v):(b(H.Jt.getSavedMessage(r)||""),M.current=r)},[r,v]),(0,G.N)(()=>{let e=0;!function t(){if(!S.current||!T.current||!j.current)return;e++,0===S.current.scrollHeight&&e<10&&setTimeout(t,1),S.current.style.height="0";let n=S.current.scrollHeight,r=Math.min(n,300);j.current.style.height=`${n}px`,S.current.style.height=`${n}px`,T.current.style.height=`${r}px`}()},[v,S,j]);let P=(0,f.useCallback)(()=>{S?.current&&j?.current&&T?.current&&(j.current.scrollTop=S.current.scrollTop,j.current.scrollLeft=S.current.scrollLeft)},[S]),D=(0,f.useMemo)(()=>t.currentReferences.filter(e=>!("isClientOnly"in e)||!e.isClientOnly),[t.currentReferences]),$=(0,f.useCallback)(async e=>{if(C(!1),H.Jt.clearSavedUserMessage(r),H.Jt.clearSavedUserMessageOnError(r),t.defaultRecipient&&!v.includes(`@${t.defaultRecipient}`)&&n.clearDefaultRecipient(),e?.preventDefault(),"assistive"===t.mode&&await Z(v,t,n)){(0,s.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_EXECUTED",mode:t.mode,command:v}),"/new"===v.trim()&&H.Jt.setSavedMessageFast(r,null),b("");return}if(!d){let e=v;if(!e){let[t,r]=n.tryInferMessage(D);if(!t||!r)return;e=r}try{b(""),await u?.(e)}catch(t){if(t instanceof ChatInputValidationError)return void b(e);throw t}}},[d,n,u,r,D,t,v]),O=(0,f.useCallback)(()=>n.sendMessageToNewThread(r,v,D,t.context,L),[n,r,t.context,D,v,L]);(0,f.useEffect)(()=>{(async()=>{let e=J(a,p,g),t=new URLSearchParams(g),n=t.get("model"),r=!n||n===o.id;e&&r&&!E.current&&(t.delete("prompt"),t.delete("model"),(0,s.BI)("dotcom_chat.activate",{target:"COPILOT_PROMPT_LOADED_FROM_URL",mode:"immersive"}),y(t,{replace:!0}),i&&(E.current=!0,await Promise.resolve(),await $()))})()},[p,g,y,a,i,o,$]);let B=(0,f.useCallback)(e=>{C(!0),S?.current&&(b(e.target.value),c?.(),k.current=0,P())},[P,c,S]),U=(0,f.useCallback)(async()=>{await n.stopStreaming(),null!=r&&(n.startThreadReload(),await new Promise(e=>{R.current=setTimeout(()=>e(r),6e3)}),A.current=await n.fetchMessages(r,!0,!0))},[n,r]);return(0,f.useEffect)(()=>{A.current&&(A.current(),A.current=()=>{})},[t.messages]),(0,f.useEffect)(()=>()=>{R.current&&(clearTimeout(R.current),R.current=null),n.cancelThreadReload(),A.current=()=>{}},[n]),{typingHasStarted:_,textAreaRef:S,textareaPreviewRef:j,textAreaPreviewContainerRef:T,text:v,setText:b,handleSubmit:$,handleSubmitToNewThread:O,handleScroll:P,handleChange:B,handleStop:U,handleFocus:e=>{e.currentTarget.selectionStart>0||e.currentTarget.setSelectionRange(e.currentTarget.value.length,e.currentTarget.value.length)}}}(d);ev[17]!==eG||ev[18]!==e$?(u={inputRef:e$,fallbackEventHandler:eG},ev[17]=eG,ev[18]=e$,ev[19]=u):u=ev[19];let eZ=(0,L.H)(u);ev[20]!==eZ||ev[21]!==e.figmaAuthUrl||ev[22]!==e$?(m={figmaAuthUrl:e.figmaAuthUrl,textAreaRef:e$,emitChange:eZ},ev[20]=eZ,ev[21]=e.figmaAuthUrl,ev[22]=e$,ev[23]=m):m=ev[23];let{replaceUrlWithReferenceMention:eQ}=function(e){let t,n,r,a,i,s,l,c,d,u,m,h,p=(0,o.c)(35),{figmaAuthUrl:f,textAreaRef:g,emitChange:y}=e,v=(0,N.b)(),{currentReferences:b}=(0,x.Pk)();p[0]!==y||p[1]!==g?(t=(e,t,n)=>{if(!g.current||e===t)return;let r=n?.[0]??0,a=g.current.value.slice(r,n?.[1]),i=a.indexOf(e);for(;i>-1;){let n=i+e.length;y(t,[i+r,n+r]),i=(a=a.replace(e,t)).indexOf(e)}},p[0]=y,p[1]=g,p[2]=t):t=p[2];let C=t;p[3]!==v?(n=e=>{let{itemUrl:t}=e,n=(0,_.Vc)(t);return v.addReference(n,"url-attacher"),v.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!0,attachmentType:"url-reference"}),n},p[3]=v,p[4]=n):n=p[4],p[5]!==C||p[6]!==v?(r=(e,t,n)=>{let{parsedReferenceMention:r}=t;v.replaceReference(n,e);let a=B.Q.for(e);if(!a)return;let i=B.Q.stringify(r),o=B.Q.stringify(a);i!==o&&C(i,o)},a=(e,t,n)=>{let{itemUrl:r,parsedReferenceMention:a}=t;v.removeReference(n),C(B.Q.stringify(a),r)},p[5]=C,p[6]=v,p[7]=r,p[8]=a):(r=p[7],a=p[8]),p[9]!==v?(i=()=>{v.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!1})},p[9]=v,p[10]=i):i=p[10],p[11]!==n||p[12]!==r||p[13]!==a||p[14]!==i?(s={mutationFn:q,onMutate:n,onSuccess:r,onError:a,onSettled:i},p[11]=n,p[12]=r,p[13]=a,p[14]=i,p[15]=s):s=p[15];let w=(0,P.n)(s);p[16]!==v?(l=e=>{let t=(0,_.Vc)(e);return v.addReference(t,"figma-attacher"),v.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!0,attachmentType:"url-reference"}),t},c=(e,t,n)=>{v.replaceReference(n,e)},p[16]=v,p[17]=l,p[18]=c):(l=p[17],c=p[18]),p[19]!==f||p[20]!==v?(d=(e,t,n)=>{n&&f&&e instanceof W?v.replaceReference(n,{type:"figma",title:"Sign in to Figma",id:`forbidden-${t}`,url:f,thumbnailUrl:"",fullImageUrl:"",authenticationRequired:!0}):v.removeReference(n)},p[19]=f,p[20]=v,p[21]=d):d=p[21],p[22]!==v?(u=()=>{v.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!1})},p[22]=v,p[23]=u):u=p[23],p[24]!==u||p[25]!==l||p[26]!==c||p[27]!==d?(m={mutationFn:V,onMutate:l,onSuccess:c,onError:d,onSettled:u},p[24]=u,p[25]=l,p[26]=c,p[27]=d,p[28]=m):m=p[28];let S=(0,P.n)(m);return p[29]!==b||p[30]!==S||p[31]!==C||p[32]!==w||p[33]!==g?(h={replaceUrlWithReferenceMention:e=>{let t=g.current?.value.slice(...e)??"";if(/\s/.test(t))return t;let n=B.Q.fromUrl(t);n&&(b.every(e=>!B.Q.refersTo(n,e))&&w.mutate({itemUrl:t,parsedReferenceMention:n}),C(t,B.Q.stringify(n),e));let r=z.exec(t);return r&&(S.mutate(t),C(t,r[1],e)),t}},p[29]=b,p[30]=S,p[31]=C,p[32]=w,p[33]=g,p[34]=h):h=p[34],h}(m),{isLoading:eJ,addReferenceForMention:eY,addReferencesForMentions:eX}=function(){let e=(0,N.b)(),{currentReferences:t,mode:n}=(0,x.Pk)(),r=(0,P.n)({mutationFn:async e=>{let t="repository"===e.type?[e.repo]:[e.repo,(e=>{switch(e){case"issue":return"issue";case"pull-request":return"pull_request";case"discussion":return"discussion";case"thread-scoped-file":case"file":return"file"}})(e.type),e.id??""],r=await (0,D.lS)(`/copilot/chat/reference/${t.join("/")}`);if(!r.ok)throw Error(`Failed to fetch reference data (${r.status}: ${r.statusText})`);return(0,s.BI)("dotcom_chat.activate",{target:"REFERENCE_LINK_PASTE",mode:n,linkType:e.type}),await r.json()},onSuccess:t=>e.addReference(t,"chatInput")}),a=e=>{t.every(t=>!B.Q.refersTo(e,t))&&r.mutate(e)};return{isLoading:r.isPending,addReferenceForMention:a,addReferencesForMentions:e=>{let n=(0,$.l)().use(U.U,{references:t,agents:[]}).parse(e),r=0;(0,O.YR)(n,e=>{"reference-mention"===e.type&&void 0===e.data.mentionedReferenceId&&r<20&&(r++,a(e.data.referenceMention))})}}}(),e0=(0,en.FQ)(),e1=eL&&e0,e2=!!(eL&&e0),e5=eI||eJ||eb.isWaitingOnAttachment||!!e.submitDisabled,e3=0===eU.length;ev[24]!==eH||ev[25]!==eb.mode?(h=()=>{(0,s.BI)("dotcom_chat.activate",{target:"CHAT_MESSAGE_STOP",mode:eb.mode}),eH()},ev[24]=eH,ev[25]=eb.mode,ev[26]=h):h=ev[26];let e4=h;ev[27]!==eL||ev[28]!==eF||ev[29]!==eW||ev[30]!==e0||ev[31]!==ew||ev[32]!==ej||ev[33]!==e2||ev[34]!==eb.mode||ev[35]!==eb.selectedThreadID||ev[36]!==e5?(p=async()=>{if(e5)return;let e=eL?`${eL.owner}/${eL.id}`:"";(0,s.BI)("dotcom_chat.activate",{target:"CHAT_MESSAGE_SUBMIT",mode:eb.mode,selectedThreadId:eb.selectedThreadID,copilotSpace:e,fromSpaceUI:e0}),e2&&await ew.selectPendingThread(eL),ej&&eF(!1),eW()},ev[27]=eL,ev[28]=eF,ev[29]=eW,ev[30]=e0,ev[31]=ew,ev[32]=ej,ev[33]=e2,ev[34]=eb.mode,ev[35]=eb.selectedThreadID,ev[36]=e5,ev[37]=p):p=ev[37];let e6=p;ev[38]!==eL||ev[39]!==eV||ev[40]!==ew||ev[41]!==e2||ev[42]!==e5?(g=async()=>{e5||(e2&&await ew.selectPendingThread(eL),eV())},ev[38]=eL,ev[39]=eV,ev[40]=ew,ev[41]=e2,ev[42]=e5,ev[43]=g):g=ev[43];let e7=g;ev[44]!==ew||ev[45]!==eb.messages?(y=()=>{let e=eb.messages.findLast(ni)?.id;e&&ew.startEditingMessage(e)},ev[44]=ew,ev[45]=eb.messages,ev[46]=y):y=ev[46];let e8=y;e:{if(eb.isWaitingOnCopilot){v="Copilot is responding\u2026";break e}if(eb.defaultRecipient){v=void 0;break e}if(eS){v="Message limit reached. To continue chatting with Copilot, start a new conversation.";break e}v=eM.placeholder??"Ask anything"}let e9=v;eb.defaultRecipient&&""===eU&&!eD&&ez(`@${eb.defaultRecipient} `);let te=(0,f.useRef)(null),[tt,tn]=(0,f.useState)(null),[tr,ta]=(0,f.useState)(null);ev[47]!==eb.mode?(w=()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU",mode:eb.mode}),tn(no)},ev[47]=eb.mode,ev[48]=w):w=ev[48];let to=w;ev[49]!==ew||ev[50]!==eb.mode||ev[51]!==eb.skillOptions?.deepCodeSearch?(S=()=>{(0,s.BI)("dotcom_chat.activate",{target:"DEEP_CODESEARCH",mode:eb.mode}),ew.dispatch({type:"SET_DEEP_CODESEARCH",deepCodeSearch:!eb.skillOptions?.deepCodeSearch})},ev[49]=ew,ev[50]=eb.mode,ev[51]=eb.skillOptions?.deepCodeSearch,ev[52]=S):S=ev[52],eb.skillOptions?.deepCodeSearch;let ts=S,tl="immersive"===eb.mode&&!!e_.capabilities?.supports?.vision;ev[53]!==eL||ev[54]!==eC||ev[55]!==ew||ev[56]!==e_||ev[57]!==e2||ev[58]!==e.existingFileNames||ev[59]!==tl?(j=async(t,n,r,a)=>{let i=new X.s(eC(),ew),o=new et.E(ew,e.existingFileNames),s=[];[...t].some(ns)&&!e_.capabilities?.supports?.vision&&(ew.addAmbientError(`The ${e_.displayName} model doesn't support answering questions about images. Select a different model and try again.`),(0,ee.d)("vision_not_supported_for_model",{modelId:e_.id,uploadType:n}));let[l,c]=X.s.getAllowedFiles([...t],e_);if(tl){let e=await i.addImageAttachments(l,n,eL,e2);e&&s.push(...e)}let d=[];for(let e of c)if(await et.E.isAttachable(e)){let t=await o.addAttachment(e,r,a);t&&s.push(t)}else d.push(e.type);return tl&&d.length>0&&(0,ee.d)("included_unsupported_file",{fileTypes:d.join(","),uploadType:n}),s},ev[53]=eL,ev[54]=eC,ev[55]=ew,ev[56]=e_,ev[57]=e2,ev[58]=e.existingFileNames,ev[59]=tl,ev[60]=j):j=ev[60];let tc=j;ev[61]!==eF||ev[62]!==tc||ev[63]!==ej||ev[64]!==ez||ev[65]!==eb.mode||ev[66]!==eU?(T=async()=>{if(!ej)return;let e=[ej],t=await tc(e,"paste",eR.current||void 0,eA.current);if(t.length>0&&t[0]?.type==="thread-scoped-file"){let e=await ej.text();ez(eU.replaceAll(e,`@${t[0].name}`)),eF(!1),(0,s.BI)("dotcom_chat.activate",{target:"CONVERT_TO_FILE_CONVERT",mode:eb.mode})}},ev[61]=eF,ev[62]=tc,ev[63]=ej,ev[64]=ez,ev[65]=eb.mode,ev[66]=eU,ev[67]=T):T=ev[67];let td=T;ev[68]!==eF?(k=()=>{eF(!0)},ev[68]=eF,ev[69]=k):k=ev[69];let tu=k;ev[70]!==ej||ev[71]!==eb.isWaitingOnAttachment||ev[72]!==eb.mode?(R=()=>{!ej||eb.isWaitingOnAttachment||eE.current||(eE.current=!0,(0,s.BI)("dotcom_chat.activate",{target:"CONVERT_TO_FILE_TRIGGER",mode:eb.mode}))},F=[ej,eb.isWaitingOnAttachment,eb.mode],ev[70]=ej,ev[71]=eb.isWaitingOnAttachment,ev[72]=eb.mode,ev[73]=R,ev[74]=F):(R=ev[73],F=ev[74]),(0,f.useEffect)(R,F),ev[75]!==eX||ev[76]!==tc||ev[77]!==ew||ev[78]!==e.existingFileNames||ev[79]!==eQ||ev[80]!==eT||ev[81]!==e$?(K=t=>{let n=t.clipboardData;if(n?.items){let r=[];for(let t=0;t<n.items.length;t++){let a=n.items[t];if(a){if("file"===a.kind){let e=a.getAsFile();e&&r.push(e)}else if("string"===a.kind&&["text","text/plain"].includes(a.type)){let t=n.getData(a.type);if(t.length>1e3&&t.length<=et.E.getAttachmentSizeLimit())eT(()=>{eE.current=!1;let n=new File([t],"",{type:et.x}),r=new et.E(ew,e.existingFileNames);eN(n),eR.current=r.generateFileName(t,n.type).then(e=>eA.current=e)},1);else{eX(t);let e=e$.current?.selectionStart??0;setTimeout(()=>eQ([e,e+t.length]));return}}}}r.length>0&&(t.preventDefault(),tc(r,"paste"))}},ev[75]=eX,ev[76]=tc,ev[77]=ew,ev[78]=e.existingFileNames,ev[79]=eQ,ev[80]=eT,ev[81]=e$,ev[82]=K):K=ev[82];let tm=K;ev[83]!==tc?(ea=e=>{tc(e,"drag")},ev[83]=tc,ev[84]=ea):ea=ev[84];let th=ea,tp=e.isStreaming||eb.isWaitingOnCopilot,tf=tp?e4:void 0,tg=e3?e8:void 0;ev[85]!==to||ev[86]!==e6||ev[87]!==e7||ev[88]!==ts||ev[89]!==tf||ev[90]!==tg?(ei={"github:cancel":tf,"copilot-chat:send-message":e6,"copilot-chat:send-message-new-conversation":e7,"copilot-chat:add-attachment":to,"copilot-chat:edit-last-message":tg,"copilot-chat:deep-codesearch":ts},ev[85]=to,ev[86]=e6,ev[87]=e7,ev[88]=ts,ev[89]=tf,ev[90]=tg,ev[91]=ei):ei=ev[91];let ty=ei,tx="small"===e.size;ev[92]!==e.className||ev[93]!==tx?(eo=(0,C.$)(tF.container,{[tF.containerSmall]:tx},e.className),ev[92]=e.className,ev[93]=tx,ev[94]=eo):eo=ev[94];let tv="small"===e.size?"small":"medium",tb=!!ej&&!eb.isWaitingOnAttachment,t_=!!e.initialReference;ev[95]!==td||ev[96]!==tu||ev[97]!==eJ||ev[98]!==ek||ev[99]!==e.getReferenceVersion||ev[100]!==e.onRemoveReference||ev[101]!==tv||ev[102]!==tb||ev[103]!==t_?(es=(0,i.jsx)(tH,{className:tF.attachments,returnFocusRef:te,tokenSize:tv,isLoading:eJ,onSelectReference:ek,onRemoveReference:e.onRemoveReference,getReferenceVersion:e.getReferenceVersion,showConvertToFileText:tb,onConvertToFile:td,onConvertToFileDismiss:tu,hideAttachmentsMenu:t_}),ev[95]=td,ev[96]=tu,ev[97]=eJ,ev[98]=ek,ev[99]=e.getReferenceVersion,ev[100]=e.onRemoveReference,ev[101]=tv,ev[102]=tb,ev[103]=t_,ev[104]=es):es=ev[104];let tC=!eM.supportsAutocompletion,tw=!e.disableAutoFocus,tS=eM.textAreaAriaLabel||e9,tj=eS||e.disabled;ev[105]===Symbol.for("react.memo_cache_sentinel")?(el=(0,A.G)("copilot-chat-input-textarea"),ev[105]=el):el=ev[105],ev[106]!==eG||ev[107]!==eK||ev[108]!==tm||ev[109]!==eq||ev[110]!==e9||ev[111]!==tw||ev[112]!==tS||ev[113]!==tj||ev[114]!==eU||ev[115]!==e$?(ec=(0,i.jsx)("textarea",{autoFocus:tw,id:Y.wg,className:tF.input,autoComplete:"off",autoCorrect:"off",spellCheck:"false","aria-label":tS,"aria-multiline":"true",onPaste:tm,ref:e$,onScroll:eq,onChange:eG,onFocus:eK,placeholder:e9,value:eU,"data-react-autofocus":!0,disabled:tj,...el}),ev[106]=eG,ev[107]=eK,ev[108]=tm,ev[109]=eq,ev[110]=e9,ev[111]=tw,ev[112]=tS,ev[113]=tj,ev[114]=eU,ev[115]=e$,ev[116]=ec):ec=ev[116],ev[117]!==eY||ev[118]!==tC||ev[119]!==ec?(ed=(0,i.jsx)(tL,{onSelectReference:eY,onShowAgentsDialog:tn,hideAutocomplete:tC,children:ec}),ev[117]=eY,ev[118]=tC,ev[119]=ec,ev[120]=ed):ed=ev[120],ev[121]!==eU||ev[122]!==eO?(eu=(0,i.jsx)(t$,{text:eU,ref:eO}),ev[121]=eU,ev[122]=eO,ev[123]=eu):eu=ev[123],ev[124]!==ed||ev[125]!==eu||ev[126]!==eB?(em=(0,i.jsxs)(E.tL.LimitKeybindingScope,{commandIds:ne,className:tF.inputContainer,ref:eB,children:[ed,eu]}),ev[124]=ed,ev[125]=eu,ev[126]=eB,ev[127]=em):em=ev[127];let tN=e.activeModeName||e.modes[0].name,tI=eb.skillOptions?.deepCodeSearch;return ev[128]!==to||ev[129]!==e.extraToolbar||ev[130]!==e.modes||ev[131]!==e.onNewThreadSelected||ev[132]!==e.showPlanningToggle||ev[133]!==eb.thirdPartyMcpAllowed||ev[134]!==tp||ev[135]!==e5||ev[136]!==tN||ev[137]!==tI?(eh=(0,i.jsx)(nn,{addAttachment:to,activeModeName:tN,attachmentButtonRef:te,deepCodeSearch:tI,modes:e.modes,stoppable:tp,submitDisabled:e5,onNewThreadSelected:e.onNewThreadSelected,thirdPartyMcpAllowed:eb.thirdPartyMcpAllowed,extraToolbar:e.extraToolbar,showPlanningToggle:e.showPlanningToggle}),ev[128]=to,ev[129]=e.extraToolbar,ev[130]=e.modes,ev[131]=e.onNewThreadSelected,ev[132]=e.showPlanningToggle,ev[133]=eb.thirdPartyMcpAllowed,ev[134]=tp,ev[135]=e5,ev[136]=tN,ev[137]=tI,ev[138]=eh):eh=ev[138],ev[139]!==eo||ev[140]!==es||ev[141]!==em||ev[142]!==eh?(ep=(0,i.jsxs)("form",{className:eo,children:[es,em,eh]}),ev[139]=eo,ev[140]=es,ev[141]=em,ev[142]=eh,ev[143]=ep):ep=ev[143],ev[144]!==ty||ev[145]!==ep?(ef=(0,i.jsx)(E.tL,{commands:ty,children:ep}),ev[144]=ty,ev[145]=ep,ev[146]=ef):ef=ev[146],ev[147]!==tt||ev[148]!==eG||ev[149]!==tr||ev[150]!==e$?(eg=(0,i.jsx)(ti,{inputRef:e$,inputOnChange:eG,anchorRef:te,panel:tt,onPanelChange:tn,initialRepo:tr,onRepoSelect:ta}),ev[147]=tt,ev[148]=eG,ev[149]=tr,ev[150]=e$,ev[151]=eg):eg=ev[151],ev[152]!==th||ev[153]!==e1||ev[154]!==eb.attachmentProcessingType||ev[155]!==eb.isWaitingOnAttachment?(ey=!e1&&(0,i.jsx)(tY.A,{onFilesDrop:th,isUploading:eb.isWaitingOnAttachment&&"file-upload"===eb.attachmentProcessingType}),ev[152]=th,ev[153]=e1,ev[154]=eb.attachmentProcessingType,ev[155]=eb.isWaitingOnAttachment,ev[156]=ey):ey=ev[156],ev[157]!==ef||ev[158]!==eg||ev[159]!==ey?(ex=(0,i.jsxs)(i.Fragment,{children:[ef,eg,ey]}),ev[157]=ef,ev[158]=eg,ev[159]=ey,ev[160]=ex):ex=ev[160],ex},nn=(0,f.memo)(e=>{let t=e.modes.find(t=>t.name===e.activeModeName)||e.modes[0],n=!!(e.onNewThreadSelected&&t?.supportsModelSwitching);return(0,i.jsxs)("div",{className:(0,C.$)(tF.toolbar,{[tF.toolbarNoModes]:1===e.modes.length}),children:[e.modes.length>1&&(0,i.jsxs)("div",{className:tF.mode,children:[(0,i.jsx)("div",{className:tF.modeSelectorMobile,children:(0,i.jsxs)(u.W,{children:[(0,i.jsx)(u.W.Button,{className:tF.modeSelectButton,leadingVisual:t?.icon,variant:"invisible",trailingAction:T.TriangleDownIcon,children:t?.name}),(0,i.jsx)(u.W.Overlay,{width:"auto",children:(0,i.jsx)(m.l,{selectionVariant:"single",role:"menu","aria-label":"Item",children:e.modes.map(n=>(0,i.jsxs)(m.l.Item,{selected:t?.name===n.name,onSelect:()=>{e.onClickMode?.(n.name)},children:[(0,i.jsx)(m.l.LeadingVisual,{children:n.icon}),n.name]},n.name))})})]})}),(0,i.jsx)("div",{className:tF.modeSelectorDesktop,children:(0,i.jsx)(F.I,{className:tF.lighterSegmentedControl,"aria-label":"Mode switcher",onChange:t=>{e.modes[t]&&e.onClickMode?.(e.modes[t].name)},children:e.modes.map(t=>(0,i.jsx)(F.I.Button,{className:tF.modeButton,selected:t.name===e.activeModeName,children:t.name},t.name))})})]}),(0,i.jsxs)("div",{className:tF.extra,children:[t?.supportsAttachments&&(0,i.jsx)(d.Q,{ref:e.attachmentButtonRef,leadingVisual:T.PlusIcon,variant:"invisible","aria-label":"Attach",className:tF.attachmentButton,onClick:e.addAttachment,"data-testid":"attachment-menu-button",children:"Attach"}),I.W.showDeepCodeSearchButton&&(0,i.jsx)(E.N5,{commandId:"copilot-chat:deep-codesearch",icon:T.RocketIcon,variant:"invisible",tooltipDirection:"n",className:(0,C.$)({[tF.clicked]:e.deepCodeSearch})}),e.extraToolbar,!I.W.spacesAsAttachmentsEnabled&&t?.supportsSpaces&&(0,i.jsx)(R,{}),I.W.planningAgent&&e.showPlanningToggle&&(0,i.jsx)(t9,{})]}),(0,i.jsxs)("div",{className:(0,C.$)(tF.actions,{[tF.actionsMultiple]:n}),children:[n&&(0,i.jsx)(t8.Yb,{onNewThreadSelected:e.onNewThreadSelected}),(0,i.jsxs)("div",{className:tF.toolbarButtons,children:[I.W.copilotThirdPartyMcp&&t?.supportsMCP&&e.thirdPartyMcpAllowed&&(0,i.jsx)(t7,{}),e.stoppable?(0,i.jsx)(na,{}):(0,i.jsx)(nr,{disabled:e.submitDisabled,label:t?.submitLabel})]})]})]})});function nr(e){let t,n=(0,o.c)(3),{disabled:r,label:a}=e,s=a||"Send now";return n[0]!==r||n[1]!==s?(t=(0,i.jsx)(E.N5,{commandId:"copilot-chat:send-message",variant:"invisible",size:"medium",icon:T.PaperAirplaneIcon,"aria-label":s,disabled:r,tooltipDirection:"n"}),n[0]=r,n[1]=s,n[2]=t):t=n[2],t}function na(){let e,t=(0,o.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(E.N5,{...(0,A.G)("copilot-chat-stop-button"),commandId:"github:cancel",variant:"invisible",size:"medium",icon:T.SquareFillIcon,tooltipDirection:"n",className:tF.CommandIconButton}),t[0]=e):e=t[0],e}nn.displayName="ChatInputToolbar";try{nt.displayName||(nt.displayName="ChatInput")}catch{}try{nr.displayName||(nr.displayName="SubmitButton")}catch{}try{na.displayName||(na.displayName="StopButton")}catch{}function ni(e){return"user"===e.role}function no(e){return"attachment-types"===e?null:"attachment-types"}function ns(e){return e.type.startsWith("image/")}},46665:(e,t,n)=>{n.d(t,{$:()=>s,V:()=>l});var r=n(74848),a=n(21728),i=n(96540);let o=(0,i.createContext)(void 0),s=e=>{let t,n,i=(0,a.c)(5),{message:s,children:l}=e;i[0]!==s?(t={message:s},i[0]=s,i[1]=t):t=i[1];let c=t;return i[2]!==l||i[3]!==c?(n=(0,r.jsx)(o.Provider,{value:c,children:l}),i[2]=l,i[3]=c,i[4]=n):n=i[4],n},l=()=>{let e=(0,i.useContext)(o);if(!e)throw Error("useChatMessage must be used with ChatMessageProvider.");return e};try{o.displayName||(o.displayName="ChatMessageContext")}catch{}try{s.displayName||(s.displayName="ChatMessageProvider")}catch{}},59524:(e,t,n)=>{n.d(t,{Q:()=>c});var r=n(74848),a=n(21728),i=n(38621),o=n(4908),s=n(23398);let l={Details:"ChatMessageMcpToolResultsList-module__Details--ri1It",ToolInputOutputHeading:"ChatMessageMcpToolResultsList-module__ToolInputOutputHeading--tgNpb",ToolInputOutputContents:"ChatMessageMcpToolResultsList-module__ToolInputOutputContents--DB0rS"};function c(e){let t,n,i=(0,a.c)(4),{mcpToolResults:o}=e;return o&&0!==o.length?(i[0]!==o?(t=o.map(d),i[0]=o,i[1]=t):t=i[1],i[2]!==t?(n=(0,r.jsx)("div",{className:"mb-2",children:t}),i[2]=t,i[3]=n):n=i[3],n):null}function d(e){return(0,r.jsx)(u,{result:e},e.toolName)}function u(e){let t,n,c,d,u,m,h,p,f,g,y,x,v,b=(0,a.c)(29),{result:_}=e;b[0]===Symbol.for("react.memo_cache_sentinel")?(t={},b[0]=t):t=b[0];let{getDetailsProps:C,open:w}=(0,o.A)(t),S=_.toolName;return b[1]!==C?(n=C(),b[1]=C,b[2]=n):n=b[2],b[3]!==w?(c=!w&&(0,r.jsx)(i.ChevronRightIcon,{size:16,className:"mr-1 inline-block"}),b[3]=w,b[4]=c):c=b[4],b[5]!==w?(d=w&&(0,r.jsx)(i.ChevronDownIcon,{size:16,className:"mr-1 inline-block"}),b[5]=w,b[6]=d):d=b[6],b[7]===Symbol.for("react.memo_cache_sentinel")?(u=(0,r.jsx)(i.ToolsIcon,{size:16,className:"mr-1 inline-block"}),b[7]=u):u=b[7],b[8]!==_.serverName||b[9]!==_.toolName||b[10]!==c||b[11]!==d?(m=(0,r.jsxs)("summary",{children:[c,d,u,"Called ",_.toolName," from ",_.serverName]}),b[8]=_.serverName,b[9]=_.toolName,b[10]=c,b[11]=d,b[12]=m):m=b[12],b[13]===Symbol.for("react.memo_cache_sentinel")?(h=(0,r.jsx)("h3",{className:l.ToolInputOutputHeading,children:"Input"}),b[13]=h):h=b[13],b[14]!==_.toolArguments?(p=JSON.stringify(_.toolArguments,null,2),b[14]=_.toolArguments,b[15]=p):p=b[15],b[16]!==p?(f=(0,r.jsx)("div",{className:"border rounded p-2 mb-2",children:(0,r.jsx)("span",{className:l.ToolInputOutputContents,children:p})}),b[16]=p,b[17]=f):f=b[17],b[18]===Symbol.for("react.memo_cache_sentinel")?(g=(0,r.jsx)("h3",{className:l.ToolInputOutputHeading,children:"Output"}),b[18]=g):g=b[18],b[19]!==_.toolResponse?(y=JSON.stringify(_.toolResponse,null,2),b[19]=_.toolResponse,b[20]=y):y=b[20],b[21]!==y?(x=(0,r.jsx)("div",{className:"border rounded p-2 mb-2",children:(0,r.jsx)("span",{className:l.ToolInputOutputContents,children:y})}),b[21]=y,b[22]=x):x=b[22],b[23]!==_.toolName||b[24]!==f||b[25]!==x||b[26]!==n||b[27]!==m?(v=(0,r.jsxs)(s.A,{className:l.Details,...n,children:[m,h,f,g,x]},S),b[23]=_.toolName,b[24]=f,b[25]=x,b[26]=n,b[27]=m,b[28]=v):v=b[28],v}try{c.displayName||(c.displayName="ChatMessageMcpToolResultsList")}catch{}try{u.displayName||(u.displayName="McpToolResult")}catch{}},63262:(e,t,n)=>{n.d(t,{A:()=>d,i:()=>c});var r=n(74848),a=n(21728),i=n(71315),o=n(96540),s=n(2635),l=n(7104);let c=e=>{let t,n,c,d,u=(0,a.c)(10),{isLastGroup:m,children:h}=e,{scrollContainerHeight:p,scrollToBottom:f}=(0,l.b)(),{threadHasNewMessages:g,pendingFirstMessage:y}=(0,s.Pk)(),x=m&&(g||y);if(u[0]!==x||u[1]!==f?(t=()=>{x&&f("smooth")},n=[x,f],u[0]=x,u[1]=f,u[2]=t,u[3]=n):(t=u[2],n=u[3]),(0,o.useEffect)(t,n),x)if(i.cg?.CSS?.supports("container-type: size")){let e;u[4]===Symbol.for("react.memo_cache_sentinel")?(e={minHeight:"100cqh"},u[4]=e):e=u[4],d=e}else{let e;u[5]!==p?(e={minHeight:p},u[5]=p,u[6]=e):e=u[6],d=e}return u[7]!==h||u[8]!==d?(c=(0,r.jsx)("div",{style:d,children:h}),u[7]=h,u[8]=d,u[9]=c):c=u[9],c};function d(e){return e.reduce((e,t)=>{let n=e.at(-1);return"assistant"===(n?.at(-1)?.role??"assistant")&&"user"===t.role?e.push([t]):n?.push(t),e},[])}try{c.displayName||(c.displayName="ChatMessagesGroup")}catch{}},88752:(e,t,n)=>{n.d(t,{t:()=>L,s:()=>A});var r,a=n(74848),i=n(38621),o=n(4908),s=n(23398),l=n(5524),c=n(1805),d=n(10095),u=n(34164),m=n(96540),h=n(25641),p=n(35247),f=n(2635),g=n(23967),y=n(69497),x=n(1992),v=n(33592);let b={ActionList_LinkItem:"ChatReference-module__ActionList_LinkItem--gopkk"};var _=n(35673),C=n(1631);function w({reference:e,onClick:t}){let n,r=(0,f.Pk)(),o=(0,v.b)(),s=(0,m.useRef)(null),[c,d]=(0,m.useState)(!1),p=r?.mode??"assistive",{currentReferences:g}=r??{currentReferences:[]},w=(0,m.useMemo)(()=>g.map(e=>(0,h.Vb)(e)),[g]),S=(0,m.useMemo)(()=>(0,h.Vb)(e),[e]),j=(0,m.useMemo)(()=>"repo-instructions"===e.type,[e]),N=(0,m.useMemo)(()=>"org-instructions"===e.type,[e]),I=!j&&!N&&"web-search-result"!==e.type,T=(0,m.useMemo)(()=>j||N||w.includes(S),[j,N,w,S]),k=(0,m.useCallback)(t=>{t.stopPropagation(),T||o.addReference(e,"refMenu")},[o,e,T]),R=(0,h.JP)(e),A=(0,h.Xs)(R),E=(0,C.a_)(e,(0,h.P)(r?.currentTopic));switch(e.type){case"file":case"snippet":{n=`${e.repoName}`;let t=e.path.lastIndexOf("/");-1!==t&&(n=`${n}/${e.path.substring(0,t)}`);break}case"web-search-result":n=new URL(e.url,window.location.origin).hostname.replace(/^www\./,"")}let L=(0,h.z$)(e);return(0,a.jsxs)(l.l.LinkItem,{onClick:n=>{t&&!n.defaultPrevented&&t(e,n)},href:R,rel:"noopener",className:(0,u.$)("reference-action",b.ActionList_LinkItem),target:"immersive"===p||"third-party"===e.type?"_blank":void 0,children:[E&&(0,a.jsx)(l.l.LeadingVisual,{children:(0,a.jsx)(E,{})}),(0,a.jsxs)(y.A,{title:L,maxWidth:"100%",className:"text-semibold",children:[L,n&&(0,a.jsx)("span",{className:"color-fg-muted ml-2",children:n})]}),I&&(0,a.jsx)(l.l.TrailingAction,{onClick:()=>d(!0),icon:i.KebabHorizontalIcon,label:"More reference options",ref:s}),I&&(0,a.jsx)(x.W,{anchorRef:s,open:c,onOpenChange:d,children:(0,a.jsx)(_.UJ,{portalContainerName:_.Dq,children:(0,a.jsxs)(l.l,{children:[A&&("immersive"===p||["third-party","folder","repository","docset"].includes(e.type)?(0,a.jsxs)(l.l.LinkItem,{href:R,rel:"noopener",target:"_blank",children:[(0,a.jsx)(l.l.LeadingVisual,{children:(0,a.jsx)(i.LinkIcon,{})}),"Open"]}):(0,a.jsxs)(l.l.Item,{onSelect:()=>{o.selectReference(e)},children:[(0,a.jsx)(l.l.LeadingVisual,{children:(0,a.jsx)(i.LinkIcon,{})}),"Preview"]})),(0,a.jsxs)(l.l.Item,{onSelect:k,disabled:T,children:[(0,a.jsx)(l.l.LeadingVisual,{children:(0,a.jsx)(i.PaperclipIcon,{})}),"Attach to chat"]})]})})})]})}try{w.displayName||(w.displayName="OutputReference")}catch{}try{(r=Icon).displayName||(r.displayName="Icon")}catch{}let S={referencesContainer:"ChatReferences-module__referencesContainer--qLjdy",referencesListImmersiveContainer:"ChatReferences-module__referencesListImmersiveContainer--gM5wy",title:"ChatReferences-module__title--d18y3",assistiveTitle:"ChatReferences-module__assistiveTitle--Ojcrs",referencesDetails:"ChatReferences-module__referencesDetails--Ypv2c",referenceTokensOuterContainer:"ChatReferences-module__referenceTokensOuterContainer--OV840",referenceTokensContainer:"ChatReferences-module__referenceTokensContainer--nhf9A",chatMessageReferenceListFooter:"ChatReferences-module__chatMessageReferenceListFooter--WgJAa",chevronDownIcon:"ChatReferences-module__chevronDownIcon--Fv9mJ",chevronUpIcon:"ChatReferences-module__chevronUpIcon--OPX7R",ActionList:"ChatReferences-module__ActionList--ACk2F"};var j=n(21728),N=n(69726);let I={referenceToken:"FigmaChatReference-module__referenceToken--PONuv",name:"FigmaChatReference-module__name--XjBR8",content:"FigmaChatReference-module__content--Mpcb0",thumbnail:"FigmaChatReference-module__thumbnail--mm7QC",thumbnailHidden:"FigmaChatReference-module__thumbnailHidden--pv7wD",thumbnailOuter:"FigmaChatReference-module__thumbnailOuter--oMFvD",thumbnailLoading:"FigmaChatReference-module__thumbnailLoading--cQ2Uf",figmaIconOuter:"FigmaChatReference-module__figmaIconOuter--KtveL",figmaIcon:"FigmaChatReference-module__figmaIcon--kEY45"};var T=n(89237);let k=(0,m.forwardRef)(function(e,t){let n,r,i,o,s,l,c,d,p,f,g=(0,j.c)(23);g[0]!==e?({reference:n,...r}=e,g[0]=e,g[1]=n,g[2]=r):(n=g[1],r=g[2]);let[y,x]=(0,m.useState)(!0);return g[3]!==n?(i=(0,h.JP)(n),g[3]=n,g[4]=i):i=g[4],g[5]===Symbol.for("react.memo_cache_sentinel")?(o=(0,u.$)(I.referenceToken),g[5]=o):o=g[5],g[6]!==n.thumbnailUrl||g[7]!==n.title||g[8]!==y?(s=n.thumbnailUrl&&(0,a.jsxs)(a.Fragment,{children:[y&&(0,a.jsx)("span",{className:I.thumbnailLoading,children:(0,a.jsx)(N.A,{size:"medium"})}),(0,a.jsx)("img",{className:(0,u.$)(I.thumbnail,{[I.thumbnailHidden]:y}),src:n.thumbnailUrl,alt:`preview thumbnail for ${n.title}`,onLoad:()=>x(!1)})]}),g[6]=n.thumbnailUrl,g[7]=n.title,g[8]=y,g[9]=s):s=g[9],g[10]!==s?(l=(0,a.jsx)("span",{className:I.thumbnailOuter,children:s}),g[10]=s,g[11]=l):l=g[11],g[12]===Symbol.for("react.memo_cache_sentinel")?(c=(0,a.jsx)("div",{className:I.figmaIconOuter,children:(0,a.jsx)(T._,{className:I.figmaIcon})}),g[12]=c):c=g[12],g[13]!==n?(d=(0,h.z$)(n),g[13]=n,g[14]=d):d=g[14],g[15]!==d?(p=(0,a.jsxs)("span",{className:I.content,children:[c,(0,a.jsx)("span",{className:I.name,children:d})]}),g[15]=d,g[16]=p):p=g[16],g[17]!==t||g[18]!==r||g[19]!==i||g[20]!==l||g[21]!==p?(f=(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("a",{href:i,className:o,ref:t,target:"_blank",rel:"noreferrer",...r,children:[l,p]})}),g[17]=t,g[18]=r,g[19]=i,g[20]=l,g[21]=p,g[22]=f):f=g[22],f});try{k.displayName||(k.displayName="FigmaChatReference")}catch{}var R=n(95896);function A({references:e,onToggle:t,onClick:n,isImmersive:r,className:p}){let g=(0,f.Pk)(),y=(0,m.useMemo)(()=>(0,h.rT)(e),[e]),{getDetailsProps:x}=(0,o.A)({}),v=(0,m.useMemo)(()=>(0,h.P)(g?.currentTopic)&&y.every(E),[g?.currentTopic,y]),b=(0,m.useMemo)(()=>y.some(e=>"web-search-result"===e.type),[y]);if(0===y.length)return null;let _=v&&g?.currentTopic?.name?`Search results from ${g.currentTopic.name}`:`${y.length} ${1===y.length?"reference":"references"}`;return(0,a.jsxs)(s.A,{...x(),onToggle:t,className:(0,u.$)(p,S.referencesDetails),children:[(0,a.jsxs)("summary",{className:(0,u.$)(S.referencesContainer),children:[(0,a.jsx)("span",{className:(0,u.$)(S.title,r?"":S.assistiveTitle),children:_}),(0,a.jsx)(d.A,{icon:i.ChevronDownIcon,className:(0,u.$)("references-chevron-down",S.chevronDownIcon)}),(0,a.jsx)(d.A,{icon:i.ChevronUpIcon,className:(0,u.$)("references-chevron-up",S.chevronUpIcon)})]}),(0,a.jsxs)(l.l,{className:(0,u.$)(r&&S.referencesListImmersiveContainer,S.ActionList),children:[y.map(e=>(0,a.jsx)(w,{reference:e,onClick:n},(0,h.Vb)(e))),b&&(0,a.jsxs)("div",{className:S.chatMessageReferenceListFooter,children:["Copilot used the"," ",(0,a.jsx)(c.A,{inline:!0,href:"https://gh.io/azure-ai-agent-with-bing-grounding",target:"_blank",rel:"noopener noreferrer",children:"Bing Search"})," ","tool."," ",(0,a.jsx)(c.A,{inline:!0,href:"https://privacy.microsoft.com/privacystatement",rel:"nofollow",target:"_blank",children:"Microsoft Privacy Statement"})]})]})]})}function E(e){return"snippet"===e.type&&!!e.languageName&&g.Yr.has(e.languageName)}function L({references:e,message:t,className:n,size:r,onClickReference:i,getReferenceVersion:o}){let{bigReferences:s,smallReferences:l}=(0,m.useMemo)(()=>(function(e){let t=(0,h.rT)(e),n=[],r=[];for(let e of t)M.has(e.type)?n.push(e):r.push(e);return{bigReferences:n,smallReferences:r}})(e),[e]),c=e=>"figma"===e.type&&p.W.immersiveFigmaIntegration?(0,a.jsx)(k,{reference:e,onClick:t=>i?.(e,t)},(0,h.Vb)(e)):(0,a.jsx)(C.BR,{message:t,reference:e,size:r,onClick:(t,n)=>i?.(e,n),getReferenceVersion:o},(0,h.Vb)(e));return(0,a.jsxs)(R.M,{"aria-label":"Attachments",className:(0,u.$)(S.referenceTokensOuterContainer,n),children:[s.map(c),(0,a.jsx)("div",{className:S.referenceTokensContainer,children:l.map(c)})]})}let M=new Set(["figma","image"]);try{A.displayName||(A.displayName="ChatMessageReferencesList")}catch{}try{L.displayName||(L.displayName="ChatMessageReferenceTokens")}catch{}try{M.displayName||(M.displayName="BIG_REFERENCE_TYPES")}catch{}},7104:(e,t,n)=>{n.d(t,{$:()=>d,b:()=>u});var r=n(74848),a=n(21728),i=n(36523),o=n(34164),s=n(96540);let l={container:"ChatScrollContainer-module__container--z_iNX"},c=(0,s.createContext)(null);function d(e){let t,n,d,u,m,h,p,f,g,y=(0,a.c)(22),{children:x,disabled:v,containerRef:b,..._}=e,C=(0,i.L)(b),w=(0,s.useRef)(null),[S,j]=(0,s.useState)(!1);y[0]!==C?(t=()=>{let e=new IntersectionObserver(e=>{let[t]=e;return j(!t?.isIntersecting)},{root:C.current,threshold:0,rootMargin:"50px"});return e.observe(w.current),()=>e.disconnect()},n=[C],y[0]=C,y[1]=t,y[2]=n):(t=y[1],n=y[2]),(0,s.useEffect)(t,n);let[N,I]=(0,s.useState)();y[3]!==C?(d=()=>{let e=()=>{if(!C.current)return;let e=getComputedStyle(C.current);I(`calc(${C.current.clientHeight}px - ${e.paddingTop} - ${e.paddingBottom})`)},t=new ResizeObserver(e);return e(),t.observe(C.current),()=>t.disconnect()},u=[C],y[3]=C,y[4]=d,y[5]=u):(d=y[4],u=y[5]),(0,s.useEffect)(d,u),y[6]!==v?(m=e=>{v||w.current?.scrollIntoView({behavior:e,block:"end"})},y[6]=v,y[7]=m):m=y[7];let T=m;y[8]!==S||y[9]!==N||y[10]!==T?(h={isScrolledUp:S,scrollToBottom:T,scrollContainerHeight:N},y[8]=S,y[9]=N,y[10]=T,y[11]=h):h=y[11];let k=h,R=(0,o.$)(l.container,_.className);return y[12]===Symbol.for("react.memo_cache_sentinel")?(p=(0,r.jsx)("div",{ref:w,style:{height:"1px",marginTop:"-1px"}}),y[12]=p):p=y[12],y[13]!==x||y[14]!==C||y[15]!==_||y[16]!==R?(f=(0,r.jsxs)("div",{ref:C,..._,className:R,children:[x,p]}),y[13]=x,y[14]=C,y[15]=_,y[16]=R,y[17]=f):f=y[17],y[18]!==k||y[19]!==f||y[20]!==c.Provider?(g=(0,r.jsx)(c.Provider,{value:k,children:f}),y[18]=k,y[19]=f,y[20]=c.Provider,y[21]=g):g=y[21],g}let u=()=>{let e=(0,s.useContext)(c);if(!e)throw Error("useChatScroll may only be called in a descendant of ChatScrollContainer");return e};try{c.displayName||(c.displayName="ChatScrollContext")}catch{}try{d.displayName||(d.displayName="ChatScrollContainer")}catch{}},32744:(e,t,n)=>{n.d(t,{m:()=>u});var r=n(74848),a=n(21728),i=n(81960),o=n(21373),s=n(34164),l=n(96540),c=n(2635);let d={ConfirmationContainer:"Confirmation-module__ConfirmationContainer--LWT81",confirmationTitle:"Confirmation-module__confirmationTitle--e5Xlk",confirmationMessage:"Confirmation-module__confirmationMessage--APY8y",actionButtonsContainer:"Confirmation-module__actionButtonsContainer--MdVl0"};function u(e){let t,n,u,h,p,f,g,y=(0,a.c)(22),{confirmation:x,handleConfirmation:v,isLatestMessage:b}=e,_=(0,c.Pk)();if(y[0]!==x.confirmation||y[1]!==_.allClientConfirmations){let e=JSON.stringify(Object.values(x.confirmation).sort());t=_.allClientConfirmations?.includes(e),y[0]=x.confirmation,y[1]=_.allClientConfirmations,y[2]=t}else t=y[2];let C=t,{isWaitingOnCopilot:w,currentUserLogin:S}=_,[j,N]=(0,l.useState)(C&&!b);y[3]!==x.confirmation||y[4]!==x.onSubmit||y[5]!==x.title||y[6]!==S||y[7]!==v?(n=e=>{N(!0),v({state:e,userLogin:S,confirmation:x.confirmation},x.title,x.onSubmit)},y[3]=x.confirmation,y[4]=x.onSubmit,y[5]=x.title,y[6]=S,y[7]=v,y[8]=n):n=y[8];let I=n;return y[9]===Symbol.for("react.memo_cache_sentinel")?(u=(0,s.$)("border rounded-2",d.ConfirmationContainer),y[9]=u):u=y[9],y[10]!==x.title?(h=(0,r.jsx)(i.A,{as:"h3",className:d.confirmationTitle,children:x.title}),y[10]=x.title,y[11]=h):h=y[11],y[12]!==x.message?(p=x.message.split(`
`).map(m),y[12]=x.message,y[13]=p):p=y[13],y[14]!==j||y[15]!==I||y[16]!==w?(f=!j&&(0,r.jsxs)("div",{className:d.actionButtonsContainer,children:[(0,r.jsx)(o.Q,{disabled:w,variant:"primary",onClick:()=>I("accepted"),children:"Allow"}),(0,r.jsx)(o.Q,{disabled:w,onClick:()=>I("dismissed"),children:"Dismiss"})]}),y[14]=j,y[15]=I,y[16]=w,y[17]=f):f=y[17],y[18]!==h||y[19]!==p||y[20]!==f?(g=(0,r.jsxs)("div",{className:u,children:[h,p,f]}),y[18]=h,y[19]=p,y[20]=f,y[21]=g):g=y[21],g}function m(e){return(0,r.jsx)("p",{className:d.confirmationMessage,children:e},e)}try{u.displayName||(u.displayName="Confirmation")}catch{}},82178:(e,t,n)=>{n.d(t,{W:()=>h});var r=n(74848),a=n(21728),i=n(74807),o=n(34164),s=n(96540);let l={copilotBadge:"CopilotBadgeV2-module__copilotBadge--w1X6Q",loading:"CopilotBadgeV2-module__loading--qeW04",animation:"CopilotBadgeV2-module__animation--ttRRT",assistive:"CopilotBadgeV2-module__assistive--YGoYv",clickableAnimationWrapper:"CopilotBadgeV2-module__clickableAnimationWrapper--i45z5"},c=[i.L.Tickle,i.L.Celebrate,i.L.JumpWiggle],d=["yes","absolutely","certainly","sure","definitely","right","correct","indeed","precisely","exactly","true","affirmative","agree","agreed"],u=["no","never","negative","wrong","false","untrue","cannot","can't","sorry","incorrect","deny","disagree","refuse","unfortunately"];function m(e){let t=new Date(e);return(new Date().getTime()-t.getTime())/1e3/60<.5}function h(e){let t,n,h,f,g,y,x,v,b,_,C=(0,a.c)(37),{isFirstMessage:w,isLoading:S,isLoadingSkills:j,isError:N,className:I,mode:T,message:k,createdAt:R}=e,A=void 0!==w&&w;C[0]!==R||C[1]!==A?(t=()=>({animationType:A&&(!R||m(R))?i.L.Celebrate:i.L.Static,onFinish:i.L.Static,loopAnimation:!1,hasLoadedMessage:!1}),C[0]=R,C[1]=A,C[2]=t):t=C[2];let[E,L]=(0,s.useState)(t);C[3]!==R||C[4]!==N||C[5]!==S||C[6]!==j||C[7]!==k?(n=()=>{m(R)&&L(e=>(function({previousState:e,isLoadingSkills:t,isAffirmativeSentiment:n,isNegativeSentiment:r,isError:a,isLoading:o}){switch(e.animationType){case i.L.Static:if((n||r)&&!a&&!e.hasLoadedMessage)return{animationType:n?i.L.Affirmative:i.L.Negative,onFinish:i.L.Static,loopAnimation:!1,hasLoadedMessage:!0};if(t)return{...e,animationType:i.L.Thinking,loopAnimation:!0};if(!o&&!e.hasLoadedMessage&&!a)return{animationType:i.L.Confirm,onFinish:i.L.Static,loopAnimation:!1,hasLoadedMessage:!0};if(a&&!e.hasLoadedMessage)return{animationType:i.L.Negative,onFinish:i.L.Static,loopAnimation:!1,hasLoadedMessage:!0};return e;case i.L.Thinking:if(!t)return{...e,animationType:a?i.L.Negative:i.L.Static,loopAnimation:!1};return e;default:return e}})({previousState:e,isLoadingSkills:j||!1,isError:N||!1,isLoading:S||!1,isAffirmativeSentiment:function(e){if(e.length<200){let t=e.toLowerCase().split(/\W+/).filter(Boolean);return d.some(e=>t.includes(e.toLowerCase()))}return!1}(k),isNegativeSentiment:function(e){if(e.length<200){let t=e.toLowerCase().split(/\W+/).filter(Boolean);return u.some(e=>t.includes(e.toLowerCase()))}return!1}(k)}))},C[3]=R,C[4]=N,C[5]=S,C[6]=j,C[7]=k,C[8]=n):n=C[8],C[9]!==E.animationType||C[10]!==E.hasLoadedMessage||C[11]!==R||C[12]!==N||C[13]!==A||C[14]!==S||C[15]!==j||C[16]!==k?(h=[j,N,S,E.animationType,E.hasLoadedMessage,A,k,R],C[9]=E.animationType,C[10]=E.hasLoadedMessage,C[11]=R,C[12]=N,C[13]=A,C[14]=S,C[15]=j,C[16]=k,C[17]=h):h=C[17],(0,s.useEffect)(n,h),C[18]!==E||C[19]!==S?(f=()=>{S||L({...E,animationType:c[Math.floor(Math.random()*c.length)],onFinish:i.L.Static,loopAnimation:!1})},C[18]=E,C[19]=S,C[20]=f):f=C[20];let M=f,F=S&&l.loading;C[21]!==I||C[22]!==F?(g=(0,o.$)(l.copilotBadge,F,I),C[21]=I,C[22]=F,C[23]=g):g=C[23];let P=E.animationType;C[24]===Symbol.for("react.memo_cache_sentinel")?(y=()=>L(p),C[24]=y):y=C[24];let D=E.loopAnimation,$="assistive"===T&&l.assistive;return C[25]!==$?(x=(0,o.$)(l.animation,$),C[25]=$,C[26]=x):x=C[26],C[27]!==E.animationType||C[28]!==E.loopAnimation||C[29]!==x?(v=(0,r.jsx)(i.N,{animationType:P,onAnimationEnd:y,loopAnimation:D,className:x}),C[27]=E.animationType,C[28]=E.loopAnimation,C[29]=x,C[30]=v):v=C[30],C[31]!==M||C[32]!==v?(b=(0,r.jsx)("div",{onClick:M,className:l.clickableAnimationWrapper,children:v}),C[31]=M,C[32]=v,C[33]=b):b=C[33],C[34]!==b||C[35]!==g?(_=(0,r.jsx)("div",{className:g,"aria-label":"Copilot badge",role:"img",children:b}),C[34]=b,C[35]=g,C[36]=_):_=C[36],_}function p(e){return{...e,animationType:e.onFinish}}try{h.displayName||(h.displayName="CopilotBadge")}catch{}},94517:(e,t,n)=>{n.d(t,{h:()=>w,K:()=>_});var r=n(74848),a=n(21728),i=n(4817),o=n(38621),s=n(1805),l=n(21998),c=n(62227);function d({error:e,className:t}){let n=e.identifier||"",a=n.split("url=")[1]||"",i=n.match(/\/([^/]+)\/sso/),d=i&&i[1]||"";return d&&a?(0,r.jsx)("div",{className:t,"data-testid":"sso-banner",children:(0,r.jsx)("div",{className:c.A.Box,children:(0,r.jsx)("section",{"aria-label":"Single sign-on information",children:(0,r.jsx)(l.Hx,{sx:{borderRadius:2,borderWidth:1},className:c.A.Flash,children:(0,r.jsxs)("div",{children:[(0,r.jsx)(o.ShieldLockIcon,{}),(0,r.jsx)(s.A,{inline:!0,href:function({authorizeUrl:e}){let t=new URL(e,window.location.origin);return t.searchParams.set("return_to",window.location.toString()),t.toString()}({authorizeUrl:a}),children:"Single sign-on"})," ","to see results in the ",(0,r.jsx)("b",{children:d})," organization."]})})})})}):null}try{d.displayName||(d.displayName="SSOBannerFromError")}catch{}var u=n(29731),m=n(97949),h=n(26108),p=n(21373),f=n(34164),g=n(96540),y=n(25641),x=n(17285),v=n(77939),b=n(46665);function _(e){let t=(0,a.c)(8),{manager:n}=e,{message:i}=(0,b.V)(),{error:o}=i;if(!o)return null;switch(o.type){case"agentUnauthorized":{let e;return t[0]!==o||t[1]!==n?(e=(0,r.jsx)(C,{error:o,manager:n}),t[0]=o,t[1]=n,t[2]=e):e=t[2],e}case"agentRequest":{let e;return t[3]!==o.details?(e=(0,r.jsx)(w,{errors:[o.details]}),t[3]=o.details,t[4]=e):e=t[4],e}default:{let e,n;t[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,u.G)("error-message-banner"),t[5]=e):e=t[5];let a=o.message||"Something went wrong";return t[6]!==a?(n=(0,r.jsx)(m.l,{...e,title:"Error",hideTitle:!0,description:a,variant:"warning"}),t[6]=a,t[7]=n):n=t[7],n}}}function C(e){let t,n,i,s,l,c,d,m,x,b,_,C=(0,a.c)(25),{error:w,manager:S}=e,{details:j}=w,[N,I]=(0,g.useState)(!1);C[0]!==j.name||C[1]!==S?(t=()=>{I(!0),S.dispatch({type:"MESSAGE_ADDED",message:(0,y.Y6)({role:"user",content:`Dismissed the connection with ${j.name}.`,mediaContent:[],parentMessageID:S.FindLastMessageID()})}),S.dispatch({type:"MESSAGE_ADDED",message:(0,y.Y6)({role:"assistant",content:`I was unable to connect you to ${j.name} because you cancelled the authentication.`,mediaContent:[],parentMessageID:S.FindLastMessageID()})})},C[0]=j.name,C[1]=S,C[2]=t):t=C[2];let T=t;C[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,u.G)("agent-unauthorized-error"),C[3]=n):n=C[3],C[4]!==N||C[5]!==T?(i=!N&&(0,r.jsx)(h.K,{"aria-label":"Close",className:"position-absolute top-0 right-0 mt-2 mr-2",icon:o.XIcon,onClick:T,variant:"invisible",unsafeDisableTooltip:!0}),C[4]=N,C[5]=T,C[6]=i):i=C[6],C[7]===Symbol.for("react.memo_cache_sentinel")?(s=(0,r.jsx)(o.MarkGithubIcon,{size:48,className:"border circle borderColor-muted"}),l=(0,r.jsx)(o.LinkIcon,{className:"fgColor-muted"}),c=(0,f.$)("avatar",v.A.agentUnauthorizedAvatar,"border circle borderColor-muted"),C[7]=s,C[8]=l,C[9]=c):(s=C[7],l=C[8],c=C[9]);let k=`icon for ${j.name}`;return C[10]!==j.avatar_url||C[11]!==k?(d=(0,r.jsxs)("div",{className:"d-flex flex-items-center gap-2",children:[s,l,(0,r.jsx)("img",{className:c,src:j.avatar_url,alt:k})]}),C[10]=j.avatar_url,C[11]=k,C[12]=d):d=C[12],C[13]!==j.name?(x=(0,r.jsxs)("p",{className:"h4 m-0 text-center",children:["Connect with ",j.name]}),m=(0,r.jsxs)("p",{className:"fgColor-muted text-center",children:["To use the ",j.name," extension, you\u2019ll need to connect your GitHub account to your ",j.name," account."]}),C[13]=j.name,C[14]=m,C[15]=x):(m=C[14],x=C[15]),C[16]!==j.authorize_url||C[17]!==N?(b=!N&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.Q,{as:"a",variant:"primary",size:"large",className:"width-full",href:j.authorize_url,rel:"noopener",target:"_blank",children:"Connect"}),(0,r.jsxs)("p",{className:"fgColor-muted text-center f6 m-0",children:["Click connect to be redirected to ",j.authorize_url]})]}),C[16]=j.authorize_url,C[17]=N,C[18]=b):b=C[18],C[19]!==m||C[20]!==b||C[21]!==i||C[22]!==d||C[23]!==x?(_=(0,r.jsxs)("div",{className:"position-relative d-flex flex-column flex-items-center gap-3 border rounded-2 p-5",...n,children:[i,d,x,m,b]}),C[19]=m,C[20]=b,C[21]=i,C[22]=d,C[23]=x,C[24]=_):_=C[24],_}function w(e){let t,n,i=(0,a.c)(4),{errors:o}=e;return i[0]!==o?(t=o.map(S),i[0]=o,i[1]=t):t=i[1],i[2]!==t?(n=(0,r.jsx)("div",{className:"d-flex flex-column gap-2",children:t}),i[2]=t,i[3]=n):n=i[3],n}function S(e,t){var n,a,s,l,c;return n=e,a=t,"sso"===n.code?(0,r.jsx)(d,{error:n,className:"mt-3"},a):(s=n,l=a,(0,r.jsxs)("div",{className:"p-3 border rounded-2",children:[(0,r.jsxs)("div",{className:"text-bold",children:[(0,r.jsx)(o.AlertFillIcon,{className:"mr-1 fgColor-attention"})," ","http"===(c=s).type?`${c.code} ${c.identifier}`:`${(0,x.Z)(c.type)} error`]}),(0,r.jsx)(i.To,{markdown:s.message})]},l))}try{_.displayName||(_.displayName="ErrorMessage")}catch{}try{C.displayName||(C.displayName="AgentUnauthorizedError")}catch{}try{w.displayName||(w.displayName="AgentErrors")}catch{}},34363:(e,t,n)=>{n.d(t,{G:()=>v});var r=n(74848),a=n(21728),i=n(38621),o=n(26108),s=n(96540),l=n(2635),c=n(33592),d=n(46665);let u={submittedFeedbackButton:"Feedback-module__submittedFeedbackButton--BrkHM"};var m=n(77274),h=n(35247),p=n(79064),f=n(54508);let g={thumbsUp:"MessageFeedbackDialog-module__thumbsUp--go17F",thumbsDown:"MessageFeedbackDialog-module__thumbsDown--sluhP"},y=[{name:"Bad",value:"NEGATIVE",icon:(0,r.jsx)(i.ThumbsdownIcon,{className:g.thumbsDown}),color:"bad"},{name:"Good",value:"POSITIVE",icon:(0,r.jsx)(i.ThumbsupIcon,{className:g.thumbsUp}),color:"good"}],x=(0,s.forwardRef)(function({messageId:e,threadId:t,returnFocusRef:n,onSubmitted:a,onClose:i},o){let l=(0,c.b)(),d=(0,s.useRef)(null),u=(0,s.useRef)(null),g=(0,s.useRef)(void 0);(0,s.useImperativeHandle)(o,()=>({openDialog:e=>{g.current=e,h.W.copilotChatInterviewSurvey?d.current?.openDialog():u.current?.openDialog(e)}}));let x=async(n,r)=>{let i=[];if(null==n&&i.push("Please select a rating."),r.length>500&&i.push("Please keep your feedback within 500 characters or less."),i.length>0)return i;try{(await l.service.sendFeedback({feedback:n,feedbackChoice:[],messageId:e,threadId:t,textResponse:r})).ok?a?.(n):i.push("An error occurred while submitting your feedback.")}catch{i.push("An error occurred while submitting your feedback.")}return i};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.E,{ref:d,title:"Give additional feedback",onClose:e=>{"no-thanks"===e?u.current?.openDialog(g.current):i?.()}}),(0,r.jsx)(m.NE,{title:"Give additional feedback",ref:u,options:y,onSubmit:x,onClose:i,requestID:p.Jt.getRequestID(e),returnFocusRef:n})]})});function v(e){let t,n,m,h,p,f=(0,a.c)(20),{iconSize:g}=e,{message:y}=(0,d.V)(),v=y.id,b=y.threadID,_=(0,c.b)(),C=(0,s.useRef)(null),w=(0,s.useRef)(null);f[0]!==_||f[1]!==y?(t=e=>{_.handleFeedback(y,e)},f[0]=_,f[1]=y,f[2]=t):t=f[2];let S=t,{optedInToUserFeedback:j}=(0,l.Pk)();f[3]!==_.service||f[4]!==v||f[5]!==S||f[6]!==j||f[7]!==b?(n=e=>{_.service.sendFeedback({feedback:e,messageId:v,threadId:b}),S(e),j?C.current?.openDialog(e):w.current?.focus()},f[3]=_.service,f[4]=v,f[5]=S,f[6]=j,f[7]=b,f[8]=n):n=f[8];let N=n;return f[9]!==g||f[10]!==y.feedback||f[11]!==N?(m=null!=y.feedback?(0,r.jsx)(o.K,{ref:w,"aria-label":`${y.feedback.toLocaleLowerCase()} feedback submitted`,icon:"POSITIVE"===y.feedback?i.ThumbsupIcon:i.ThumbsdownIcon,variant:"invisible",size:g,"aria-disabled":!0,className:u.submittedFeedbackButton}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.K,{icon:i.ThumbsupIcon,"aria-label":"Good response",onClick:()=>N("POSITIVE"),variant:"invisible",size:g}),(0,r.jsx)(o.K,{icon:i.ThumbsdownIcon,size:g,"aria-label":"Bad response",onClick:()=>N("NEGATIVE"),variant:"invisible"})]}),f[9]=g,f[10]=y.feedback,f[11]=N,f[12]=m):m=f[12],f[13]!==v||f[14]!==S||f[15]!==b?(h=(0,r.jsx)(x,{ref:C,messageId:v,threadId:b,onSubmitted:S,returnFocusRef:w}),f[13]=v,f[14]=S,f[15]=b,f[16]=h):h=f[16],f[17]!==m||f[18]!==h?(p=(0,r.jsxs)(r.Fragment,{children:[m,h]}),f[17]=m,f[18]=h,f[19]=p):p=f[19],p}x.displayName="MessageFeedbackDialog";try{v.displayName||(v.displayName="Feedback")}catch{}},81829:(e,t,n)=>{n.d(t,{A:()=>m});var r=n(74848),a=n(21728),i=n(71315),o=n(69726),s=n(96540);function l(e){e.preventDefault(),e.stopPropagation()}function c(e){return e instanceof DragEvent}let d=e=>{let t,n,i,o,s,l,c,d,u,m,h,p,f,g,y,x,v=(0,a.c)(17);return v[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)("path",{fill:"var(--bgColor-default)",fillRule:"evenodd",d:"M56.66 10.322v.002l16.824 7.846L92.44 70.254a8.75 8.75 0 0 1-5.23 11.217l-37.009 13.47a8.75 8.75 0 0 1-11.217-5.23L18.531 33.512a8.75 8.75 0 0 1 5.23-11.217z",clipRule:"evenodd"}),n=(0,r.jsx)("path",{fill:"var(--bgColor-open-muted)",fillRule:"evenodd",d:"M56.66 10.322v.002l16.824 7.846L92.44 70.254a8.75 8.75 0 0 1-5.23 11.217l-37.009 13.47a8.75 8.75 0 0 1-11.217-5.23L18.531 33.512a8.75 8.75 0 0 1 5.23-11.217z",clipRule:"evenodd"}),i=(0,r.jsx)("path",{fill:"var(--bgColor-open-emphasis)",fillRule:"evenodd",d:"m55.29 10.822.802-.293a1.46 1.46 0 0 1 1.116.049l15.73 7.335c.35.163.62.459.753.822l.294.804 18.458 50.715a8.75 8.75 0 0 1-5.23 11.217l-37.008 13.47a8.75 8.75 0 0 1-11.218-5.23L18.533 33.512a8.75 8.75 0 0 1 5.231-11.217zm.997 2.74L24.762 25.038a5.835 5.835 0 0 0-3.487 7.478l20.454 56.198a5.835 5.835 0 0 0 7.478 3.487l37.008-13.47a5.835 5.835 0 0 0 3.487-7.478L71.243 20.537l-5.482 1.996a5.82 5.82 0 0 1-4.461-.195 5.82 5.82 0 0 1-3.017-3.293z",clipRule:"evenodd",opacity:"0.12"}),v[0]=t,v[1]=n,v[2]=i):(t=v[0],n=v[1],i=v[2]),v[3]===Symbol.for("react.memo_cache_sentinel")?(o=(0,r.jsx)("g",{clipPath:"url(#clip0_12526_110155)",children:(0,r.jsx)("path",{fill:"var(--bgColor-open-emphasis)",fillRule:"evenodd",d:"M64.035 44.691c-.703 2.448-1.974 5.334-3.06 7.703-.93 2.029-1.94 3.575-2.932 4.66a5.46 5.46 0 0 1 .165 4.949c-.376.806-1.116 1.478-1.841 2.006-.754.549-1.631 1.04-2.446 1.445a31 31 0 0 1-3.066 1.318l-.053.02-.015.004-.004.002h-.002a1.095 1.095 0 0 1-1.388-.647v-.002l-.002-.004-.006-.015-.02-.053-.07-.196a30.973 30.973 0 0 1-.89-2.999c-.214-.885-.402-1.872-.466-2.803-.062-.895-.022-1.894.354-2.7a5.46 5.46 0 0 1 3.883-3.052c.178-1.474.697-3.268 1.635-5.314 1.092-2.383 2.494-5.198 3.94-7.294.718-1.039 1.498-1.978 2.313-2.587.804-.603 1.896-1.056 3.022-.53 1.134.53 1.46 1.673 1.497 2.667.037 1.011-.2 2.208-.548 3.422m-9.653 9.647a5.5 5.5 0 0 1 2.228 1.035c.515-.598 1.067-1.388 1.623-2.394l-3.1-1.445c-.397 1.08-.635 2.02-.751 2.804m7.55-10.25c-.61 2.121-1.702 4.662-2.733 6.928l-3.212-1.498c1.049-2.259 2.309-4.736 3.565-6.556.672-.973 1.292-1.682 1.823-2.08.541-.404.74-.318.783-.297h.003c.026.012.21.096.235.764.024.663-.136 1.594-.464 2.739m-8.986 19.408c-.682.34-1.342.627-1.862.84a29 29 0 0 1-.553-1.966c-.198-.823-.357-1.68-.41-2.441-.054-.796.02-1.336.155-1.625a3.282 3.282 0 1 1 5.949 2.774c-.135.29-.5.693-1.146 1.162-.617.45-1.375.878-2.133 1.256",clipRule:"evenodd"})}),s=(0,r.jsx)("path",{fill:"var(--bgColor-default)",fillRule:"evenodd",d:"M198.941 19.499 166.042 7.525a8.75 8.75 0 0 0-11.217 5.23L134.37 68.953a8.75 8.75 0 0 0 5.231 11.217l37.008 13.47a8.75 8.75 0 0 0 11.217-5.231l18.959-52.089z",clipRule:"evenodd"}),l=(0,r.jsx)("path",{fill:"var(--bgColor-sponsors-muted)",fillRule:"evenodd",d:"M198.941 19.499 166.042 7.525a8.75 8.75 0 0 0-11.217 5.23L134.37 68.953a8.75 8.75 0 0 0 5.231 11.217l37.008 13.47a8.75 8.75 0 0 0 11.217-5.231l18.959-52.089z",clipRule:"evenodd"}),c=(0,r.jsx)("path",{fill:"var(--bgColor-sponsors-emphasis)",fillRule:"evenodd",d:"m197.568 19.003.803.292c.363.132.659.404.823.754l7.335 15.73c.163.35.181.751.049 1.114l-.293.805-18.458 50.715a8.75 8.75 0 0 1-11.217 5.23l-37.008-13.47a8.75 8.75 0 0 1-5.231-11.217l20.454-56.197a8.75 8.75 0 0 1 11.217-5.23zm-.998 2.741L165.045 10.27a5.836 5.836 0 0 0-7.479 3.487l-20.454 56.197a5.834 5.834 0 0 0 3.487 7.478l37.008 13.47a5.836 5.836 0 0 0 7.479-3.487L203.544 36.7l-5.483-1.995a5.82 5.82 0 0 1-3.292-3.017 5.82 5.82 0 0 1-.195-4.461z",clipRule:"evenodd",opacity:"0.12"}),v[3]=o,v[4]=s,v[5]=l,v[6]=c):(o=v[3],s=v[4],l=v[5],c=v[6]),v[7]===Symbol.for("react.memo_cache_sentinel")?(u=(0,r.jsx)("g",{clipPath:"url(#clip1_12526_110155)",children:(0,r.jsx)("path",{fill:"var(--bgColor-sponsors-emphasis)",fillRule:"evenodd",d:"M179.168 44.01a2.553 2.553 0 0 1 3.393 1.235l.946 2.03a2.55 2.55 0 0 1-1.235 3.392l-16.096 7.506a2.55 2.55 0 0 1-1.259.232l-4.919-.348a1.094 1.094 0 0 1-.808-1.734l2.894-3.992c.255-.351.595-.632.988-.815zm1.41 2.16a.365.365 0 0 0-.485-.177l-2.36 1.1 1.254 2.692 2.361-1.101a.365.365 0 0 0 .176-.485zm-3.574 4.54-1.254-2.692-11.753 5.48a.36.36 0 0 0-.141.117l-1.739 2.399 2.955.209a.36.36 0 0 0 .18-.033z",clipRule:"evenodd"})}),m=(0,r.jsx)("path",{fill:"var(--bgColor-default)",fillRule:"evenodd",d:"M128.059 0H93.052A8.75 8.75 0 0 0 84.3 8.752v59.804a8.75 8.75 0 0 0 8.752 8.751h39.383a8.75 8.75 0 0 0 8.751-8.751v-55.43z",clipRule:"evenodd"}),h=(0,r.jsx)("path",{fill:"var(--bgColor-accent-muted)",fillRule:"evenodd",d:"M128.059 0H93.052A8.75 8.75 0 0 0 84.3 8.752v59.804a8.75 8.75 0 0 0 8.752 8.751h39.383a8.75 8.75 0 0 0 8.751-8.751v-55.43z",clipRule:"evenodd"}),d=(0,r.jsx)("path",{fill:"var(--bgColor-accent-emphasis)",fillRule:"evenodd",d:"M126.6 0h.855c.386 0 .757.154 1.031.427L140.758 12.7c.274.273.427.644.428 1.03v54.826a8.75 8.75 0 0 1-8.751 8.751H93.052a8.75 8.75 0 0 1-8.752-8.751V8.752A8.75 8.75 0 0 1 93.052 0zm0 2.917H93.052a5.835 5.835 0 0 0-5.835 5.835v59.804a5.835 5.835 0 0 0 5.835 5.834h39.383a5.834 5.834 0 0 0 5.834-5.834v-53.97h-5.834a5.82 5.82 0 0 1-4.126-1.709 5.82 5.82 0 0 1-1.709-4.125z",clipRule:"evenodd",opacity:"0.12"}),v[7]=d,v[8]=u,v[9]=m,v[10]=h):(d=v[7],u=v[8],m=v[9],h=v[10]),v[11]===Symbol.for("react.memo_cache_sentinel")?(p=(0,r.jsx)("g",{clipPath:"url(#clip2_12526_110155)",children:(0,r.jsx)("path",{fill:"var(--bgColor-accent-emphasis)",fillRule:"evenodd",d:"M104.354 31.356a.364.364 0 0 0-.364.365v15.315c0 .202.163.365.364.365h1.373l.042-.045 8.864-8.864c.962-.962 2.509-1 3.518-.088l4.801 4.344V31.72a.365.365 0 0 0-.365-.365zM122.587 47.4h-13.768l7.361-7.362a.365.365 0 0 1 .503-.013l6.269 5.672v1.338a.365.365 0 0 1-.365.365m2.553-.365V31.721a2.553 2.553 0 0 0-2.553-2.553h-18.233a2.553 2.553 0 0 0-2.552 2.553v15.315a2.553 2.553 0 0 0 2.552 2.553h18.233a2.553 2.553 0 0 0 2.553-2.553m-15.316-10.575a.729.729 0 1 1-1.458 0 .729.729 0 0 1 1.458 0m2.188 0a2.917 2.917 0 1 1-5.834 0 2.917 2.917 0 0 1 5.834 0",clipRule:"evenodd"})}),v[11]=p):p=v[11],v[12]===Symbol.for("react.memo_cache_sentinel")?(f=(0,r.jsx)("clipPath",{id:"clip0_12526_110155",children:(0,r.jsx)("path",{fill:"var(--bgColor-default)",d:"m41.466 45.344 21.93-7.982 7.982 21.93-21.93 7.982z"})}),v[12]=f):f=v[12],v[13]===Symbol.for("react.memo_cache_sentinel")?(g=(0,r.jsx)("clipPath",{id:"clip1_12526_110155",children:(0,r.jsx)("path",{fill:"var(--bgColor-default)",d:"m164.786 36.563 21.93 7.982-7.982 21.93-21.93-7.982z"})}),v[13]=g):g=v[13],v[14]===Symbol.for("react.memo_cache_sentinel")?(y=(0,r.jsxs)("defs",{children:[f,g,(0,r.jsx)("clipPath",{id:"clip2_12526_110155",children:(0,r.jsx)("path",{fill:"var(--bgColor-default)",d:"M101.802 27.71h23.338V51.05h-23.338z"})})]}),v[14]=y):y=v[14],v[15]!==e?(x=(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"226",height:"103",fill:"none",viewBox:"0 0 226 103",...e,children:[t,n,i,o,s,l,c,u,m,h,d,p,y]}),v[15]=e,v[16]=x):x=v[16],x};try{d.displayName||(d.displayName="DragAndDropSVG")}catch{}let u={overlay:"FullScreenDragOverlay-module__overlay--Q9gow",centeredContent:"FullScreenDragOverlay-module__centeredContent--iAFMy",text:"FullScreenDragOverlay-module__text--oftCM"};function m(e){let t,n,m,h=(0,a.c)(9),{onFilesDrop:p,isUploading:f}=e,g=void 0!==f&&f;h[0]!==g||h[1]!==p?(t=e=>{g||p(e)},h[0]=g,h[1]=p,h[2]=t):t=h[2];let y=t;h[3]!==y?(n={onFilesDrop:y,targetElement:i.XC},h[3]=y,h[4]=n):n=h[4];let{isDragging:x}=function(e){let t,n,r,i=(0,a.c)(6),{onFilesDrop:o,targetElement:d}=e,[u,m]=(0,s.useState)(!1),h=(0,s.useRef)(0);return i[0]!==o||i[1]!==d?(t=()=>{if(!d)return;let e=e=>{c(e)&&(e.preventDefault(),e.stopPropagation(),e.dataTransfer?.types.includes("Files")&&(h.current=h.current+1,1===h.current&&m(!0)))},t=e=>{e.preventDefault(),e.stopPropagation(),h.current=h.current-1,h.current<=0&&(h.current=0,m(!1))},n=e=>{if(!c(e))return;e.preventDefault(),e.stopPropagation(),h.current=0,m(!1);let t=e.dataTransfer?.files;t&&0!==t.length&&o(t)};return d.addEventListener("dragover",l),d.addEventListener("dragenter",e),d.addEventListener("dragleave",t),d.addEventListener("drop",n),()=>{d.removeEventListener("dragover",l),d.removeEventListener("dragenter",e),d.removeEventListener("dragleave",t),d.removeEventListener("drop",n)}},n=[o,d],i[0]=o,i[1]=d,i[2]=t,i[3]=n):(t=i[2],n=i[3]),(0,s.useEffect)(t,n),i[4]!==u?(r={isDragging:u},i[4]=u,i[5]=r):r=i[5],r}(n),v=null;if(g){let e;h[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.A,{size:"large"}),(0,r.jsx)("p",{className:u.text,children:"Uploading files..."})]}),h[5]=e):e=h[5],v=e}else if(x){let e;h[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d,{}),(0,r.jsx)("p",{className:u.text,children:"Drop files to upload"})]}),h[6]=e):e=h[6],v=e}return v?(h[7]!==v?(m=(0,r.jsx)("div",{className:u.overlay,children:(0,r.jsx)("div",{className:u.centeredContent,children:v})}),h[7]=v,h[8]=m):m=h[8],m):null}try{m.displayName||(m.displayName="FullScreenDragOverlay")}catch{}},11633:(e,t,n)=>{n.d(t,{WA:()=>ev});var r,a,i,o,s,l,c,d,u,m,h,p,f,g=n(74848),y=n(21728),x=n(41738),v=n(38621),b=n(81960),_=n(21998);n(51213),n(35247);var C=n(79064),w=n(1805),S=n(69726),j=n(21373),N=n(5524),I=n(69497),T=n(10095),k=n(34164),R=n(96540),A=n(25641),E=n(2635);let L={functionCallButton:"FunctionCallButton-module__functionCallButton--_WmIK"},M={functionReferenceListContainer:"FunctionLoadingUtils-module__functionReferenceListContainer--_vK99",functionLoading:"FunctionLoadingUtils-module__functionLoading--APVUB",spinner:"FunctionLoadingUtils-module__spinner--LI0rU",functionReferenceButton:"FunctionLoadingUtils-module__functionReferenceButton--AiuYU",functionReferenceButtonContents:"FunctionLoadingUtils-module__functionReferenceButtonContents--fRReb",functionReferenceTitle:"FunctionLoadingUtils-module__functionReferenceTitle--pFYb2",functionReferenceListFooter:"FunctionLoadingUtils-module__functionReferenceListFooter--Nvw6l",errorContainer:"FunctionLoadingUtils-module__errorContainer--uwToA",errorHeading:"FunctionLoadingUtils-module__errorHeading--AXPQe",errorMessage:"FunctionLoadingUtils-module__errorMessage--GB_0R",toolDescriptionText:"FunctionLoadingUtils-module__toolDescriptionText--wLOuU",toolNameHighlight:"FunctionLoadingUtils-module__toolNameHighlight--Jpfyk",functionTitleContainer:"FunctionLoadingUtils-module__functionTitleContainer--jes_G"};function F(e){return(e.references?.[0]?.results??[]).map(P)}function P(e){return{title:e.title,url:e.url,description:e.excerpt,leadingIcon:v.GlobeIcon}}function D(e){let t=e.references?.[0];return(t?.results??[]).map(e=>({title:e.title,url:e.url,leadingIcon:"bing_search"===e.reference_type?x._:v.GlobeIcon}))}function $(e){return(e.references??[]).map(O)}function O(e){return"file-v2"===e.type?{description:`${e.repoName}/${e.path}`,leadingIcon:v.FileIcon,reference:e,title:(0,A.Xo)(e),url:e.url}:void 0}let B=(e,t)=>t?`${e} on ref ${t}`:e;function U(e){return(e.references??[]).map(z)}function z(e){return"alert.api"===e.type?{description:"Alert",leadingIcon:W,title:"Alert"}:void 0}function W(){return(0,g.jsx)(v.ShieldIcon,{})}function V(e){return(e.references??[]).map(q)}function q(e){return"discussion"===e.type?{title:e.title??"Discussion",description:`Using discussion #${e.number} for ${e.repository.owner}/${e.repository.name}`,url:e.url,leadingIcon:v.CommentDiscussionIcon}:void 0}function G(e){let t,n,r=(0,y.c)(3),{children:a}=e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,g.jsx)("span",{className:M.spinner,children:(0,g.jsx)(S.A,{size:"small"})}),r[0]=t):t=r[0],r[1]!==a?(n=(0,g.jsxs)("div",{className:M.functionLoading,children:[t,(0,g.jsx)("span",{children:a})]}),r[1]=a,r[2]=n):n=r[2],n}function H(e){return(e.references??[]).filter(Z).map(K)}function K(e){return{description:`${e.id} \xb7 ${e.repoOwner}/${e.repoName}`,leadingIcon:v.PlayIcon,title:"Job"}}function Z(e){return"job"===e.type}function Q(e){return e.jobId?`job ${e.jobId}`:e.runId?`workflow run ${e.runId}`:e.pullRequestNumber?`pull request ${e.pullRequestNumber}`:e.workflowPath?`workflow ${e.workflowPath}`:"unknown job"}function J(e){let t,n,r=(0,y.c)(27),{additionalFooterContent:a,chatManager:i,errorButtonText:o,errorTitle:s,functionCall:l,inProgressMessage:c,noResultsMessage:d,resultsMapper:u,successButtonText:m,toolLink:h,toolName:p,useSelectReference:f}=e,[x,b]=(0,R.useState)(!1),_=(0,R.useId)();if(r[0]!==a||r[1]!==i||r[2]!==_||r[3]!==o||r[4]!==s||r[5]!==x||r[6]!==l||r[7]!==c||r[8]!==d||r[9]!==u||r[10]!==m||r[11]!==h||r[12]!==p||r[13]!==f){n=Symbol.for("react.early_return_sentinel");e:{let e,y,C,w,S=u(l),{status:R,errorMessage:A}=l;if(l.references?.length===1){let e=l.references[0];if(e)switch(e.type){case"text":R="error",A=e.text;break;case"unsupported":R="unsupported",A=e.text}}if("started"===R){let e;r[16]!==c?(e=(0,g.jsx)(G,{children:c}),r[16]=c,r[17]=e):e=r[17],n=e;break e}r[18]===Symbol.for("react.memo_cache_sentinel")?(e=(0,k.$)(M.functionReferenceButton,L.functionCallButton),r[18]=e):e=r[18];let E=x?v.ChevronUpIcon:v.ChevronDownIcon;r[19]===Symbol.for("react.memo_cache_sentinel")?(y=()=>b(Y),r[19]=y):y=r[19];let F="error"===R?o:"unsupported"===R?d:m;r[20]!==F?(C=(0,g.jsx)("span",{className:M.functionReferenceButtonContents,children:F}),r[20]=F,r[21]=C):C=r[21],r[22]!==_||r[23]!==x||r[24]!==E||r[25]!==C?(w=(0,g.jsx)(j.Q,{"aria-expanded":x,"aria-controls":_,className:e,leadingVisual:E,onClick:y,variant:"invisible",children:C}),r[22]=_,r[23]=x,r[24]=E,r[25]=C,r[26]=w):w=r[26],t=(0,g.jsxs)(g.Fragment,{children:[w,x&&(0,g.jsxs)("div",{id:_,className:M.functionReferenceListContainer,children:[(0,g.jsx)(N.l,{children:"error"===R?(0,g.jsxs)(N.l.Item,{children:[s,(0,g.jsx)(N.l.Description,{variant:"block",children:A})]}):"unsupported"===R?(0,g.jsxs)(N.l.Item,{children:[A,(0,g.jsx)(N.l.Description,{truncate:!0,children:""})]}):0===S.length?(0,g.jsxs)(N.l.Item,{children:[d,(0,g.jsx)(N.l.Description,{truncate:!0,children:"Try modifying your query by reframing your question."})]}):S.map((e,t)=>e&&(0,g.jsxs)(N.l.LinkItem,{className:"width-fit",href:e.url,onClick:t=>{f&&e.reference&&(i.selectReference(e.reference),t.preventDefault())},target:"_blank",rel:"noopener",children:[e.leadingIcon&&(0,g.jsx)(N.l.LeadingVisual,{children:(0,g.jsx)(T.A,{icon:e.leadingIcon,sx:{...e.leadingIconColor&&{color:e.leadingIconColor}}})}),(0,g.jsx)(I.A,{className:M.functionReferenceTitle,title:e.title,children:e.title}),(0,g.jsx)(N.l.Description,{variant:"block",children:e.description})]},t))}),(0,g.jsxs)("span",{className:M.functionReferenceListFooter,children:["Copilot used the"," ",(0,g.jsx)("a",{href:h,target:"_blank",rel:"noopener noreferrer",children:p})," ","tool",a&&(0,g.jsxs)(g.Fragment,{children:[". ",a]})]})]})]})}r[0]=a,r[1]=i,r[2]=_,r[3]=o,r[4]=s,r[5]=x,r[6]=l,r[7]=c,r[8]=d,r[9]=u,r[10]=m,r[11]=h,r[12]=p,r[13]=f,r[14]=t,r[15]=n}else t=r[14],n=r[15];return n!==Symbol.for("react.early_return_sentinel")?n:t}function Y(e){return!e}function X(e){return"text"!==e.type}function ee(e){return e.charAt(0).toUpperCase()+e.slice(1)}function et(e){let t=e.references?.[0];return[{title:t?.title||"",url:t?.url||"",description:""}]}let en="https://docs.github.com/en/support/contacting-github-support/using-copilot-in-github-support";function er(e){return(e.references?.[0]?.results??[]).map(ea)}function ea(e){return{title:e.title,url:e.url,description:e.url}}function ei(e){return(e.references??[]).map(e=>"file"===e.type||"snippet"===e.type?{description:(0,A.Z8)(e),leadingIcon:v.CodeIcon,reference:e,title:(0,A.z$)(e),url:e.url}:void 0)}try{(r=function(e){let t,n,r=(0,y.c)(8),{chatManager:a,functionCall:i,skillArgs:o}=e,s=o.query;r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,g.jsx)(w.A,{href:"https://privacy.microsoft.com/privacystatement",rel:"nofollow",target:"_blank",children:"Microsoft Privacy Statement"}),r[0]=t):t=r[0];let l=`An error occurred when searching for \u{201C}${s}\u{201D}`,c=`Searching the web for \u{201C}${s}\u{201D}`,d=`No web search results for \u{201C}${s}\u{201D} were found`,u=`Using web search results for \u{201C}${s}\u{201D}`;return r[1]!==a||r[2]!==i||r[3]!==l||r[4]!==c||r[5]!==d||r[6]!==u?(n=(0,g.jsx)(J,{additionalFooterContent:t,chatManager:a,errorButtonText:l,errorTitle:"An error occurred when searching the web",toolLink:"https://bing.com",toolName:"Bing search",functionCall:i,inProgressMessage:c,noResultsMessage:d,resultsMapper:F,successButtonText:u,useSelectReference:!1}),r[1]=a,r[2]=i,r[3]=l,r[4]=c,r[5]=d,r[6]=u,r[7]=n):n=r[7],n}).displayName||(r.displayName="BingFunctionButton")}catch{}try{(a=function(e){let t,n,r=(0,y.c)(8),{chatManager:a,functionCall:i,skillArgs:o}=e,s=o.query;r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,g.jsx)(w.A,{href:"https://privacy.microsoft.com/privacystatement",rel:"nofollow",target:"_blank",children:"Microsoft Privacy Statement"}),r[0]=t):t=r[0];let l=`An error occurred when searching for \u{201C}${s}\u{201D}`,c=`Searching the web for \u{201C}${s}\u{201D}`,d=`No web search results for \u{201C}${s}\u{201D} were found`,u=`Using web search results for \u{201C}${s}\u{201D}`;return r[1]!==a||r[2]!==i||r[3]!==l||r[4]!==c||r[5]!==d||r[6]!==u?(n=(0,g.jsx)(J,{additionalFooterContent:t,chatManager:a,errorButtonText:l,errorTitle:"An error occurred when searching the web",toolLink:"https://gh.io/azure-ai-agent-with-bing-grounding",toolName:"Bing Search",functionCall:i,inProgressMessage:c,noResultsMessage:d,resultsMapper:D,successButtonText:u,useSelectReference:!1}),r[1]=a,r[2]=i,r[3]=l,r[4]=c,r[5]=d,r[6]=u,r[7]=n):n=r[7],n}).displayName||(a.displayName="BingGroundingFunctionButton")}catch{}try{(i=function(e){var t;let n,r=(0,y.c)(9),{chatManager:a,functionCall:i,skillArgs:o,useSelectReference:s}=e,l=o.query,c="scopingQuery"in o?o.scopingQuery:o.repoOwner&&o.repoName?`repo:${o.repoOwner}/${o.repoName}`:void 0;c&&(c=(t=c).startsWith("repo:")?t.substring(5):t);let d="semantic-code-search"===o.kind?"semantic":"lexical",u=`An error occurred when searching for \u{201C}${l}\u{201D}`,m=`${d.charAt(0).toUpperCase()+d.slice(1)} search`,h=`Searching for \u{201C}${l}\u{201D}${c&&` in ${c}`}`,p=`No results were found when ${d} searching for \u{201C}${l}\u{201D}${c&&` in ${c}`}`,f=`Using ${d} search results for \u{201C}${l}\u{201D}${c&&` in ${c}`}`;return r[0]!==a||r[1]!==i||r[2]!==u||r[3]!==m||r[4]!==h||r[5]!==p||r[6]!==f||r[7]!==s?(n=(0,g.jsx)(J,{chatManager:a,errorButtonText:u,errorTitle:"An error occurred when searching code",toolLink:"https://docs.github.com/en/enterprise-cloud@latest/copilot/github-copilot-enterprise/copilot-chat-in-github/using-github-copilot-chat-in-githubcom#currently-available-skills",toolName:m,functionCall:i,inProgressMessage:h,noResultsMessage:p,resultsMapper:ei,successButtonText:f,useSelectReference:s}),r[0]=a,r[1]=i,r[2]=u,r[3]=m,r[4]=h,r[5]=p,r[6]=f,r[7]=s,r[8]=n):n=r[8],n}).displayName||(i.displayName="CodeSearchButton")}catch{}try{(o=function(e){let t,n=(0,y.c)(8),{chatManager:r,functionCall:a,skillArgs:i,useSelectReference:o}=e,s=i.query,l=i.kbID,{knowledgeBases:c}=(0,E.Pk)(),d=c.find(e=>e.id===l),u=d?.name??"the knowledge base",m=`An error occurred when searching for \u{201C}${s}\u{201D} in ${u}`,h=`Searching the ${u} knowledge base for \u{201C}${s}\u{201D}`,p=`No results were found when searching the ${u} knowledge base for \u{201C}${s}\u{201D}`,f=`Using search results from the ${u} knowledge base for \u{201C}${s}\u{201D}`;return n[0]!==r||n[1]!==a||n[2]!==m||n[3]!==h||n[4]!==p||n[5]!==f||n[6]!==o?(t=(0,g.jsx)(J,{chatManager:r,errorButtonText:m,errorTitle:"An error occurred when searching the knowledge base",toolLink:"https://docs.github.com/en/enterprise-cloud@latest/copilot/github-copilot-enterprise/copilot-chat-in-github/using-github-copilot-chat-in-githubcom#currently-available-skills",toolName:"Knowledge base search",functionCall:a,inProgressMessage:h,noResultsMessage:p,resultsMapper:ei,successButtonText:f,useSelectReference:o}),n[0]=r,n[1]=a,n[2]=m,n[3]=h,n[4]=p,n[5]=f,n[6]=o,n[7]=t):t=n[7],t}).displayName||(o.displayName="KnowledgeBaseSearchButton")}catch{}try{(s=function(e){let t,n,r,a,i,o=(0,y.c)(20),{chatManager:s,functionCall:l,skillArgs:c,useSelectReference:d}=e,{path:u,repo:m,ref:h}=c,p=`An error occurred when finding \u{201C}${u}\u{201D} in ${m}`;o[0]!==h||o[1]!==p?(t=B(p,h),o[0]=h,o[1]=p,o[2]=t):t=o[2];let f=`File results for \u{201C}${u}\u{201D} in ${m}`;o[3]!==h||o[4]!==f?(n=B(f,h),o[3]=h,o[4]=f,o[5]=n):n=o[5];let x=`No files matching \u{201C}${u}\u{201D} in ${m} were found`;o[6]!==h||o[7]!==x?(r=B(x,h),o[6]=h,o[7]=x,o[8]=r):r=o[8];let v=`Using results for \u{201C}${u}\u{201D} in ${m}`;return o[9]!==h||o[10]!==v?(a=B(v,h),o[9]=h,o[10]=v,o[11]=a):a=o[11],o[12]!==s||o[13]!==l||o[14]!==t||o[15]!==n||o[16]!==r||o[17]!==a||o[18]!==d?(i=(0,g.jsx)(J,{chatManager:s,errorButtonText:t,errorTitle:"An error occurred when finding a file",toolLink:"https://docs.github.com/en/enterprise-cloud@latest/copilot/github-copilot-enterprise/copilot-chat-in-github/using-github-copilot-chat-in-githubcom#currently-available-skills",toolName:"Get file",functionCall:l,inProgressMessage:n,noResultsMessage:r,resultsMapper:$,successButtonText:a,useSelectReference:d}),o[12]=s,o[13]=l,o[14]=t,o[15]=n,o[16]=r,o[17]=a,o[18]=d,o[19]=i):i=o[19],i}).displayName||(s.displayName="GetFileButton")}catch{}try{(l=function(e){let t,n,r,a,i,o,s=(0,y.c)(23),{chatManager:l,functionCall:c,skillArgs:d,useSelectReference:u}=e,{path:m,repo:h,ref:p}=d,f=`An error occurred when finding file changes for \u{201C}${m}\u{201D} in ${h}`;s[0]!==p||s[1]!==f?(t=B(f,p),s[0]=p,s[1]=f,s[2]=t):t=s[2];let x=`File changes results for \u{201C}${m} in ${h}`;s[3]!==p||s[4]!==x?(n=B(x,p),s[3]=p,s[4]=x,s[5]=n):n=s[5];let b=`No files changes were found for \u{201C}${m}\u{201D} in ${h}`;s[6]!==p||s[7]!==b?(r=B(b,p),s[6]=p,s[7]=b,s[8]=r):r=s[8],s[9]!==m?(a=e=>(e.references??[]).map(e=>"file-changes"===e.type?{description:`${e.repository.name}/${m}`,leadingIcon:v.FileIcon,reference:e,title:(0,A.Xo)(e),url:e.url}:void 0),s[9]=m,s[10]=a):a=s[10];let _=`Using results for \u{201C}${m}\u{201D} in ${h}`;return s[11]!==p||s[12]!==_?(i=B(_,p),s[11]=p,s[12]=_,s[13]=i):i=s[13],s[14]!==l||s[15]!==c||s[16]!==t||s[17]!==n||s[18]!==r||s[19]!==a||s[20]!==i||s[21]!==u?(o=(0,g.jsx)(J,{chatManager:l,errorButtonText:t,errorTitle:"An error occurred when finding the file changes",toolLink:"https://docs.github.com/en/enterprise-cloud@latest/copilot/github-copilot-enterprise/copilot-chat-in-github/using-github-copilot-chat-in-githubcom#currently-available-skills",toolName:"Get file changes",functionCall:c,inProgressMessage:n,noResultsMessage:r,resultsMapper:a,successButtonText:i,useSelectReference:u}),s[14]=l,s[15]=c,s[16]=t,s[17]=n,s[18]=r,s[19]=a,s[20]=i,s[21]=u,s[22]=o):o=s[22],o}).displayName||(l.displayName="GetFileChangesButton")}catch{}try{(c=function(e){let t,n=(0,y.c)(5),{chatManager:r,functionCall:a,skillArgs:i,useSelectReference:o}=e,s=`An error occurred when fetching alert information for ${i.url}`;return n[0]!==r||n[1]!==a||n[2]!==s||n[3]!==o?(t=(0,g.jsx)(J,{chatManager:r,errorButtonText:s,errorTitle:"An error occurred when fetching alert information",toolLink:"https://docs.github.com/en/enterprise-cloud@latest/copilot/github-copilot-enterprise/copilot-chat-in-github/using-github-copilot-chat-in-githubcom#currently-available-skills",toolName:"Get alert information",functionCall:a,inProgressMessage:"Fetching alert information",noResultsMessage:"Unable to fetch alert information",resultsMapper:U,successButtonText:"Using alert information",useSelectReference:o}),n[0]=r,n[1]=a,n[2]=s,n[3]=o,n[4]=t):t=n[4],t}).displayName||(c.displayName="GetAlertButton")}catch{}try{(d=function(e){let t,n=(0,y.c)(7),{chatManager:r,functionCall:a,skillArgs:i,useSelectReference:o}=e,s=`Fetching discussion ${i.discussionNumber}`,l=`Unable to fetch discussion ${i.discussionNumber}`,c=`Using discussion #${i.discussionNumber}`;return n[0]!==r||n[1]!==a||n[2]!==s||n[3]!==l||n[4]!==c||n[5]!==o?(t=(0,g.jsx)(J,{chatManager:r,errorButtonText:"An error occurred when fetching discussion",errorTitle:"An error occurred when fetching discussion",toolLink:"https://docs.github.com/en/enterprise-cloud@latest/copilot/github-copilot-enterprise/copilot-chat-in-github/using-github-copilot-chat-in-githubcom#currently-available-skills",toolName:"Get discussion",functionCall:a,inProgressMessage:s,noResultsMessage:l,resultsMapper:V,successButtonText:c,useSelectReference:o}),n[0]=r,n[1]=a,n[2]=s,n[3]=l,n[4]=c,n[5]=o,n[6]=t):t=n[6],t}).displayName||(d.displayName="GetDiscussionButton")}catch{}try{G.displayName||(G.displayName="FunctionLoading")}catch{}try{(u=function(e){let t=(0,y.c)(1),{functionCall:n}=e,{status:r}=n;if("started"===r){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,g.jsx)(G,{children:"Coming up with a plan"}),t[0]=e):e=t[0],e}}).displayName||(u.displayName="PlanButton")}catch{}try{(m=function(e){let t,n=(0,y.c)(8),{chatManager:r,functionCall:a,skillArgs:i,useSelectReference:o}=e,s=Q(i),l=`An error occurred when fetching logs for ${s} in ${i.repo}`,c=`Fetching logs for ${s} in ${i.repo}`,d=`Unable to fetch logs for ${s} in ${i.repo}`,u=`Using logs for ${s} in ${i.repo}`;return n[0]!==r||n[1]!==a||n[2]!==l||n[3]!==c||n[4]!==d||n[5]!==u||n[6]!==o?(t=(0,g.jsx)(J,{chatManager:r,errorButtonText:l,errorTitle:"An error occurred when fetching a commit",toolLink:"https://docs.github.com/en/enterprise-cloud@latest/copilot/github-copilot-enterprise/copilot-chat-in-github/using-github-copilot-chat-in-githubcom#currently-available-skills",toolName:"Get job logs",functionCall:a,inProgressMessage:c,noResultsMessage:d,resultsMapper:H,successButtonText:u,useSelectReference:o}),n[0]=r,n[1]=a,n[2]=l,n[3]=c,n[4]=d,n[5]=u,n[6]=o,n[7]=t):t=n[7],t}).displayName||(m.displayName="GetJobLogsButton")}catch{}try{J.displayName||(J.displayName="ExpandableFunctionButton")}catch{}try{(h=function(e){let t,n,r,a=(0,y.c)(15),{chatManager:i,functionCall:o,skillArgs:s,useSelectReference:l}=e,c="GitHub API",d=o.references?.[0];if(d){let e=d.type;if(e.endsWith(".api")){let t=e.split(".")[0];t&&(c=`${t.split("-").map(ee).join(" ")} API`)}else"api-response"===d.type&&(c=`${d.resourceType} API`)}a[0]!==s.endpoint||a[1]!==s.endpointDescription?(t=s.endpointDescription?{errorButtonText:`An error occurred when using the GitHub API to ${s.endpointDescription}`,inProgressMessage:`Using the GitHub API to ${s.endpointDescription}`,noResultsMessage:`Unable to use the GitHub API to ${s.endpointDescription}`,successButtonText:`Using the GitHub API to ${s.endpointDescription}`}:{errorButtonText:`An error occurred when fetching from ${s.endpoint}`,inProgressMessage:`Fetching endpoint ${s.endpoint}`,noResultsMessage:`Unable to fetch from ${s.endpoint}`,successButtonText:`Using endpoint ${s.endpoint}`},a[0]=s.endpoint,a[1]=s.endpointDescription,a[2]=t):t=a[2];let u=t;return a[3]!==s?(n=e=>e.references?.filter(X).map(e=>(function(e,t){switch(e.type){case"release.api":return{description:`Release ${e.tag_name} \xb7 ${t.repo}`,leadingIcon:v.TagIcon,title:e.name??"Release",url:e.html_url};case"issue.api":return{description:`#${e.number} \xb7 ${t.repo}`,leadingIcon:v.IssueOpenedIcon,title:e.title??"Issue",url:e.html_url};case"pull-request.api":return{description:`#${e.number} \xb7 ${t.repo}`,leadingIcon:v.GitPullRequestIcon,title:e.title??"Pull request",url:e.html_url};case"repository.api":return{description:e.description||"",title:e.name,leadingIcon:v.RepoIcon,url:e.html_url};case"commit.api":return{description:`${e.sha} \xb7 ${t.repo}`,leadingIcon:v.GitCommitIcon,title:e.commit.message??"Commit",url:e.html_url};case"topic.api":return{description:e.short_description||"",leadingIcon:v.HashIcon,title:e.display_name??e.name};case"api-response":switch(e.resourceType){case"Repository":return{description:e.data.description||"",title:e.data.name,leadingIcon:v.RepoIcon,url:e.data.html_url};case"Issue":return{description:`#${e.data.number} \xb7 ${t.repo}`,leadingIcon:v.IssueOpenedIcon,title:e.data.title??"Issue",url:e.data.html_url};case"Release":return{description:`Release ${e.data.tag_name} \xb7 ${t.repo}`,leadingIcon:v.TagIcon,title:e.data.name??"Release",url:e.data.html_url};case"PullRequest":return{description:`#${e.data.number} \xb7 ${t.repo}`,leadingIcon:v.GitPullRequestIcon,title:e.data.title??"Pull request",url:e.data.html_url};case"Commit":return{description:`${e.data.sha} \xb7 ${t.repo}`,leadingIcon:v.GitCommitIcon,title:e.data.commit.message??"Commit",url:e.data.html_url};case"Topic":return{description:e.data.short_description||"",leadingIcon:v.HashIcon,title:e.data.display_name??e.data.name};default:return{description:"API endpoint returned results successfully",leadingIcon:v.InfoIcon,title:"API results"}}default:return{description:"API endpoint returned results successfully",leadingIcon:v.InfoIcon,title:"API results"}}})(e,s))??[],a[3]=s,a[4]=n):n=a[4],a[5]!==i||a[6]!==o||a[7]!==u.errorButtonText||a[8]!==u.inProgressMessage||a[9]!==u.noResultsMessage||a[10]!==u.successButtonText||a[11]!==n||a[12]!==c||a[13]!==l?(r=(0,g.jsx)(J,{chatManager:i,errorTitle:"An error occurred when fetching data from the GitHub API",toolLink:"https://docs.github.com/en/enterprise-cloud@latest/copilot/github-copilot-enterprise/copilot-chat-in-github/using-github-copilot-chat-in-githubcom#currently-available-skills",toolName:c,functionCall:o,errorButtonText:u.errorButtonText,inProgressMessage:u.inProgressMessage,noResultsMessage:u.noResultsMessage,successButtonText:u.successButtonText,useSelectReference:l,resultsMapper:n}),a[5]=i,a[6]=o,a[7]=u.errorButtonText,a[8]=u.inProgressMessage,a[9]=u.noResultsMessage,a[10]=u.successButtonText,a[11]=n,a[12]=c,a[13]=l,a[14]=r):r=a[14],r}).displayName||(h.displayName="GetGitHubDataButton")}catch{}try{(p=function(e){let t,n=(0,y.c)(7),{chatManager:r,functionCall:a,skillArgs:i}=e,o=`An error occurred when retrieving \u{201C}${i.name}\u{201D}`,s=`Getting Figma file \u{201C}${i.name}\u{201D}`,l=`Unable to retrieve \u{201C}${i.name}\u{201D}`,c=`Using result from \u{201C}${i.name}\u{201D}`;return n[0]!==r||n[1]!==a||n[2]!==o||n[3]!==s||n[4]!==l||n[5]!==c?(t=(0,g.jsx)(J,{chatManager:r,errorButtonText:o,errorTitle:"An error occurred retrieving Figma file",toolLink:"https://figma.com",toolName:"Get Figma",functionCall:a,inProgressMessage:s,noResultsMessage:l,resultsMapper:et,successButtonText:c,useSelectReference:!1}),n[0]=r,n[1]=a,n[2]=o,n[3]=s,n[4]=l,n[5]=c,n[6]=t):t=n[6],t}).displayName||(p.displayName="FigmaButton")}catch{}try{(f=function(e){let t,n,r=(0,y.c)(8),{chatManager:a,functionCall:i,skillArgs:o}=e,s=o.rawUserQuery;r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,g.jsx)(w.A,{href:en,rel:"nofollow",target:"_blank",children:"Information on using Copilot in GitHub Support"}),r[0]=t):t=r[0];let l=`An error occurred when searching for \u{201C}${s}\u{201D}`,c=`Searching support documents for \u{201C}${s}\u{201D}`,d=`No support documents for \u{201C}${s}\u{201D} were found`,u=`Using support search results for \u{201C}${s}\u{201D}`;return r[1]!==a||r[2]!==i||r[3]!==l||r[4]!==c||r[5]!==d||r[6]!==u?(n=(0,g.jsx)(J,{additionalFooterContent:t,chatManager:a,errorButtonText:l,errorTitle:"An error occurred when searching support documents",toolLink:en,toolName:"Support Search",functionCall:i,inProgressMessage:c,noResultsMessage:d,resultsMapper:er,successButtonText:u,useSelectReference:!1}),r[1]=a,r[2]=i,r[3]=l,r[4]=c,r[5]=d,r[6]=u,r[7]=n):n=r[7],n}).displayName||(f.displayName="SupportSearchButton")}catch{}let eo=()=>{let e,t=(0,y.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,g.jsx)(v.SearchIcon,{}),t[0]=e):e=t[0],e},es=()=>{let e,t=(0,y.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,g.jsx)(v.FileIcon,{}),t[0]=e):e=t[0],e},el=()=>{let e,t=(0,y.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,g.jsx)(v.TagIcon,{}),t[0]=e):e=t[0],e},ec=()=>{let e,t=(0,y.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,g.jsx)(v.PlayIcon,{}),t[0]=e):e=t[0],e},ed=()=>{let e,t=(0,y.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,g.jsx)(v.BookIcon,{}),t[0]=e):e=t[0],e},eu=()=>{let e,t=(0,y.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,g.jsx)(v.CommentDiscussionIcon,{}),t[0]=e):e=t[0],e},em=()=>{let e,t=(0,y.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,g.jsx)(v.TasklistIcon,{}),t[0]=e):e=t[0],e},eh=()=>{let e,t=(0,y.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,g.jsx)(eh,{}),t[0]=e):e=t[0],e},ep="planning response";function ef(e){let t,n,r,a,i=(0,y.c)(10),{maxWidth:o,functionMetadata:s}=e;return i[0]!==s?(t=s.icon(),i[0]=s,i[1]=t):t=i[1],i[2]!==o?(n={maxWidth:o},i[2]=o,i[3]=n):n=i[3],i[4]!==s.completedText||i[5]!==n?(r=(0,g.jsx)(_.PA,{title:s.completedText,sx:n,children:s.completedText}),i[4]=s.completedText,i[5]=n,i[6]=r):r=i[6],i[7]!==t||i[8]!==r?(a=(0,g.jsxs)(g.Fragment,{children:[t,r]}),i[7]=t,i[8]=r,i[9]=a):a=i[9],a}function eg(e){let t,n,r,a,i=(0,y.c)(10),{maxWidth:o,functionMetadata:s}=e;return i[0]!==s?(t=s.icon(),i[0]=s,i[1]=t):t=i[1],i[2]!==o?(n={maxWidth:o},i[2]=o,i[3]=n):n=i[3],i[4]!==s.loadingText||i[5]!==n?(r=(0,g.jsx)(_.PA,{title:s.loadingText,sx:n,children:s.loadingText}),i[4]=s.loadingText,i[5]=n,i[6]=r):r=i[6],i[7]!==t||i[8]!==r?(a=(0,g.jsxs)(g.Fragment,{children:[t,r]}),i[7]=t,i[8]=r,i[9]=a):a=i[9],a}function ey(e){let t,n,r,a,i=(0,y.c)(10),{functionCall:o,functionMetadata:s}=e;return i[0]!==s.activeSkillText?(t=(0,g.jsxs)(b.A,{as:"h3",className:M.errorHeading,children:["An error occurred while ",s.activeSkillText]}),i[0]=s.activeSkillText,i[1]=t):t=i[1],i[2]!==o.errorMessage?(n=(0,g.jsx)("p",{className:M.errorMessage,children:o.errorMessage}),i[2]=o.errorMessage,i[3]=n):n=i[3],i[4]!==s.name?(r=(0,g.jsxs)("p",{className:M.toolDescriptionText,children:["Copilot used the ",(0,g.jsx)("span",{className:M.toolNameHighlight,children:s.name})," tool"]}),i[4]=s.name,i[5]=r):r=i[5],i[6]!==t||i[7]!==n||i[8]!==r?(a=(0,g.jsxs)("div",{className:M.errorContainer,children:[t,n,r]}),i[6]=t,i[7]=n,i[8]=r,i[9]=a):a=i[9],a}function ex(e){let t,n=(0,y.c)(4),{functionCall:r,functionMetadata:a,panelWidth:i}=e,o=i?i-130:C.Jt.DEFAULT_PANEL_WIDTH;if(n[0]!==r||n[1]!==a||n[2]!==o){let e=r?.status==="error"?(0,g.jsx)(ey,{functionCall:r,functionMetadata:a}):r?.status==="completed"?(0,g.jsx)(ef,{maxWidth:o,functionMetadata:a}):(0,g.jsx)(eg,{maxWidth:o,functionMetadata:a});t=(0,g.jsx)("div",{className:M.functionTitleContainer,children:e}),n[0]=r,n[1]=a,n[2]=o,n[3]=t}else t=n[3];return t}function ev(e){if(!e)return ep;let t=function(e){if(e)return(e=>{switch(e.kind){case"bing-search":return{id:"bing-search",referenceType:"web-search",loadingText:`Using Bing to search for "${e.query}"`,completedText:`Bing results for "${e.query}"`,icon:x._,name:"Bing search",activeSkillText:"searching Bing"};case"lexical-code-search":return{id:"codesearch",loadingText:`Search for "${e.query}" in "${e.scopingQuery}"`,completedText:`Search results for "${e.query}" in "${e.scopingQuery}"`,icon:eo,name:"Code search",activeSkillText:"searching the codebase"};case"semantic-code-search":return{id:"codesearch",loadingText:`Search for "${e.query}" in "${e.repoOwner}/${e.repoName}"`,completedText:`Search results for "${e.query}" in "${e.repoOwner}/${e.repoName}"`,icon:eo,name:"Code search",activeSkillText:"searching the codebase"};case"kb-search":return{id:"kb-search",loadingText:`Searching for "${e.query}" in the knowledge base`,completedText:`Knowledge base search results for "${e.query}"`,icon:ed,name:"Knowledge base search",activeSkillText:"searching the knowledge base"};case"getalert":return{id:"getalert",loadingText:"Retrieving information about alerts",completedText:"Including information about alerts",icon:()=>(0,g.jsx)(v.ShieldIcon,{}),name:"Get alert",activeSkillText:"getting alert"};case"get-github-data":return{id:"get-github-data",loadingText:`Fetching ${e.endpoint}`,completedText:`Results of ${e.endpoint}`,icon:el,name:"Get GitHub Data",activeSkillText:"getting data"};case"get-actions-job-logs":{let t=Q(e),n=t.charAt(0).toUpperCase()+t.slice(1);return{id:"get-actions-jog-logs",loadingText:`Retrieving ${t} in ${e.repo}`,completedText:`${n} in ${e.repo}`,icon:ec,name:"Get job logs",activeSkillText:"getting job logs"}}case"getdiscussion":return{id:"getdiscussion",loadingText:`Fetching discussion ${e.discussionNumber}`,completedText:`Details about discussion #${e.discussionNumber}`,icon:eu,name:"Get discussion",activeSkillText:"getting discussion"};case"getfile":return{id:"getfile",loadingText:"Searching for file",completedText:"Using results of get file",icon:es,name:"Get file",activeSkillText:"searching for file"};case"getfilechanges":return{id:"getfilechanges",loadingText:"Searching for file changes",completedText:`File changes for ${e.path} in ${e.repo}`,icon:es,name:"Get file changes",activeSkillText:"searching for file changes"};case"planskill":return{id:"planskill",loadingText:"Planning response...",completedText:"Plan created",icon:em,name:"Plan skill",activeSkillText:"planning response"};case"support-search":return{id:"supportsearch",loadingText:"Searching for support documents",completedText:"Using results of support search",icon:ed,name:"Support search",activeSkillText:"searching for support documents"};case"get-figma":return{id:"getfigma",loadingText:"Analyzing Figma file",completedText:"Using results of Figma file",icon:ed,name:"Get Figma",activeSkillText:"analyzing Figma file"};case"codesearchagentskill":return{id:"codesearchagentskill",loadingText:"Using the code search agent",completedText:"Using results of code search agent",icon:ed,name:"Code Search Agent",activeSkillText:"searching the codebase"};case"github-draft-issue.draft-issue":{let t,n;return e.issueNumber?(t=e.repository?`Drafting update for @${e.repository}/issues/${e.issueNumber}`:"Drafting update",n=e.repository?`Drafted update for @${e.repository}/issues/${e.issueNumber}`:"Drafted update"):(t=e.repository?`Drafting issue in ${e.repository}`:"Drafting issue",n=e.repository?`Drafted issue in ${e.repository}`:"Drafted issue"),{id:"github-draft-issue.draft-issue",loadingText:t,completedText:n,icon:eh,name:"GitHub Draft Issue Step: Draft Issue",activeSkillText:t.toLowerCase()}}case"github-draft-issue.existing-issue":{let t=e.repository?`Drafting issue in ${e.repository}`:"Drafting issue";return{id:"github-draft-issue.existing-issue",loadingText:t,completedText:e.repository?`Drafted issue in ${e.repository}`:"Drafted issue",icon:eh,name:"GitHub Draft Issue Step: Existing Issue",activeSkillText:t.toLowerCase()}}case"github-draft-issue.repository-metadata":{let t=`Fetching metadata from ${e.repository}`;return{id:"github-draft-issue.repository-metadata",loadingText:t,completedText:`Using metadata from ${e.repository}`,icon:eh,name:"GitHub Draft Issue Step: Repository Metadata",activeSkillText:t.toLowerCase()}}case"github-draft-issue.get-issues":{let t=(e.issueRefs||[]).length>1?"Fetching issues":"Fetching issue";return{id:"github-draft-issue.get-issues",loadingText:t,completedText:(e.issueRefs||[]).length>1?"Fetched issues":"Fetched issue",icon:eh,name:"GitHub Draft Issue Step: Get Issues",activeSkillText:t.toLowerCase()}}}})({...JSON.parse(e?.arguments||"{}"),kind:e.slug})}(e);return e.statusMessage??t?.activeSkillText??ep}try{eo.displayName||(eo.displayName="CodeSearchIcon")}catch{}try{es.displayName||(es.displayName="GetFileIcon")}catch{}try{el.displayName||(el.displayName="ReleaseIcon")}catch{}try{ec.displayName||(ec.displayName="JobIcon")}catch{}try{ed.displayName||(ed.displayName="KnowledgeBaseIcon")}catch{}try{eu.displayName||(eu.displayName="DiscussionIcon")}catch{}try{em.displayName||(em.displayName="PlanIcon")}catch{}try{eh.displayName||(eh.displayName="IssueDraftIcon")}catch{}try{ef.displayName||(ef.displayName="FunctionCompleted")}catch{}try{eg.displayName||(eg.displayName="FunctionLoading")}catch{}try{ey.displayName||(ey.displayName="FunctionError")}catch{}try{ex.displayName||(ex.displayName="FunctionTitle")}catch{}},31958:(e,t,n)=>{n.d(t,{h:()=>l});var r=n(74848),a=n(21728),i=n(97949),o=n(34164);let s={interruptedBanner:"InterruptedBanner-module__interruptedBanner--o4zN7",hasContent:"InterruptedBanner-module__hasContent--eZVJ0"};function l(e){let t,n,l=(0,a.c)(4),{messageHasContent:c}=e,d=c&&s.hasContent;return l[0]!==d?(t=(0,o.$)(s.interruptedBanner,d),l[0]=d,l[1]=t):t=l[1],l[2]!==t?(n=(0,r.jsx)(i.l,{className:t,"data-testid":"chat-message-interrupted",description:"Copilot was interrupted before it could finish this message.",hideTitle:!0,title:"Message interrupted",variant:"info"}),l[2]=t,l[3]=n):n=l[3],n}try{l.displayName||(l.displayName="InterruptedBanner")}catch{}},54508:(e,t,n)=>{n.d(t,{E:()=>u});var r=n(74848),a=n(21728),i=n(73077),o=n(21373),s=n(15042),l=n(96540);let c={dialog:"InterviewSurveyDialog-module__dialog--VJeZO",body:"InterviewSurveyDialog-module__body--GX6c_",primaryText:"InterviewSurveyDialog-module__primaryText--H2SlC InterviewSurveyDialog-module__text--WPIpz",secondaryText:"InterviewSurveyDialog-module__secondaryText--SQrin InterviewSurveyDialog-module__text--WPIpz",surveyLink:"InterviewSurveyDialog-module__surveyLink--XKIEl",noThanksButton:"InterviewSurveyDialog-module__noThanksButton--yLSzs"};function d(e,t){let n,d,u,m,h=(0,a.c)(10),{title:p,onClose:f}=e,g=void 0===p?"Give feedback":p,[y,x]=(0,l.useState)(!1);h[0]===Symbol.for("react.memo_cache_sentinel")?(n=()=>({openDialog:()=>x(!0)}),h[0]=n):n=h[0],(0,l.useImperativeHandle)(t,n),h[1]!==f?(d=e=>{x(!1),f?.(e)},h[1]=f,h[2]=d):d=h[2];let v=d;h[3]!==v?(u=()=>(0,r.jsxs)("div",{className:c.body,children:[(0,r.jsx)("img",{alt:"Mona and Copilot flying a Hubot-themed spaceship",src:"/images/modules/copilot-chat/mona-copilot-hubot-spaceship.png",srcSet:"/images/modules/copilot-chat/mona-copilot-hubot-spaceship@2x.png 2x"}),(0,r.jsx)("span",{className:c.primaryText,children:"Would you like to participate in our research?"}),(0,r.jsx)("span",{className:c.secondaryText,children:"You will be compensated for your time"}),(0,r.jsx)(i.z,{variant:"primary",className:c.surveyLink,href:"/github-copilot/chat/feedback/interview-survey",target:"_blank",children:"Book a session"}),(0,r.jsx)(o.Q,{variant:"link",className:c.noThanksButton,onClick:()=>v("no-thanks"),children:"No, thanks"})]}),h[3]=v,h[4]=u):u=h[4];let b=u;return h[5]!==v||h[6]!==y||h[7]!==b||h[8]!==g?(m=y&&(0,r.jsx)(s.l,{className:c.dialog,onClose:()=>v("close"),title:g,renderBody:b}),h[5]=v,h[6]=y,h[7]=b,h[8]=g,h[9]=m):m=h[9],m}let u=(0,l.forwardRef)(d);try{d.displayName||(d.displayName="InterviewSurveyDialogInner")}catch{}try{u.displayName||(u.displayName="InterviewSurveyDialog")}catch{}},93412:(e,t,n)=>{n.d(t,{h:()=>s});var r=n(74848),a=n(21728),i=n(1805);let o={container:"LegalDisclaimer-module__container--lNe5E"},s=()=>{let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsxs)("span",{className:o.container,children:[(0,r.jsx)(i.A,{href:"https://docs.github.com/en/copilot/responsible-use-of-github-copilot-features/responsible-use-of-github-copilot-chat-in-githubcom",inline:!0,muted:!0,children:"Copilot"})," ","uses AI. Check for mistakes."]}),t[0]=e):e=t[0],e};try{s.displayName||(s.displayName="LegalDisclaimer")}catch{}},35673:(e,t,n)=>{n.d(t,{UJ:()=>y,E5:()=>c,Dq:()=>d,Gj:()=>u,f1:()=>m,cB:()=>h,zc:()=>p,Cb:()=>f,hl:()=>g});var r=n(74848),a=n(21728),i=n(56149),o=n(1992),s=n(96540);let l={chatPortalContainer:"PortalContainerUtils-module__chatPortalContainer--Otmle",menuPortalContainer:"PortalContainerUtils-module__menuPortalContainer--D7AeL"},c="copilotChatMenuPortalRoot",d="copilotChatMessagesMenuPortalRoot",u="copilotChatPortalRoot",m="copilotChatTopicPickerPortalRoot",h=()=>{let e,t,n,o=(0,a.c)(3),c=(0,s.useRef)(null);return o[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{(0,i.cw)(c.current,u)},t=[],o[0]=e,o[1]=t):(e=o[0],t=o[1]),(0,s.useEffect)(e,t),o[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)("div",{ref:c,className:l.chatPortalContainer}),o[2]=n):n=o[2],n},p=()=>{let e,t,n,o=(0,a.c)(3),d=(0,s.useRef)(null);return o[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{(0,i.cw)(d.current,c)},t=[],o[0]=e,o[1]=t):(e=o[0],t=o[1]),(0,s.useEffect)(e,t),o[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)("div",{ref:d,className:l.menuPortalContainer}),o[2]=n):n=o[2],n},f=()=>{let e,t,n,o=(0,a.c)(3),l=(0,s.useRef)(null);return o[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{(0,i.cw)(l.current,d)},t=[],o[0]=e,o[1]=t):(e=o[0],t=o[1]),(0,s.useEffect)(e,t),o[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)("div",{ref:l}),o[2]=n):n=o[2],n},g=()=>{let e,t,n,o=(0,a.c)(3),l=(0,s.useRef)(null);return o[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{(0,i.cw)(l.current,m)},t=[],o[0]=e,o[1]=t):(e=o[0],t=o[1]),(0,s.useEffect)(e,t),o[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)("div",{ref:l}),o[2]=n):n=o[2],n},y=e=>{let t,n,i,l,d,u,m=(0,a.c)(10);m[0]!==e?({children:t,portalContainerName:i,...n}=e,m[0]=e,m[1]=t,m[2]=n,m[3]=i):(t=m[1],n=m[2],i=m[3]);let[h,p]=(0,s.useState)(x);if(m[4]===Symbol.for("react.memo_cache_sentinel")?(l=()=>p(!0),d=[],m[4]=l,m[5]=d):(l=m[4],d=m[5]),(0,s.useEffect)(l,d),!h)return null;let f=i||c;return m[6]!==t||m[7]!==n||m[8]!==f?(u=(0,r.jsx)(o.W.Overlay,{...n,portalContainerName:f,children:t}),m[6]=t,m[7]=n,m[8]=f,m[9]=u):u=m[9],u};try{h.displayName||(h.displayName="ChatPortalContainer")}catch{}try{p.displayName||(p.displayName="MenuPortalContainer")}catch{}try{f.displayName||(f.displayName="MessagesPortalContainer")}catch{}try{g.displayName||(g.displayName="TopicPickerPortalContainer")}catch{}try{y.displayName||(y.displayName="ActionMenuOverlay")}catch{}function x(){return"undefined"!=typeof document}},1631:(e,t,n)=>{n.d(t,{BR:()=>_,a_:()=>C,lh:()=>j});var r,a=n(74848),i=n(21728),o=n(41738),s=n(49851),l=n(38621),c=n(69726),d=n(26108),u=n(40090),m=n(34164),h=n(96540),p=n(25641),f=n(2635),g=n(33592),y=n(23967),x=n(89237),v=n(15518),b=n(26100);let _=(0,h.forwardRef)(function(e,t){let n,r,o,s,c,d,y,x,_,w,S,I=(0,i.c)(43),{reference:T,message:k,onClick:R,onRemove:A,size:E,fullWidth:L,getReferenceVersion:M}=e,F=(0,g.b)(),P=(0,f.pn)(N),D=(0,f.A3)("selectedThreadID"),$=(0,p.P)((0,f.A3)("currentTopic")),O=(0,h.useId)();if(!(0,p.vg)().has(T.type))return null;I[0]!==A?(n=e=>{A&&("Delete"===e.key||"Backspace"===e.key)&&(e.preventDefault(),A())},I[0]=A,I[1]=n):n=I[1];let B=n;I[2]!==P||I[3]!==F||I[4]!==k||I[5]!==R||I[6]!==T||I[7]!==D?(r=e=>{if(!R||(R(T,e),!e.defaultPrevented)){if(!P){if(("issue"===T.type||"pull-request"===T.type||"discussion"===T.type)&&(window.open(T.url,"_blank"),self.focus()),["file","thread-scoped-file"].includes(T.type)){let e=D?`/copilot/c/${D}`:"/copilot";e+=`?reference_id=${(0,p.Vb)(T)}`,k&&(e+=`&message_index=${k.messageIndex}`),window.open(e,"_blank");return}["repository","folder","docset","third-party","image","issue","pull-request","loop-node","github-url"].includes(T.type)||(e.preventDefault(),F.selectReference(T))}}},I[2]=P,I[3]=F,I[4]=k,I[5]=R,I[6]=T,I[7]=D,I[8]=r):r=I[8];let U=r,z=C(T,$);I[9]!==M||I[10]!==T?(o=M?.(T),I[9]=M,I[10]=T,I[11]=o):o=I[11];let W=o;I[12]!==T?(s=(0,p.JP)(T),I[12]=T,I[13]=s):s=I[13];let V="small"===E&&v.A.small,q=L&&v.A.fullWidth;I[14]!==V||I[15]!==q?(c=(0,m.$)(v.A.referenceToken,V,q),I[14]=V,I[15]=q,I[16]=c):c=I[16];let G=A&&O;return I[17]!==z||I[18]!==T.type?(d=z&&(0,a.jsx)(z,{size:"small",className:(0,m.$)(v.A.icon,z===l.IssueOpenedIcon&&v.A.openIcon,z===l.GitPullRequestIcon&&v.A.openIcon,z===l.IssueClosedIcon&&v.A.closedIcon,z===l.GitPullRequestClosedIcon&&v.A.pullRequestClosedIcon,z===l.GitMergeIcon&&v.A.pullRequestMergedIcon),"data-testid":"loading"===T.type?"reference-token-loading":void 0}),I[17]=z,I[18]=T.type,I[19]=d):d=I[19],I[20]!==T?(y="loading"===T.type?(0,a.jsx)("span",{className:v.A.loadingName,children:(0,a.jsx)(u.r,{"aria-hidden":"true"})}):(0,a.jsx)("span",{className:v.A.name,children:(0,p.z$)(T)}),I[20]=T,I[21]=y):y=I[21],I[22]!==T.range||I[23]!==T.type?(x="thread-scoped-snippet"===T.type&&T.range&&(0,a.jsx)("span",{className:v.A.description,children:T.range.start===T.range.end?`L${T.range.start}`:`L${T.range.start}-L${T.range.end}`}),I[22]=T.range,I[23]=T.type,I[24]=x):x=I[24],I[25]!==W?(_=void 0!==W&&(0,a.jsx)("span",{className:v.A.trailingVisual,children:(0,a.jsx)(b.g,{version:W})}),I[25]=W,I[26]=_):_=I[26],I[27]!==O||I[28]!==A||I[29]!==E?(w=A&&(0,a.jsx)(j,{size:E,onRemove:A,descriptionId:O}),I[27]=O,I[28]=A,I[29]=E,I[30]=w):w=I[30],I[31]!==U||I[32]!==B||I[33]!==t||I[34]!==y||I[35]!==x||I[36]!==_||I[37]!==w||I[38]!==s||I[39]!==c||I[40]!==G||I[41]!==d?(S=(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("a",{href:s,className:c,onKeyDown:B,onClick:U,ref:t,"aria-describedby":G,children:[d,y,x,_,w]})}),I[31]=U,I[32]=B,I[33]=t,I[34]=y,I[35]=x,I[36]=_,I[37]=w,I[38]=s,I[39]=c,I[40]=G,I[41]=d,I[42]=S):S=I[42],S});function C(e,t){switch(e.type){case"figma":return w;case"file":return l.FileIcon;case"folder":return l.FileDirectoryFillIcon;case"file-diff":return l.FileDiffIcon;case"snippet":return t&&"languageName"in e&&e.languageName&&y.Yr.has(e.languageName)?l.BookIcon:l.CodeIcon;case"repository":return l.RepoIcon;case"symbol":return l.CodeSquareIcon;case"docset":return l.BookIcon;case"commit":return l.GitCommitIcon;case"pull-request":if("pull-request"===e.type){if(e.draft&&"open"===e.state)return l.GitPullRequestDraftIcon;switch(e.state){case"open":default:return l.GitPullRequestIcon;case"closed":return l.GitPullRequestClosedIcon;case"merged":return l.GitMergeIcon}}return;case"repo-instructions":case"org-instructions":return l.NoteIcon;case"issue":if("issue"===e.type)switch(e.state){case"open":default:return l.IssueOpenedIcon;case"closed":return l.IssueClosedIcon;case"not_planned":return l.SkipIcon}return;case"draft-issue":case"draft-update-issue":return l.IssueDraftIcon;case"discussion":return l.CommentDiscussionIcon;case"web-search-result":if("web-search-result"===e.type)if("bing_search"===e.reference_type)return o._;else return l.GlobeIcon;return;case"thread-scoped-file":case"thread-scoped-snippet":return"language"in e&&y.Yr.has(e.language)?l.MarkdownIcon:l.CodeIcon;case"loop-node":return S;case"loading":return c.A;case"copilot-space":return l.SpaceIcon;case"github-url":return l.LinkIcon;default:return}}function w(){let e,t=(0,i.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("div",{className:v.A.figmaIconOuter,children:(0,a.jsx)(x._,{className:v.A.figmaIcon})}),t[0]=e):e=t[0],e}function S(){let e,t=(0,i.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("div",{className:v.A.nodeIconOuter,children:(0,a.jsx)(s.GS,{size:16})}),t[0]=e):e=t[0],e}let j=e=>{let t,n,r,o,s=(0,i.c)(12),{size:c,onRemove:u,descriptionId:m,onMouseOver:h,onMouseLeave:p}=e;return s[0]!==u?(t=e=>{e.stopPropagation(),e.preventDefault(),u()},s[0]=u,s[1]=t):t=s[1],s[2]!==p||s[3]!==h||s[4]!==c||s[5]!==t?(n=(0,a.jsx)(d.K,{tabIndex:-1,"aria-hidden":!0,size:c,icon:l.XIcon,"aria-label":"Remove",onClick:t,tooltipDirection:"n",variant:"invisible",className:v.A.removeButton,onMouseOver:h,onMouseLeave:p}),s[2]=p,s[3]=h,s[4]=c,s[5]=t,s[6]=n):n=s[6],s[7]!==m?(r=(0,a.jsx)("span",{hidden:!0,id:m,children:"press backspace or delete to remove"}),s[7]=m,s[8]=r):r=s[8],s[9]!==n||s[10]!==r?(o=(0,a.jsxs)(a.Fragment,{children:[n,r]}),s[9]=n,s[10]=r,s[11]=o):o=s[11],o};try{_.displayName||(_.displayName="ReferenceToken")}catch{}try{(r=Icon).displayName||(r.displayName="Icon")}catch{}try{w.displayName||(w.displayName="StylizedFigmaIcon")}catch{}try{S.displayName||(S.displayName="StylizedNodeIcon")}catch{}try{j.displayName||(j.displayName="RemoveReferenceTokenButton")}catch{}function N(e){return"immersive"===e.mode}},87086:(e,t,n)=>{n.d(t,{FZ:()=>j,X1:()=>T});var r,a=n(74848),i=n(21728),o=n(69599),s=n(53419),l=n(33544),c=n(29731),d=n(5524),u=n(18096),m=n(34164),h=n(96540),p=n(40961),f=n(26408),g=n(26875),y=n(25641),x=n(79064),v=n(2635),b=n(33592),_=n(70845),C=n(35673);let w={ActionList:"RepoSelectPanel-module__ActionList--ud9yE",emptyStateMessage:"RepoSelectPanel-module__emptyStateMessage--qQwDm",CopilotRepoSelectPanelAnchored:"RepoSelectPanel-module__CopilotRepoSelectPanelAnchored--mTBrm"};var S=n(27844);function j(e){let t,n,r,o,s=(0,i.c)(12),{currentReferences:l}=(0,v.Pk)(),c=(0,b.b)();s[0]!==l?(n=new Set((t=l.filter(I)).map(N)),s[0]=l,s[1]=t,s[2]=n):(t=s[1],n=s[2]);let d=n,[u,m]=(0,h.useState)();s[3]!==c||s[4]!==e||s[5]!==t?(r=async n=>{m(void 0);let r=t.find(e=>e.id===n);if(r)return void c.removeReference(r);let a=await c.service.fetchRepo(n);if(!a.ok){m("Error: failed to attach repository. Please try again."),e.onOpenChange(!0);return}let i=(0,y.qS)(a.payload);c.addReference(i,"repoMenu")},s[3]=c,s[4]=e,s[5]=t,s[6]=r):r=s[6];let p=r;return s[7]!==u||s[8]!==e||s[9]!==d||s[10]!==p?(o=(0,a.jsx)(T,{...e,selectionVariant:"multiple",selectedRepoIds:d,onSelectRepo:p,description:"Choose repositories to chat about.",error:u}),s[7]=u,s[8]=e,s[9]=d,s[10]=p,s[11]=o):o=s[11],o}function N(e){return e.id}function I(e){return"repository"===e.type}function T(e){let t,n,r,y,x,b,j,N,I,T,A,E,L,M,F,P,D,$,O,B,U,z=(0,i.c)(59),{open:W,onOpenChange:V,submitReturnFocusRef:q,cancelReturnFocusRef:G,selectedRepoIds:H,featuredRepoIds:K,onSelectRepo:Z,selectionVariant:Q,description:J,error:Y,ownerDisplayLogin:X,includeForks:ee,anchorRef:et}=e,en=void 0===K?H:K,{ssoOrganizations:er}=(0,v.Pk)(),[ea,ei]=(0,h.useState)("");z[0]!==W?(t=()=>{W||ei("")},n=[W],z[0]=W,z[1]=t,z[2]=n):(t=z[1],n=z[2]),(0,h.useEffect)(t,n);let{repositories:eo,loading:es}=(0,f.U)(ea,W,void 0,X,void 0!==ee&&ee);e:{if(es){r="Loading repositories";break e}if(0===eo.length){r="No repositories found";break e}if(1===eo.length){r="1 repository found";break e}r=`${eo.length} repositories found`}let el=r;z[3]===Symbol.for("react.memo_cache_sentinel")?(y=e=>{ei(e.currentTarget.value)},z[3]=y):y=z[3];let ec=y;t:{let e;if(!er){let e;z[4]===Symbol.for("react.memo_cache_sentinel")?(e=[],z[4]=e):e=z[4],x=e;break t}z[5]!==er?(e=er.map(R),z[5]=er,z[6]=e):e=z[6],x=e}let ed=x;z[7]!==en?(b=e=>en.has(e.databaseId)?"featuredRepos":"nonFeaturedRepos",z[7]=en,z[8]=b):b=z[8];let{featuredRepos:eu,nonFeaturedRepos:em}=(0,g.O)(eo,b),[eh,ep]=(0,h.useState)(!1);z[9]!==Z?(j=async e=>{ep(!0),await Z(e),ep(!1)},z[9]=Z,z[10]=j):j=z[10];let ef=j;z[11]===Symbol.for("react.memo_cache_sentinel")?(N=(0,c.G)("repo-select-panel"),z[11]=N):N=z[11];let eg=u.X,ey=et&&w.CopilotRepoSelectPanelAnchored;z[12]!==ey?(I=(0,m.$)(ey),z[12]=ey,z[13]=I):I=z[13],z[14]!==G||z[15]!==V?(T=()=>{(0,p.flushSync)(()=>V(!1)),G.current?.focus(),(0,s.BI)("dotcom_chat.activate",{target:"REPOSITORY_DIALOG_CLOSE",mode:"immersive"})},z[14]=G,z[15]=V,z[16]=T):T=z[16],z[17]!==V||z[18]!==q?(A=()=>{(0,p.flushSync)(()=>V(!1)),q.current?.focus()},z[17]=V,z[18]=q,z[19]=A):A=z[19];let ex=et?"anchored":"modal",ev="multiple"===Q?"Select repositories":"Select a repository",eb=ed.length>0&&"border-bottom-0";z[20]!==eb?(E=(0,m.$)(eb),z[20]=eb,z[21]=E):E=z[21];let e_=!0===es||eh;z[22]!==e_?(L=(0,a.jsx)(u.X.SearchInput,{loading:e_,onChange:ec,placeholder:"Search repositories","aria-label":"Search repositories"}),z[22]=e_,z[23]=L):L=z[23],z[24]!==E||z[25]!==L?(M=(0,a.jsx)(u.X.Header,{className:E,children:L}),z[24]=E,z[25]=L,z[26]=M):M=z[26],z[27]!==X||z[28]!==ed?(F=(void 0===X||""===X)&&!(0,o.G7)("global_sso_banner")&&(0,a.jsx)(l.x,{portalContainerName:C.f1,protectedOrgs:ed,redirectURI:k,useFullWidthStyle:!0}),z[27]=X,z[28]=ed,z[29]=F):F=z[29],z[30]===Symbol.for("react.memo_cache_sentinel")?(P=(0,a.jsx)(C.hl,{}),z[30]=P):P=z[30],z[31]!==Y?(D=Y&&(0,a.jsx)(u.X.Message,{variant:"error",size:"inline",children:Y}),z[31]=Y,z[32]=D):D=z[32];let eC=d.l;z[33]!==el?($=(0,a.jsx)("div",{className:"sr-only",children:el}),z[33]=el,z[34]=$):$=z[34];let ew="initial"===es?(0,a.jsx)(u.X.Loading,{children:"Fetching repositories\u2026"}):0!==eo.length||es?(0,a.jsxs)(a.Fragment,{children:[eu?.map(e=>(0,a.jsx)(S.W,{repo:e,onSelect:ef,selected:H.has(e.databaseId)},e.databaseId)),eu&&em&&(0,a.jsx)(d.l.Divider,{}),em?.map(e=>(0,a.jsx)(S.W,{repo:e,onSelect:ef,selected:H.has(e.databaseId)},e.databaseId))]}):(0,a.jsx)("div",{className:w.emptyStateMessage,children:(0,a.jsx)(_.O,{delay:750,children:(0,a.jsx)(u.X.Message,{variant:"empty",title:"No repositories found",children:"Try a different search term"})})});return z[35]!==eC||z[36]!==w.ActionList||z[37]!==$||z[38]!==ew?(O=(0,a.jsxs)(eC,{className:w.ActionList,children:[$,ew]}),z[35]=eC,z[36]=w.ActionList,z[37]=$,z[38]=ew,z[39]=O):O=z[39],z[40]!==eg||z[41]!==et||z[42]!==J||z[43]!==W||z[44]!==Q||z[45]!==I||z[46]!==T||z[47]!==A||z[48]!==ex||z[49]!==ev||z[50]!==M||z[51]!==F||z[52]!==P||z[53]!==D||z[54]!==O?(B=(0,a.jsxs)(eg,{className:I,width:"large",maxHeight:"xlarge",onCancel:T,onSubmit:A,open:W,variant:ex,selectionVariant:Q,title:ev,description:J,anchorRef:et,children:[M,F,P,D,O]}),z[40]=eg,z[41]=et,z[42]=J,z[43]=W,z[44]=Q,z[45]=I,z[46]=T,z[47]=A,z[48]=ex,z[49]=ev,z[50]=M,z[51]=F,z[52]=P,z[53]=D,z[54]=O,z[55]=B):B=z[55],z[56]!==N||z[57]!==B?(U=(0,a.jsx)("div",{...N,children:B}),z[56]=N,z[57]=B,z[58]=U):U=z[58],U}function k(){return`/search/refresh_blackbird_caches?return_to=${location.href}`}function R(e){return e.login}try{(r=function(e){let t,n,r,o=(0,i.c)(9),{selectedThreadID:s,currentTopic:l}=(0,v.Pk)(),c=(0,b.b)();o[0]!==c||o[1]!==s?(t=async e=>{x.Jt.setSelectedTopic(s??"",e.toString()),c.clearCurrentReferences(["image","issue"]),await c.fetchCurrentRepo(e)},o[0]=c,o[1]=s,o[2]=t):t=o[2];let d=t;return o[3]!==l?(n=new Set(l?[l.id]:[]),o[3]=l,o[4]=n):n=o[4],o[5]!==d||o[6]!==e||o[7]!==n?(r=(0,a.jsx)(T,{...e,selectionVariant:"instant",selectedRepoIds:n,onSelectRepo:d,description:"Choose a repository to chat about."}),o[5]=d,o[6]=e,o[7]=n,o[8]=r):r=o[8],r}).displayName||(r.displayName="RepoTopicSelectPanel")}catch{}try{j.displayName||(j.displayName="RepoReferencesSelectPanel")}catch{}try{T.displayName||(T.displayName="RepoSelectPanel")}catch{}},27844:(e,t,n)=>{n.d(t,{W:()=>s});var r=n(74848),a=n(21728),i=n(77430),o=n(5524);function s(e){let t,n,s,l,c=(0,a.c)(14),{onSelect:d,repo:u,selected:m,trailingVisualComponent:h}=e,{databaseId:p,isInOrganization:f,nwo:g,ownerAvatarUrl:y}=u;return c[0]!==p||c[1]!==d?(t=()=>d(p),c[0]=p,c[1]=d,c[2]=t):t=c[2],c[3]!==f||c[4]!==y?(n=(0,r.jsx)(o.l.LeadingVisual,{children:(0,r.jsx)(i.r,{src:y,square:f,size:16})}),c[3]=f,c[4]=y,c[5]=n):n=c[5],c[6]!==h?(s=h&&(0,r.jsx)(o.l.TrailingVisual,{children:h}),c[6]=h,c[7]=s):s=c[7],c[8]!==g||c[9]!==m||c[10]!==t||c[11]!==n||c[12]!==s?(l=(0,r.jsxs)(o.l.Item,{onSelect:t,selected:m,children:[n,g,s]},g),c[8]=g,c[9]=m,c[10]=t,c[11]=n,c[12]=s,c[13]=l):l=c[13],l}try{s.displayName||(s.displayName="RepositoryListItem")}catch{}},42983:(e,t,n)=>{n.d(t,{$:()=>l});var r=n(74848),a=n(21728),i=n(38621),o=n(26108),s=n(12970);function l(e){let t,n,l=(0,a.c)(10),{handleRetryMessage:c,disabled:d,showModelPicker:u,model:m,navigateToNewThread:h}=e,p=void 0!==d&&d,f=void 0!==u&&u;l[0]!==c||l[1]!==m?(t=()=>{c(m)},l[0]=c,l[1]=m,l[2]=t):t=l[2];let g=t;if(f&&(!h||!m))throw Error("navigateToNewThread and model must be provided in order to show the model picker");return l[3]!==p||l[4]!==g||l[5]!==c||l[6]!==m||l[7]!==h||l[8]!==f?(n=f?(0,r.jsx)(s.Yb,{onNewThreadSelected:h,type:"message-retry",selectedModel:m,onModelSelected:c,disabled:p}):(0,r.jsx)(o.K,{variant:"invisible","aria-label":"Retry","data-testid":"retry-button",onClick:g,icon:i.SyncIcon,disabled:p}),l[3]=p,l[4]=g,l[5]=c,l[6]=m,l[7]=h,l[8]=f,l[9]=n):n=l[9],n}try{l.displayName||(l.displayName="RetryButton")}catch{}},95896:(e,t,n)=>{n.d(t,{M:()=>l});var r=n(74848),a=n(21728),i=n(11683),o=n(45800),s=n(96540);function l(e){let t,n,l,c,d=(0,a.c)(8);d[0]!==e?({className:t,...n}=e,d[0]=e,d[1]=t,d[2]=n):(t=d[1],n=d[2]);let u=(0,s.useRef)(null);return d[3]===Symbol.for("react.memo_cache_sentinel")?(l={containerRef:u,focusInStrategy:"first",focusOutBehavior:"stop",bindKeys:i.z0.ArrowHorizontal|i.z0.HomeAndEnd},d[3]=l):l=d[3],(0,o.G)(l),d[4]!==t||d[5]!==e.children||d[6]!==n?(c=(0,r.jsx)("div",{ref:u,className:t,role:"toolbar",...n,children:e.children}),d[4]=t,d[5]=e.children,d[6]=n,d[7]=c):c=d[7],c}try{l.displayName||(l.displayName="Toolbar")}catch{}},82151:(e,t,n)=>{n.d(t,{R:()=>h});var r=n(74848),a=n(21728),i=n(1805),o=n(34164),s=n(7277),l=n(99054),c=n(20330),d=n(16378),u=n(46665),m=n(6224);function h(e){let t,n,i,h,f,g,y=(0,a.c)(20),{className:x,accessibleHeader:v}=e,{message:b}=(0,u.V)(),_=b.content??"";y[0]!==_?(t=(0,d._)(_),y[0]=_,y[1]=t):t=y[1];let{availableAgents:C}=(0,l.JE)(t);if(y[2]!==v||y[3]!==x||y[4]!==b.references||y[5]!==C||y[6]!==_){let e=void 0===C?[]:C,t=(0,s.l)().use(c.U,{references:b.references??[],agents:e}).parse(_);y[10]!==v?(h=v&&(0,r.jsx)("h3",{className:"sr-only",children:v}),y[10]=v,y[11]=h):h=y[11],y[12]!==x?(n=(0,o.$)(m.A.container,x),y[12]=x,y[13]=n):n=y[13],i=t.children.map(p),y[2]=v,y[3]=x,y[4]=b.references,y[5]=C,y[6]=_,y[7]=n,y[8]=i,y[9]=h}else n=y[7],i=y[8],h=y[9];return y[14]!==n||y[15]!==i?(f=(0,r.jsx)("div",{className:n,children:i}),y[14]=n,y[15]=i,y[16]=f):f=y[16],y[17]!==h||y[18]!==f?(g=(0,r.jsxs)(r.Fragment,{children:[h,f]}),y[17]=h,y[18]=f,y[19]=g):g=y[19],g}function p(e,t){switch(e.type){case"text":return e.value;case"agent-mention":return(0,r.jsx)(f,{agent:e.data.mentionedAgent,children:e.value},t);case"reference-mention":return void 0!==e.data.mentionedReferenceId?(0,r.jsx)("span",{className:m.A.mention,children:e.value},t):e.value}}function f(e){let t,n=(0,a.c)(4),{agent:o,children:s}=e,l=`/integrations/${o.slug}/hovercard`;return n[0]!==o.integrationUrl||n[1]!==s||n[2]!==l?(t=(0,r.jsx)(i.A,{href:o.integrationUrl,"data-hovercard-url":l,className:m.A.mention,children:s}),n[0]=o.integrationUrl,n[1]=s,n[2]=l,n[3]=t):t=n[3],t}try{h.displayName||(h.displayName="UserMessage")}catch{}try{f.displayName||(f.displayName="AgentLink")}catch{}},26100:(e,t,n)=>{n.d(t,{g:()=>s});var r=n(74848),a=n(21728),i=n(72579);let o={version:"VersionName-module__version--FC1cb"};function s(e){let t,n=(0,a.c)(3),{"data-testid":s,version:l}=e;return n[0]!==s||n[1]!==l?(t=(0,r.jsxs)(i.A,{className:o.version,as:"span","data-testid":s,children:["v",l]}),n[0]=s,n[1]=l,n[2]=t):t=n[2],t}try{s.displayName||(s.displayName="VersionName")}catch{}},89237:(e,t,n)=>{n.d(t,{_:()=>i});var r=n(74848),a=n(21728);function i(e){let t,n,i,o,s,l=(0,a.c)(8);return l[0]!==e?({className:t,...n}=e,l[0]=e,l[1]=t,l[2]=n):(t=l[1],n=l[2]),l[3]===Symbol.for("react.memo_cache_sentinel")?(i=(0,r.jsxs)("g",{clipPath:"url(#clip0_216_3161)",children:[(0,r.jsx)("path",{d:"M7.99837 7.99967C7.99837 6.52683 9.1922 5.33301 10.665 5.33301C12.1379 5.33301 13.3317 6.52683 13.3317 7.99967C13.3317 9.47252 12.1379 10.6663 10.665 10.6663C9.1922 10.6663 7.99837 9.47252 7.99837 7.99967Z",fill:"#1ABCFE"}),(0,r.jsx)("path",{d:"M2.66504 13.3337C2.66504 11.8608 3.85886 10.667 5.33171 10.667H7.99837V13.3337C7.99837 14.8065 6.80455 16.0003 5.33171 16.0003C3.85886 16.0003 2.66504 14.8065 2.66504 13.3337Z",fill:"#0ACF83"}),(0,r.jsx)("path",{d:"M7.99837 0V5.33333H10.665C12.1379 5.33333 13.3317 4.13951 13.3317 2.66667C13.3317 1.19382 12.1379 0 10.665 0H7.99837Z",fill:"#FF7262"}),(0,r.jsx)("path",{d:"M2.665 2.66667C2.665 4.13951 3.85883 5.33333 5.33167 5.33333H7.99833V0H5.33167C3.85883 0 2.665 1.19382 2.665 2.66667Z",fill:"#F24E1E"}),(0,r.jsx)("path",{d:"M2.66504 7.99967C2.66504 9.47252 3.85886 10.6663 5.33171 10.6663H7.99837V5.33301H5.33171C3.85886 5.33301 2.66504 6.52683 2.66504 7.99967Z",fill:"#A259FF"})]}),l[3]=i):i=l[3],l[4]===Symbol.for("react.memo_cache_sentinel")?(o=(0,r.jsx)("defs",{children:(0,r.jsx)("clipPath",{id:"clip0_216_3161",children:(0,r.jsx)("rect",{width:"10.6667",height:"16",fill:"white",transform:"translate(2.665)"})})}),l[4]=o):o=l[4],l[5]!==t||l[6]!==n?(s=(0,r.jsxs)("svg",{"aria-label":"Figma logo",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,...n,children:[i,o]}),l[5]=t,l[6]=n,l[7]=s):s=l[7],s}try{i.displayName||(i.displayName="FigmaIcon")}catch{}},70845:(e,t,n)=>{n.d(t,{O:()=>o});var r=n(74848),a=n(21728),i=n(96540);let o=e=>{let t,n,o,s=(0,a.c)(6),{children:l,delay:c,assertive:d}=e,u=void 0===c?500:c,[m,h]=(0,i.useState)(!1);if(s[0]!==u?(t=()=>{h(!1);let e=setTimeout(()=>h(!0),u);return()=>clearTimeout(e)},n=[u,h],s[0]=u,s[1]=t,s[2]=n):(t=s[1],n=s[2]),(0,i.useEffect)(t,n),!m)return null;let p=void 0!==d&&d?"assertive":"polite";return s[3]!==l||s[4]!==p?(o=(0,r.jsx)("div",{role:"alert","aria-live":p,"aria-atomic":"true",children:l}),s[3]=l,s[4]=p,s[5]=o):o=s[5],o};try{o.displayName||(o.displayName="DelayedComponent")}catch{}},37178:(e,t,n)=>{n.d(t,{O:()=>C});var r=n(74848),a=n(21728),i=n(38621),o=n(5524),s=n(21998),l=n(10095),c=n(96540);function d(e){let t,n,i,o,l=(0,a.c)(5),{children:c}=e;return l[0]===Symbol.for("react.memo_cache_sentinel")?(t={overflow:"auto",maxHeight:"calc(100dvh - 64px - 52px)"},l[0]=t):t=l[0],l[1]===Symbol.for("react.memo_cache_sentinel")?(n={overflow:"hidden",backgroundColor:"canvas.default"},l[1]=n):n=l[1],l[2]===Symbol.for("react.memo_cache_sentinel")?(i={display:"flex",flexDirection:"column"},l[2]=i):i=l[2],l[3]!==c?(o=(0,r.jsx)(s.az,{sx:t,children:(0,r.jsx)(s.az,{sx:n,children:(0,r.jsx)(s.az,{sx:i,children:c})})}),l[3]=c,l[4]=o):o=l[4],o}function u(e){let t,n,o,l,c,d=(0,a.c)(9),{children:u,onDismiss:m}=e;return d[0]===Symbol.for("react.memo_cache_sentinel")?(t={display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:"16px",fontSize:1},d[0]=t):t=d[0],d[1]===Symbol.for("react.memo_cache_sentinel")?(n={display:"flex",flexDirection:"row",alignItems:"center",minWidth:0,"@media screen and (max-width: 768px)":{maxWidth:"80%"}},d[1]=n):n=d[1],d[2]!==u?(o=(0,r.jsx)(s.az,{sx:n,children:u}),d[2]=u,d[3]=o):o=d[3],d[4]!==m?(l=m&&(0,r.jsx)(s.K0,{unsafeDisableTooltip:!0,"aria-label":"Dismiss",icon:i.XIcon,onClick:m,variant:"invisible",sx:{flexShrink:0}}),d[4]=m,d[5]=l):l=d[5],d[6]!==o||d[7]!==l?(c=(0,r.jsxs)(s.DZ,{as:"h3",sx:t,children:[o,l]}),d[6]=o,d[7]=l,d[8]=c):c=d[8],c}function m(e){let t,n,i=(0,a.c)(3),{children:o}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t={borderBottom:"1px solid var(--borderColor-default, var(--color-border-default))",borderTop:"1px solid var(--borderColor-default, var(--color-border-default))",backgroundColor:"canvas.subtle",px:3,py:2},i[0]=t):t=i[0],i[1]!==o?(n=(0,r.jsx)(s.az,{sx:t,children:o}),i[1]=o,i[2]=n):n=i[2],n}function h(e){let t,n,o,d,u,m,h=(0,a.c)(11),{children:f,title:g,initiallyOpen:y}=e,[x,v]=(0,c.useState)(y??!1);h[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>v(p),h[0]=t):t=h[0],h[1]===Symbol.for("react.memo_cache_sentinel")?(n={borderRadius:0,backgroundColor:"canvas.default",border:"none",borderBottom:"1px solid var(--borderColor-default, var(--color-border-default))",'[data-component="buttonContent"]':{justifyContent:"start"}},h[1]=n):n=h[1];let b=x?i.ChevronDownIcon:i.ChevronRightIcon;h[2]===Symbol.for("react.memo_cache_sentinel")?(o={mr:2},h[2]=o):o=h[2],h[3]!==b?(d=(0,r.jsx)(l.A,{icon:b,sx:o}),h[3]=b,h[4]=d):d=h[4],h[5]!==d||h[6]!==g?(u=(0,r.jsxs)(s.$n,{onClick:t,sx:n,children:[d,g]}),h[5]=d,h[6]=g,h[7]=u):u=h[7];let _=x&&f;return h[8]!==u||h[9]!==_?(m=(0,r.jsxs)(r.Fragment,{children:[u,_]}),h[8]=u,h[9]=_,h[10]=m):m=h[10],m}function p(e){return!e}function f(e){let t,n,i=(0,a.c)(3),{children:o}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t={padding:3},i[0]=t):t=i[0],i[1]!==o?(n=(0,r.jsx)(s.az,{sx:t,children:o}),i[1]=o,i[2]=n):n=i[2],n}function g(e){let t,n,o,c,d,u,m,h=(0,a.c)(14),{direction:p,onExpand:f}=e;h[0]===Symbol.for("react.memo_cache_sentinel")?(t={justifyContent:"start"},h[0]=t):t=h[0],h[1]!==p?(n={borderRadius:0,backgroundColor:"canvas.default",border:"none",px:3,py:2,width:"100%",fontSize:0,fontWeight:"normal",color:"fg.muted",'[data-component="buttonContent"]':t,..."above"===p?{borderBottom:"1px solid var(--borderColor-default, var(--color-border-default))"}:{borderTop:"1px solid var(--borderColor-default, var(--color-border-default))"}},h[1]=p,h[2]=n):n=h[2],h[3]===Symbol.for("react.memo_cache_sentinel")?(o={display:"flex",alignItems:"center"},h[3]=o):o=h[3];let g="below"===p?i.FoldDownIcon:i.FoldUpIcon;return h[4]===Symbol.for("react.memo_cache_sentinel")?(c={mr:2},h[4]=c):c=h[4],h[5]!==g?(d=(0,r.jsx)(l.A,{icon:g,sx:c}),h[5]=g,h[6]=d):d=h[6],h[7]!==p||h[8]!==d?(u=(0,r.jsxs)(s.az,{sx:o,children:[d,"Show content ",p]}),h[7]=p,h[8]=d,h[9]=u):u=h[9],h[10]!==f||h[11]!==n||h[12]!==u?(m=(0,r.jsx)(s.$n,{onClick:f,sx:n,children:u}),h[10]=f,h[11]=n,h[12]=u,h[13]=m):m=h[13],m}function y(e){let t,n,i=(0,a.c)(3),{children:s}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(o.l.GroupHeading,{as:"h3",children:"Reference details"}),i[0]=t):t=i[0],i[1]!==s?(n=(0,r.jsx)(o.l,{children:(0,r.jsxs)(o.l.Group,{children:[t,s]})}),i[1]=s,i[2]=n):n=i[2],n}function x(e){let t,n,i=(0,a.c)(6),{children:s,href:c,icon:d}=e;return i[0]!==d?(t=(0,r.jsx)(o.l.LeadingVisual,{children:(0,r.jsx)(l.A,{icon:d})}),i[0]=d,i[1]=t):t=i[1],i[2]!==s||i[3]!==c||i[4]!==t?(n=(0,r.jsxs)(o.l.LinkItem,{href:c,children:[t,s]}),i[2]=s,i[3]=c,i[4]=t,i[5]=n):n=i[5],n}function v(){let e,t,n=(0,a.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e={display:"flex",flexDirection:"column",alignItems:"center",m:"auto",p:3},n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsxs)(s.az,{sx:e,children:[(0,r.jsx)(s.y$,{sx:{mb:2}}),(0,r.jsx)("div",{children:"Loading..."})]}),n[1]=t):t=n[1],t}function b(){let e,t,n=(0,a.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e={display:"flex",justifyContent:"center",p:3},n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(s.az,{sx:e,children:(0,r.jsx)(s.az,{sx:{color:"danger.fg",fontWeight:"bold"},children:"Failed to load reference details"})}),n[1]=t):t=n[1],t}function _(e){let t,n=(0,a.c)(4),{children:i,detailsError:o,detailsLoading:s}=e;return n[0]!==i||n[1]!==o||n[2]!==s?(t=o?(0,r.jsx)(b,{}):s?(0,r.jsx)(v,{}):(0,r.jsx)(r.Fragment,{children:i}),n[0]=i,n[1]=o,n[2]=s,n[3]=t):t=n[3],t}let C={Frame:d,Header:u,Body:_,Content:f,CollapsibleSubsection:h,ContentExpander:g,Details:y,DetailLink:x,SectionDivider:m};try{d.displayName||(d.displayName="Frame")}catch{}try{u.displayName||(u.displayName="Header")}catch{}try{m.displayName||(m.displayName="SectionDivider")}catch{}try{h.displayName||(h.displayName="CollapsibleSubsection")}catch{}try{f.displayName||(f.displayName="Content")}catch{}try{g.displayName||(g.displayName="ContentExpander")}catch{}try{y.displayName||(y.displayName="Details")}catch{}try{x.displayName||(x.displayName="DetailLink")}catch{}try{v.displayName||(v.displayName="Loading")}catch{}try{b.displayName||(b.displayName="Error")}catch{}try{_.displayName||(_.displayName="Body")}catch{}},41738:(e,t,n)=>{n.d(t,{_:()=>d,I:()=>l});var r=n(74848),a=n(21728),i=n(21998),o=n(37178);let s={"bing-icon":"WebSearchReferencePreview-module__bing-icon--lhPED"};function l(e){let t,n,s,l,u,m,h,p,f,g,y,x=(0,a.c)(19),{reference:v,onDismiss:b}=e;x[0]===Symbol.for("react.memo_cache_sentinel")?(t={textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:2},n=(0,r.jsx)(d,{}),x[0]=t,x[1]=n):(t=x[0],n=x[1]),x[2]===Symbol.for("react.memo_cache_sentinel")?(s={fontSize:0,fontWeight:400,color:"fg.muted"},x[2]=s):s=x[2],x[3]===Symbol.for("react.memo_cache_sentinel")?(l={fontSize:1,fontWeight:600,color:"fg.default"},x[3]=l):l=x[3];let _=1===v.results.length?" result ":" results ";return x[4]!==v.results.length||x[5]!==_?(u=(0,r.jsxs)(i.az,{sx:t,children:[n,(0,r.jsxs)(i.EY,{sx:s,children:[(0,r.jsxs)(i.EY,{sx:l,children:[v.results.length," ",_]}),"from Bing search."]})]}),x[4]=v.results.length,x[5]=_,x[6]=u):u=x[6],x[7]!==b||x[8]!==u?(m=(0,r.jsx)(o.O.Header,{onDismiss:b,children:u}),x[7]=b,x[8]=u,x[9]=m):m=x[9],x[10]===Symbol.for("react.memo_cache_sentinel")?(h={display:"flex",flexDirection:"column",px:3,gap:3,pb:3},x[10]=h):h=x[10],x[11]!==v.results?(p=v.results.map(c),x[11]=v.results,x[12]=p):p=x[12],x[13]===Symbol.for("react.memo_cache_sentinel")?(f=(0,r.jsx)(i.EY,{sx:{fontSize:0,fontWeight:400},children:(0,r.jsx)(i.N_,{href:"https://privacy.microsoft.com/en-us/privacystatement",rel:"nofollow",target:"_blank",children:"Microsoft Privacy Statement"})}),x[13]=f):f=x[13],x[14]!==p?(g=(0,r.jsx)(o.O.Body,{detailsError:!1,detailsLoading:!1,children:(0,r.jsxs)(i.az,{sx:h,children:[p,f]})}),x[14]=p,x[15]=g):g=x[15],x[16]!==g||x[17]!==m?(y=(0,r.jsxs)(o.O.Frame,{children:[m,g]}),x[16]=g,x[17]=m,x[18]=y):y=x[18],y}function c(e,t){return(0,r.jsxs)(i.az,{sx:{display:"flex",flexDirection:"column",gap:1,border:"1px solid var(--borderColor-default, var(--color-border-default))",borderRadius:"6px",padding:3},children:[(0,r.jsx)(i.N_,{sx:{fontWeight:600,fontSize:2},href:e.url,rel:"nofollow",children:e.title}),(0,r.jsx)("div",{children:e.excerpt}),(0,r.jsx)(i.az,{sx:{fontSize:0,color:"fg.muted"},children:e.url})]},t)}let d=()=>{let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)("div",{className:s["bing-icon"]}),t[0]=e):e=t[0],e};try{l.displayName||(l.displayName="WebSearchReferencePreview")}catch{}try{d.displayName||(d.displayName="BingIcon")}catch{}},15033:(e,t,n)=>{n.d(t,{D:()=>I});var r=n(74848),a=n(23657),i=n(84646),o=n(96459),s=n(40928),l=n(15042),c=n(46251),d=n(36284),u=n(99511),m=n(96540),h=n(51563),p=n(77430),f=n(96379),g=n(26607),y=n(1992),x=n(5524);let v={ownerDropdownOverlay:"SpacesOwnerDropdown-module__ownerDropdownOverlay--bEFXy",ownerListGroup:"SpacesOwnerDropdown-module__ownerListGroup--U2Z7L",errorListItem:"SpacesOwnerDropdown-module__errorListItem--eq64y"};var b=n(29731);function _({onSelect:e}){let[t,n]=(0,m.useState)([]),[a,i]=(0,m.useState)(!1),[o,s]=(0,m.useState)(void 0),l=(0,m.useCallback)(t=>{s(t),e(t)},[e]),c=(0,m.useCallback)(()=>{n([]),i(!0)},[]);return(0,m.useEffect)(()=>{(async()=>{try{let e=await (0,f.lS)("/github-copilot/chat/custom_copilots_owners"),t=await e.json(),r=t?.owners;if(!e.ok||!r)return void c();n(r),r[0]&&l(r[0])}catch{c()}})()},[c,l]),(0,r.jsx)("div",{children:(0,r.jsxs)(d.A,{children:[(0,r.jsx)(d.A.Label,{required:!0,children:"Owner"}),(0,r.jsxs)(y.W,{children:[(()=>{let e=o?.name||"Choose an owner",t=o?(0,r.jsx)(p.r,{src:o.avatarUrl},o.avatarUrl):void 0;return(0,r.jsx)(y.W.Button,{"data-testid":"owner-dropdown-anchor",alignContent:"start","aria-label":e,leadingVisual:t,children:e})})(),(0,r.jsx)(y.W.Overlay,{responsiveVariant:"fullscreen",width:"large",maxHeight:"large",className:v.ownerDropdownOverlay,children:(0,r.jsx)(x.l,{children:(0,r.jsx)(x.l.Group,{className:v.ownerListGroup,children:(0,r.jsxs)(x.l,{selectionVariant:"single",children:[t&&t.map(e=>{let{name:t,avatarUrl:n,displayName:a}=e;return(0,r.jsxs)(x.l.Item,{selected:t===o?.name,onSelect:()=>l(e),children:[(0,r.jsx)(x.l.LeadingVisual,{children:(0,r.jsx)(p.r,{src:n})}),t,(0,r.jsx)(x.l.Description,{children:a})]},t)}),!t.length&&!a&&(0,r.jsx)(x.l.Item,{disabled:!0,children:"Fetching owners\u2026"},"fetching-owners"),a&&(0,r.jsx)(x.l.Item,{disabled:!0,className:v.errorListItem,children:"An error occurred while loading owners. Please reopen the dialog to try again."},"error-fetching-owners")]})})})})]}),(0,r.jsx)(d.A.Caption,{children:(()=>{let e=(0,r.jsx)("span",{children:(0,r.jsx)(g.A,{className:"mr-1 mt-1",children:"Private"})});return o?"User"===o.type?(0,r.jsxs)("div",{className:"d-flex flex-column",children:[(0,r.jsx)("span",{...(0,b.G)("owner-user-caption"),children:"Only you will be able to see this space."}),(0,r.jsx)("span",{children:e})]}):(0,r.jsxs)("div",{className:"d-flex flex-column flex-shrink",children:[(0,r.jsx)("span",{...(0,b.G)("owner-org-caption"),children:"Only you and org admins can see this space. You can share it with others later."}),(0,r.jsx)("span",{children:e})]}):"Where we will store your space."})()})]})})}try{_.displayName||(_.displayName="SpacesOwnerDropdown")}catch{}let C={createSpaceDialog:"CreateSpaceDialog-module__createSpaceDialog--YECfV"};var w=n(44956),S=n(53419),j=n(20263),N=n(35247);function I({dialogTitle:e="New Space",closeDialog:t,initialSpace:n}){let p=(0,o.Z)(),f=(0,m.useRef)(null),g=(0,i.AV)(),[y,x]=(0,m.useState)(n?.name??g),[v,b]=(0,m.useState)(null),[I,T]=(0,m.useState)({}),{upsertCopilotSpace:k,isPending:R}=(0,h.$)(),A=(0,s.S)(),E=(0,m.useCallback)(e=>{let t={...I};for(let n of e)t[n]&&delete t[n];T(t)},[I]),L=(0,m.useCallback)(e=>b(e),[]);(0,m.useEffect)(()=>{(0,S.BI)("copilot_spaces.create_space_v3_dialog_opened",{})},[]),(0,m.useEffect)(()=>{n?f.current?.focus():f.current?.select()},[n]);let M=async()=>{if(R)return;let e=n?.resources?[...n.resources]:[],i=[];if(N.W.spacesDuplicate){if(n&&v){let t=function(e,t,n){let r=[],a=[];if(!n)return{resourcesToSave:e,resourcesThatWillNotTransfer:[]};for(let n of e)"ownerId"in n&&"private"in n&&n.private&&n.ownerId!==t?a.push(n):r.push(n);return{resourcesToSave:r,resourcesThatWillNotTransfer:a}}(n.resources||[],v.id,"Organization"===v.type);e=t.resourcesToSave,i=t.resourcesThatWillNotTransfer}let t=!0;if(i.length>0){let e=new Intl.ListFormat().format(Array.from(new Set(i.map(e=>e.ownerLogin).filter(e=>void 0!==e)))),n=`Private resources owned by <strong>${e}</strong> will not be duplicated to the new space.`;t=await A({title:"Some resources will not be duplicated",content:(0,r.jsx)(j.BC,{html:n}),cancelButtonContent:"Never mind",confirmButtonContent:"Continue",confirmButtonType:"primary"})}if(!t)return}try{let r=await k({name:y,ownerId:v?.id,ownerType:v?.type,resources:e,generalInstructions:n?.generalInstructions});T({}),t();let i=(0,a.Cb)(r);return p(i)}catch(e){T(e??{})}},F=()=>{t()};return(0,r.jsx)(l.l,{position:{narrow:"fullscreen"},title:e,onClose:t,width:"large","aria-label":e,className:C.createSpaceDialog,renderFooter:()=>(0,r.jsx)(w.m,{onCancel:F,onSave:M,isLoading:R,disabled:!v,saveButtonText:"Create Space"}),children:(0,r.jsx)("form",{onSubmit:async e=>{e.preventDefault(),e.stopPropagation(),await M()},children:(0,r.jsxs)(c.B,{children:[(0,r.jsxs)(d.A,{children:[(0,r.jsx)(d.A.Label,{required:!0,children:"Space name"}),(0,r.jsx)(u.A,{ref:f,autoFocus:!0,block:!0,"data-testid":"copilot-space-name-input",name:"copilot-space-name",value:y,onChange:e=>{x(e.target.value),E(["name","slug"])}}),(0,r.jsx)(d.A.Caption,{children:"Choose a name that describes your project or use case"}),I.name?(0,r.jsx)(d.A.Validation,{variant:"error",children:(0,r.jsxs)("span",{children:["Name ",I.name]})}):I.slug?(0,r.jsx)(d.A.Validation,{variant:"error",children:(0,r.jsx)("span",{children:a.j0})}):null]}),(0,r.jsx)(_,{onSelect:L})]})})})}try{I.displayName||(I.displayName="CreateSpaceDialog")}catch{}},77809:(e,t,n)=>{n.d(t,{Q:()=>ei});var r=n(74848),a=n(26108),i=n(15042),o=n(46251),s=n(36284),l=n(21373),c=n(72511),d=n(38621),u=n(96540),m=n(97564),h=n(54030),p=n(39176),f=n(54114),g=n(87086),y=n(78314),x=n(31078),v=n(53552),b=n(64375),_=n(29731),C=n(6665),w=n(19189),S=n(7808),j=n(64642),N=n(65787),I=n(25407),T=n(66108),k=n(94195),R=n(96459),A=n(11683),E=n(45800),L=n(31604),M=n(21998),F=n(10095),P=n(91385),D=n(70170),$=n(37272),O=n(71315),B=n(34164);let U=u.forwardRef(({ariaActiveDescendant:e,ariaControls:t,ariaExpanded:n,ariaHasPopup:a,className:i,onBlur:o,onFocus:s,onKeyDown:l,onPreload:c,onSearch:m,query:h,searchPlaceholder:p,loading:f,sx:g},y)=>{let{sendRepoClickEvent:x}=(0,C.T)(),[v,b]=u.useState(h),_=u.useRef((0,D.s)(e=>m(e),250));u.useEffect(()=>{b(h)},[h]);let w=h?(0,r.jsx)(M.ks.Action,{onClick:()=>{x("FILE_TREE.CANCEL_SEARCH"),m("")},icon:d.XCircleFillIcon,"aria-label":"Clear",className:"fgColor-muted"}):void 0;return(0,r.jsx)(M.ks,{autoFocus:z(),className:(0,B.$)("d-flex",i),ref:y,value:v,onKeyDown:l,onChange:e=>{b(e.target.value),c(),_.current(e.target.value)},sx:g,"aria-label":p||"Go to file","aria-activedescendant":e,role:a?"combobox":void 0,"aria-controls":t,"aria-expanded":n,"aria-haspopup":a?"dialog":void 0,autoCorrect:"off",spellCheck:"false",placeholder:p||"Go to file",loading:""!==h&&f,leadingVisual:d.SearchIcon,trailingAction:w,trailingVisual:w?void 0:()=>(0,r.jsx)($.E,{children:(0,r.jsx)("kbd",{children:"t"})}),onFocus:e=>{c(),e.target.select(),s?.(e)},onBlur:o,onClick:()=>x("FILE_TREE.SEARCH_BOX")})});function z(){return"1"===new URLSearchParams(O.fV.search).get("search")}U.displayName="FilesSearchBox";let W={Box:"FileResultsList-module__Box--cUmDY",ActionList:"FileResultsList-module__ActionList--kDNEZ",FilesSearchBox:"FileResultsList-module__FilesSearchBox--KW9Zl",HighlightMatch:"FileResultsList-module__HighlightMatch--Jy_cG",Octicon:"FileResultsList-module__Octicon--PvMf4"},V={excludeDirectories:!1,excludeSeeAllResults:!1};function q({actionListSx:e,additionalResults:t,className:n,commitOid:a,config:i=V,findFileWorkerPath:o,getItemUrl:s,onRenderRow:l,onItemSelected:d,searchBoxRef:m,sx:p}){let{excludeDirectories:f,excludeSeeAllResults:g}=i,{query:b,setQuery:_}=(0,x.JS)(),T=(0,y.t)(),F=u.useRef(null),P=m??F,[D,$]=u.useState(b.length>0),[O,B]=u.useState(!!b),{list:q,directories:G,loading:H,error:K}=(0,h.o)(a,D,!!f),{path:Q}=(0,v.eu)(),{getUrl:J}=(0,w.Z)(),{queryText:Y,queryLine:X}=function(e){let t=(e=e.replaceAll(" ","")).indexOf(":");return t>=0?{queryText:e.substring(0,t),queryLine:parseInt(e.substring(t+1),10)}:{queryText:e,queryLine:void 0}}(b),{matches:ee,clearMatches:et}=function(e,t,n,r){let[a,i]=u.useState(),o=u.useRef(""),s=u.useRef(),{sendStats:l}=(0,C.T)(),c=u.useRef(!1),d=u.useCallback(()=>{let e=new S.z(n,j.j);e.onmessage=({data:e})=>{c.current=!1,i(e.list),o.current=e.query,e.startTime&&l("repository.find-file",{"find-file-base-count":e.baseCount,"find-file-results-count":e.list.length,"find-file-duration-ms":performance.now()-e.startTime})},s.current=e},[l,n]);return u.useEffect(()=>{if(r)return d(),function(){s.current?.terminate()}},[d,r]),u.useEffect(()=>{if(e.length&&t){c.current&&(s.current?.terminate(),d());let n=o.current&&t.startsWith(o.current);c.current=!0,s.current?.postMessage({baseList:n&&a||e,query:t,startTime:performance.now()})}},[e,t,d]),{matches:a,clearMatches:()=>i(void 0)}}((0,u.useMemo)(()=>[...q,...t??[]].sort(),[t,q]),Y,o,D),{sendRepoClickEvent:en}=(0,C.T)(),er=(0,R.Z)(),[ea,ei]=u.useState(0),[eo,es]=u.useState(()=>z()),el=u.useRef(null),ec=u.useRef(null),ed="file-results-list",{sendRepoKeyDownEvent:eu}=(0,C.T)(),{screenSize:em}=(0,k.lm)(),eh=i.enableOverlay??em>=k.Gy.large,ep=u.useCallback(e=>{en("FILE_TREE.SEARCH_RESULT_CLICK"),d?.(e),B(!1)},[en,d]),ef=(e,t,n)=>s?s(e,t,n):J({path:e,action:t?"tree":"blob",hash:n}),{containerRef:eg}=(0,E.G)({bindKeys:A.z0.ArrowVertical|A.z0.HomeAndEnd,focusInStrategy:"previous"},[H,K]);u.useEffect(()=>{b||B(!1)},[b]),u.useEffect(()=>{document.activeElement!==P.current&&eh&&B(!1)},[Q,P,eh]);let ey=ee?.slice(0,20)||[],ex=ee&&ee.length>ey.length,ev=!i.disableNavigation,eb=ec.current?.getBoundingClientRect().width,e_=(0,r.jsx)(M.az,{sx:{maxHeight:eh?"180px":"100% !important",width:eh?eb:"100%"},className:W.Box,children:K?(0,r.jsx)(c.A,{variant:"danger",className:"m-3",children:"Failed to search"}):(0,r.jsxs)(M.lF,{ref:eg,sx:{p:eh?2:3,pr:3*!!eh,pt:eh?3:"2px !important",...e},role:"listbox",className:W.ActionList,children:[!H&&ey.map((e,t)=>{let n=G.includes(e),a=ef(e,n,X?`L${X}`:"");return(0,r.jsx)(Z,{active:!1,index:t,focused:eo&&ea===t,match:e,onRender:l,query:Y,onClick:ep,isDirectory:n,to:a,useOverlay:eh,listRef:eg,noAnchor:i.disableNavigation},e)}),0===ey.length&&(0,r.jsx)("div",{role:"status",className:"text-center fgColor-muted",children:"No matches found"})]})});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(M.az,{className:n,ref:ec,sx:p,children:(0,r.jsx)(U,{ariaActiveDescendant:(!eh&&b||eh&&O)&&eo&&ea>-1?ex&&ea===ey.length?"see-all-results-link":`file-result-${ea}`:void 0,ariaExpanded:eh?O:void 0,ariaHasPopup:eh,ariaControls:eh?ed:void 0,ref:P,loading:H,query:b,onKeyDown:e=>{let{key:t,shiftKey:n,metaKey:r,altKey:a,ctrlKey:i}=e;if(!n&&!r&&!a){if("Escape"===t)b?(eu("FILE_TREE.CANCEL_SEARCH"),_(""),et()):document.activeElement&&document.activeElement.blur();else if(!b)return;else if("Enter"===t){if(!g&&ex&&ea===ey.length)ev&&er((0,I.Y8Y)({owner:T.ownerLogin,repo:T.name,searchTerm:`path:${Y}`})),d?.();else if(ey[ea]){let e=ey[ea];ev&&er(ef(ey[ea],!1,X?`L${X}`:"")),B(!1),d?.(e)}}else if("ArrowDown"===t||i&&"n"===t){if(!g&&ex&&ea>=ey.length-1){if(ei(ey.length),el.current&&eg.current){let e=(0,N.U)(eg.current);(0,A.Rt)(el.current,e,{behavior:"instant"})}}else ei(Math.min(ea+1,ey.length-1));e.preventDefault();return}else if("ArrowUp"===t||i&&"p"===t){ei(Math.max(ea-1,0)),e.preventDefault();return}}},onPreload:()=>$(!0),onSearch:e=>{_(e),e?B(!0):(et(),B(!1)),ei(0)},onBlur:e=>{eg.current?.contains(e.relatedTarget)||(B(!1),es(!1))},onFocus:()=>{b&&B(!0),es(!0)},searchPlaceholder:i.searchPlaceholder,className:W.FilesSearchBox})}),eh&&ey.length>0&&(0,r.jsx)(L.T,{anchorRef:ec,open:eh&&O,renderAnchor:null,onClose:()=>{B(!1)},focusZoneSettings:{disabled:!0},focusTrapSettings:{disabled:!0},align:"end",overlayProps:{id:ed,role:"dialog"},children:e_}),!eh&&b&&e_]})}let G=({active:e,focused:t,index:n,match:a,query:i,to:o,isDirectory:s,onClick:l,onRender:c,useOverlay:d,listRef:m,noAnchor:h})=>{let p=(0,P.Xq)(i,a);c?.();let f=u.useRef(null);u.useEffect(()=>{if(t&&f.current&&m?.current){let e=(0,N.U)(m.current);(0,A.Rt)(f.current,e,{behavior:"instant"})}},[t,m]);let g={};t&&(g={outline:"none",border:"2 solid",boxShadow:"0 0 0 2px #0969da"});let y={id:`file-result-${n}`,active:e,onSelect:(0,u.useCallback)(()=>{l?.(a)},[a,l]),sx:{fontWeight:"normal",":hover":{textDecoration:"none"},mx:"2px",width:"calc(100% - 4px)",...g},role:"option","data-focus-visible-added":t||void 0,tabIndex:d?-1:0},x=(0,r.jsx)("div",{className:"d-flex",children:(0,r.jsx)("div",{className:"d-flex flex-1 flex-column overflow-hidden",children:(0,r.jsx)(Q,{text:a,positionsList:p,LeadingIcon:s?H:K,className:W.HighlightMatch})})});return h?(0,r.jsx)(M.lF.Item,{...y,children:x},a):(0,r.jsx)(M.lF.LinkItem,{...y,ref:f,as:T.N,to:o,children:x},a)},H=()=>(0,r.jsx)(F.A,{"aria-label":"Directory",icon:d.FileDirectoryFillIcon,size:"small",className:W.Octicon}),K=()=>(0,r.jsx)(F.A,{"aria-label":"File",icon:d.FileIcon,className:"fgColor-muted mr-2",size:"small"}),Z=u.memo(G);function Q({className:e,text:t,positionsList:n,sx:a,LeadingIcon:i}){let o=[],s=0;for(let e of n){if(Number(e)!==e||e<s||e>t.length)continue;let n=t.slice(s,e);n&&o.push(J(n)),s=e+1,o.push((0,r.jsx)("mark",{className:"text-bold bgColor-transparent fgColor-default",children:t[e]},e))}return o.push(J(t.slice(s))),(0,r.jsx)(M.az,{className:e,sx:a,children:(0,r.jsxs)(r.Fragment,{children:[i&&(0,r.jsx)(i,{}),o]})})}function J(e){return e.replaceAll("/","/\u200B")}try{q.displayName||(q.displayName="FileResultsList")}catch{}try{G.displayName||(G.displayName="FileResultRow")}catch{}try{H.displayName||(H.displayName="DirectoryIcon")}catch{}try{K.displayName||(K.displayName="FileResultIcon")}catch{}try{Z.displayName||(Z.displayName="MemoizedFileResultRow")}catch{}try{Q.displayName||(Q.displayName="HighlightMatch")}catch{}let Y={dialogHeader:"MultiFilePicker-module__dialogHeader--CApsB",Box:"MultiFilePicker-module__Box--gINxM",Dialog:"MultiFilePicker-module__Dialog--ls9MF"};var X=n(73017),ee=n(53419);function et(e,t,n){return{id:`${n.id}${"github_folder"===t?"-folder":""}-${e}`,repositoryId:n.id,nwo:`${n.ownerLogin}/${n.name}`,filePath:e,type:t}}function en(e,t,n,r,a,i){let o=Array.from(e).filter(e=>t.has(e)),s=Array.from(e).filter(e=>!t.has(e));if(!i)return s.map(e=>et(e,"github_file",n));let l=[],c=new Set;for(let e of o){if(o.some(t=>t!==e&&e.startsWith(`${t}/`)))continue;let t=s.filter(t=>t.startsWith(`${e}/`));if(i&&0===t.length){l.push(et(e,"github_folder",n));continue}if(i&&t.length>=a)for(let r of(l.push(et(e,"github_folder",n)),t))c.add(r);else for(let e of t)l.push(et(e,"github_file",n)),c.add(e)}let d=s.filter(e=>!c.has(e));if(r&&i){let e=new Map;for(let t of d){let n=t.lastIndexOf("/"),r=n>0?t.substring(0,n):"";e.has(r)||e.set(r,[]),e.get(r)?.push(t)}for(let[t,r]of e)if(""===t)for(let e of r)l.push(et(e,"github_file",n));else l.push(et(t,"github_folder",n))}else for(let e of d)l.push(et(e,"github_file",n));return l}function er({currentRepo:e,setLocalFormData:t,fetchError:n,onFileCountChange:a,expandedPath:i,resourceCounts:o,allowFolderReferences:s,maxFileCount:l,onRejectionMessage:c,onDisplayCountChange:d}){let[m,g]=(0,u.useState)(()=>new Set),[y,x]=(0,u.useState)(()=>new Set),v=l??50,{list:b,directories:_,loading:C}=(0,h.o)(e.commitOID,!0),[w,S]=(0,u.useState)([]);(0,u.useEffect)(()=>{S((0,p.k)({paths:b,directories:_})),x(new Set(_))},[b,_,S,e.commitOID]),(0,u.useEffect)(()=>{let n=Array.from(m).filter(e=>!y.has(e)),r=Array.from(m).filter(e=>y.has(e));a?.(n.length);let i=!1;if(s&&n.length>0){let e=r.map(e=>`${e}/`),t=n.filter(t=>!e.some(e=>t.startsWith(e))),a=t.some(e=>e.includes("/"));i=t.length>v&&a}let o=en(m,y,e,i,v,s??!1);t(o),d&&d(o.length)},[m,y,e,t,a,d,s,v]);let j=(0,u.useCallback)(t=>`/${e.name}/${e.ownerLogin}/tree/${e.refInfo.name}/${t.path}`,[e]),N=(0,u.useCallback)(t=>{if(t.size<=m.size){g(t),c?.(null);return}if(!s){let e=Array.from(t).filter(e=>!y.has(e)),n=o?o.maxResourceCount-o.currentResourceCount:v;if(e.length>n){let n=o?`${o.currentResourceCount+e.length} / ${o.maxResourceCount} possible sources selected, add fewer files.`:`Up to ${v} files can be added at a time.`;c?.(n),g(t);return}c?.(null),g(t);return}let n=Array.from(t).filter(e=>!y.has(e)),r=Array.from(t).filter(e=>y.has(e)).map(e=>`${e}/`),a=n.filter(e=>!r.some(t=>e.startsWith(t))),i=a.some(e=>e.includes("/"));if(en(t,y,e,a.length>v&&i,v,s).length>v)return void g(t);g(t)},[m,v,y,s,c,e,o]);return(0,r.jsx)("div",{className:Y.Box,children:(0,r.jsx)(f.Rw,{rootItems:w,expandedPath:i,selectedItemRef:()=>{},setRootItems:S,navigateOnClick:!1,directoryNavigateOnClick:!1,selectedItems:m,onSelectionChange:N,loading:C||!1,fetchError:!!n,getItemUrl:j,allowFolderReferences:!!s,sortDirectoryItems:e=>e.sort((e,t)=>e.data.name.localeCompare(t.data.name))})})}function ea({onClose:e}){return(0,r.jsx)(a.K,{icon:d.XIcon,"aria-label":"Close",onClick:e,variant:"invisible"})}function ei({formData:e,onCancel:t,onSaveFiles:n,onSaveRepository:h,findFileWorkerPath:p,attachmentButtonRef:f,owner:C,resourceCounts:w,initialRepo:S,onRepoSelect:j,hideBackButton:N=!1,allowFolderReferences:I=!1,maxFileCount:T=50}){let[k,R]=(0,u.useState)({}),[A,E]=(0,u.useState)(null),[L,M]=(0,u.useState)(S||null),[F,P]=(0,u.useState)(!0),[D,$]=(0,u.useState)(e),[O,B]=(0,u.useState)(!1),[U,z]=(0,u.useState)(null),[W,V]=(0,u.useState)(""),[G,H]=(0,u.useState)(null),[K,Z]=(0,u.useState)(0),[Q,J]=(0,u.useState)(0),et=(0,u.useRef)(!1),en=async e=>{let t;if(et.current=!0,k[e]){M(t=k[e]),j?.(t);return}try{t=await (0,m.V)(e),R(n=>({...n,[e]:t})),M(t),j?.(t),P(!1)}catch(e){E(e instanceof Error?e.message:"An unknown error occurred")}et.current=!1},ei=()=>{j?.(null),M(null),$([]),P(!0)},eo=void 0!==w,es=eo?Q:K,el=es>(eo?w.maxResourceCount-w.currentResourceCount:T),ec=async()=>{B(!0);try{if(0===es&&L){(0,ee.BI)("copilot-spaces.click",{target:"SAVED_REPOSITORY_FROM_FILE_PICKER"}),await h({type:"repository",id:`${L.id}`,repositoryId:L.id,nwo:`${L.ownerLogin}/${L.name}`,ownerAvatarUrl:L.ownerAvatarUrl,ownerType:L.ownerType,markedForDestroy:!1});return}if(el)return;(0,ee.BI)("copilot-spaces.click",{target:"SAVED_FILES_FROM_FILE_PICKER"}),await n(D)}catch(t){let e="An unknown error occurred";t&&"object"==typeof t&&"base"in t&&"string"==typeof t.base&&(e=t.base.startsWith("unsupported_file_type")&&"files"in t?function(e){if(1===e.length)return`This file can't be submitted: ${e[0]}. Only supported file types are allowed.`;let t=e.slice(0,3).map(e=>(function(e,t=30){let n=e.length<=t?e:`...${e.slice(-t)}`;return`<b>${n}</b>`})(e)),n=e.length-3,r=`One or more files can't be submitted: ${t.join(", ")}`;return n>0&&(r+=`, and ${n} more`),`${r}. Only supported file types are allowed.`}(t.files):t.base.startsWith("The size of the space exceeds the current limit")?"The size of the space exceeds the current limit":t.base),z(e)}finally{B(!1)}};(0,u.useEffect)(()=>{z(null)},[D]);let ed=el?eo?`${w.currentResourceCount+Q} / ${w.maxResourceCount} possible sources selected, add fewer files.`:`Up to ${T} items can be added at a time.`:G,eu=el||!!G,em=0===es?"repository":"";return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.X1,{selectionVariant:"instant",open:!L&&F,onOpenChange:e=>{et.current||(P(e),t())},selectedRepoIds:new Set,onSelectRepo:async e=>{e&&($([]),(0,ee.BI)("copilot-spaces.click",{target:"SELECTED_REPO_FROM_REPO_PICKER"}),await en(e))},cancelReturnFocusRef:f,submitReturnFocusRef:f,error:A??void 0,ownerDisplayLogin:C,includeForks:!0}),L&&(0,r.jsx)(i.l,{onClose:t,title:`Add files from ${L.ownerLogin}/${L.name}`,width:"large",position:{narrow:"fullscreen"},renderHeader:({onClose:e})=>(0,r.jsxs)(i.l.Header,{children:[(0,r.jsx)("div",{className:Y.dialogHeader,children:(0,r.jsx)(i.l.Title,{children:(0,r.jsxs)(o.B,{align:"center",direction:"horizontal",gap:"none",children:[!N&&(0,r.jsx)(o.B.Item,{children:(0,r.jsx)(a.K,{icon:d.ArrowLeftIcon,"aria-label":"Back",onClick:ei,variant:"invisible"})}),(0,r.jsxs)(o.B.Item,{grow:!0,className:"mx-1",children:["Select folders and files in ",L.ownerLogin,"/",L.name]}),(0,r.jsx)(o.B.Item,{children:(0,r.jsx)(ea,{onClose:()=>e("close-button")})})]})})}),(0,r.jsx)(i.l.Subtitle,{className:"mt-0",children:(0,r.jsx)(y.d,{repository:L,children:(0,r.jsx)(x.Ck,{children:(0,r.jsx)(v.qV,{refInfo:{name:L.refInfo.name,canEdit:!0,listCacheKey:"anything",currentOid:L.commitOID},path:"test",action:"tree",copilotAccessAllowed:!0,children:(0,r.jsx)(b.$,{allShortcutsEnabled:!1,children:(0,r.jsx)(q,{commitOid:L.commitOID,findFileWorkerPath:p,onItemSelected:e=>{e&&V(e)},config:{enableOverlay:!0,disableNavigation:!0,searchPlaceholder:"Search for files or folders",actionText:"Search for files or folders"}})})})})})})]}),renderFooter:()=>(0,r.jsx)(i.l.Footer,{children:(0,r.jsxs)("div",{className:"d-flex flex-justify-between flex-items-center width-full",children:[(0,r.jsx)("div",{className:"d-flex flex-items-center",children:ed&&(0,r.jsx)(s.A.Validation,{variant:"error",children:ed})}),(0,r.jsxs)("div",{className:"d-flex flex-row flex-justify-end gap-2",children:[(0,r.jsx)(l.Q,{onClick:t,children:"Cancel"}),(0,r.jsxs)(l.Q,{...(0,_.G)("save-resource-button"),variant:"primary",onClick:ec,count:O?void 0:(eo?Q:K)||void 0,loading:O,disabled:eu,children:["Add ",(0,r.jsx)("span",{children:em})]})]})]})}),renderBody:()=>(0,r.jsxs)("div",{className:"d-flex flex-column",children:[A&&(0,r.jsx)("span",{children:A}),U&&(0,r.jsx)("div",{className:"position-sticky top-0 bgColor-default flash-banner",children:(0,r.jsx)(c.A,{full:!0,variant:"danger",children:(0,r.jsx)(X.JR,{as:"span",html:U})})}),(0,r.jsx)(y.d,{repository:L,children:(0,r.jsx)(x.Ck,{children:(0,r.jsx)(v.qV,{refInfo:{name:L.refInfo.name,canEdit:!0,listCacheKey:"anything",currentOid:L.commitOID},path:"test",action:"tree",copilotAccessAllowed:!0,children:(0,r.jsx)(er,{expandedPath:W,currentRepo:L,localFormData:D,setLocalFormData:$,onFileCountChange:J,onDisplayCountChange:Z,fetchError:A,resourceCounts:w,allowFolderReferences:I,maxFileCount:T,onRejectionMessage:H})})})})]}),className:Y.Dialog})]})}try{er.displayName||(er.displayName="FilePickerForm")}catch{}try{ea.displayName||(ea.displayName="CloseButton")}catch{}try{ei.displayName||(ei.displayName="MultiFilePicker")}catch{}},44956:(e,t,n)=>{n.d(t,{m:()=>o});var r=n(74848),a=n(21373);let i={footerContainer:"SpaceDialogFooter-module__footerContainer--J2LGP"};function o({onSave:e,onCancel:t,saveButtonText:n,isLoading:o=!1,loadingAnnouncement:s="",disabled:l=!1}){return(0,r.jsxs)("div",{className:i.footerContainer,children:[(0,r.jsx)(a.Q,{variant:"default",onClick:t,children:"Cancel"}),(0,r.jsx)(a.Q,{variant:"primary",loading:o,loadingAnnouncement:s,onClick:e,disabled:l||o,children:n})]})}try{o.displayName||(o.displayName="SpaceDialogFooter")}catch{}},54114:(e,t,n)=>{n.d(t,{Rw:()=>k});var r=n(74848),a=n(6665),i=n(19189),o=n(25556),s=n(34535),l=n(96459),c=n(38621),d=n(8125),u=n(88432),m=n(69726),h=n(21998),p=n(10095),f=n(96540),g=n(96379),y=n(52870);function x(e,t,n){let r=[];for(let a of t)if(a.startsWith(e)){let t=a.slice(e.length+1),i=t.indexOf("/"),o=i>0?t.slice(0,i):t,s=`${e}/${o}`;if(n&&n.some(e=>e.path===s))continue;let l={items:[],data:{contentType:s===a?"file":"directory",name:o,path:s,isClientOnly:!0}};r.push(l)}return r}let v={checkbox:"FileTreePicker-module__checkbox--uY6AK",itemContainer:"FileTreePicker-module__itemContainer--ShYuv",Box:"FileTreePicker-module__Box--RKQKr",Box_1:"FileTreePicker-module__Box_1--usRNW",Octicon:"FileTreePicker-module__Octicon--rINlU",Box_2:"FileTreePicker-module__Box_2--yFodr"};var b=n(53419);function _(e,t){let n=new Set(e);switch(t.type){case"SINGLE_SELECT_FILE":n.clear(),n.add(t.path),(0,b.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"SINGLE_SELECT_FILE",newFileCount:n.size});break;case"SELECT_FILE":n.add(t.path),(0,b.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"SELECT_FILE",newFileCount:n.size});break;case"DESELECT_FILE":n.delete(t.path),(0,b.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"DESELECT_FILE",newFileCount:n.size});break;case"SELECT_DIRECTORY":for(let e of t.paths)n.add(e);(0,b.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"SELECT_DIRECTORY",newFileCount:n.size,directoryCount:t.paths.length});break;case"DESELECT_DIRECTORY":for(let e of t.paths)n.delete(e);(0,b.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"DESELECT_DIRECTORY",newFileCount:n.size,directoryCount:t.paths.length})}return n}function C({isActive:e,file:t,onItemSelected:n,getItemUrl:i,selectedItemRef:l,navigate:m,onRenderRow:h,getFileTrailingVisual:p,getFileIcon:g,navigateOnClick:y,isSelected:x,singleSelect:b}){let{sendRepoClickEvent:_}=(0,a.T)(),C=f.useRef(null),w=(0,s.Z)({focusRowRef:C,mouseRowRef:C}),S="submodule"===t.data.contentType,j=p?.(t.data);(0,f.useEffect)(()=>{e&&C.current&&requestAnimationFrame(()=>{C.current?.scrollIntoView({block:"center"})})},[e]);let N=f.useCallback(e=>{S?(e.preventDefault(),t.data.submoduleUrl&&(window.location.href=t.data.submoduleUrl)):e.metaKey||e.ctrlKey||1===e.button?(window.open(i?.(t.data),"_blank"),e.preventDefault()):(n?.(t.data,t),_("FILES_TREE.ITEM",{item_path:t.data.path}),y&&m(i?.(t.data)||""),e.stopPropagation())},[t,i,S,m,y,n,_]);return h?.(),(0,r.jsxs)(d.G.Item,{ref:C,onSelect:N,current:e,id:`${t.data.path}-item`,containIntrinsicSize:e?void 0:"auto 2rem",children:[(0,r.jsx)(d.G.LeadingVisual,{children:g?g(t.data):S?(0,r.jsx)(c.FileSubmoduleIcon,{}):(0,r.jsx)(c.FileIcon,{})}),(0,r.jsxs)("div",{className:v.itemContainer,children:[!b&&(0,r.jsx)(u.A,{className:v.checkbox,checked:x||!1,readOnly:!0,"aria-label":`Select ${t.data.name}`}),(0,r.jsx)("span",{ref:l,style:{color:S?"var(--fgColor-accent, var(--color-accent-fg))":void 0},children:(0,r.jsx)("span",{"data-testid":`${t.data.path}-file-item`,children:t.data.name})})]}),w&&(0,r.jsx)(o.m,{"data-testid":`${t.data.name}-item-tooltip`,id:`${t.data.name}-item-tooltip`,contentRef:C,"aria-label":t.data.name,open:!0,direction:"ne"}),!!j?.screenReaderText&&(0,r.jsx)("span",{className:"sr-only",children:j.screenReaderText}),!!j?.trailingVisual&&(0,r.jsx)(d.G.TrailingVisual,{children:j.trailingVisual})]})}let w=f.memo(C),S=f.memo(u.A);function j({clientOnlyFilePaths:e,directory:t,isActive:n,isAncestorOfActive:i,leadingPath:l,onItemSelected:c,getItemUrl:u,getFetchUrl:m,selectedItemRef:h,navigate:p,onRenderRow:b,getFileTrailingVisual:_,getFileIcon:C,navigateOnClick:w,selectedChildren:j,expandedPath:N,singleSelect:I}){let[k,A]=(0,f.useState)(i),{sendRepoClickEvent:E}=(0,a.T)(),L=f.useRef(null),M=f.useRef(null),F=(0,s.Z)({focusRowRef:M,mouseRowRef:L}),P=f.useMemo(()=>j?.filter(e=>e.startsWith(`${t.data.path}/`)),[j,t.data.path]),D=f.useMemo(()=>j?.includes(t.data.path)??!1,[j,t.data.path]),$=t.items.length>1e3,O=f.useMemo(()=>(function(e,t,n){if(n?.selectedSelf&&n?.isLarge)return"all";if(!t||0===t.length)return"none";let r=`${e.data.path}/`,a=e.items.length,i=t.filter(e=>e.startsWith(r)&&!e.slice(r.length).includes("/")).length;return 0===i?"none":i>=a?"all":"partial"})(t,P,{selectedSelf:D,isLarge:$}),[t,P,D,$]),[B,U,z,W,V,q,G]=function(e,t,n){let[r,a]=f.useState(e.items),[i,o]=f.useState(e.data.totalCount||0),[s,l]=f.useState(!1),[c,d]=f.useState(!1),{safeSetTimeout:u}=(0,y.A)();f.useEffect(()=>{a(e.items)},[e.items]),f.useEffect(()=>{void 0!==e.data.totalCount&&o(e.data.totalCount)},[e.data.totalCount]);let m=f.useCallback(()=>{d(!1)},[]),h=f.useCallback((e,t)=>{let n=e||[...r];a(n.slice(0,100)),u(()=>{a(n),void 0!==t&&o(t)},1)},[r,u]);return[f.useCallback(async r=>{let i=new Map;if(e.data.isClientOnly){if(r){let n=x(e.data.path,r);for(let e of n)i.set(e.data.path,e);t({type:"add",folders:i,processingTime:0}),n.length>100?h(n,n.length):(a(n),o(n.length))}}else{let s=n(e.data);d(!1),l(!0);let c=Date.now(),u=await (0,g.lS)(`${s}?noancestors=1`);try{if(u.ok){let n=await u.json(),s=n.payload.tree.items.map(e=>{let t={items:[],data:{...e},autoExpand:"directory"===e.contentType&&1===n.payload.tree.items.length};return(i.set(e.path,t),e.hasSimplifiedPath)?function e(t,n,r){t.data.name=t.data.name.slice(t.data.name.lastIndexOf("/")+1,t.data.name.length);let a=n.name.slice(0,n.name.lastIndexOf("/")),i=a.indexOf("/")>-1,o={path:n.path.slice(0,n.path.lastIndexOf("/")),contentType:n.contentType,name:a,hasSimplifiedPath:i},s={items:[t],data:o};return(r.set(o.path,s),i)?e(s,{...o},r):s}(t,e,i):t});if(r){let t=e.data.path,a=x(t,r,n.payload.tree.items);for(let e of(s.push(...a),a))i.set(e.data.path,e)}t({type:"add",folders:i,processingTime:Date.now()-c}),e.items=s,e.data.totalCount=n.payload.tree.totalCount,s.length>100?h(s,n.payload.tree.totalCount):(a(s),o(n.payload.tree.totalCount))}else d(!0)}catch{d(!0)}}l(!1)},[n,e,t,h]),h,r,s,c,m,i]}(t,()=>{},m),H=l?`${l}/`:"",K=G-z.length;(0,f.useEffect)(()=>{n&&L.current&&requestAnimationFrame(()=>{L.current?.scrollIntoView({block:"center"})})},[n]);let Z=f.useCallback(e=>{!e||k||W||V||!(t.items.length>100)||U(),e!==k&&A(e)},[k,W,V,t.items.length,U]),Q=f.useCallback(e=>{e.metaKey||e.ctrlKey||1===e.button&&w?(window.open(u?.(t.data),"_blank"),e.preventDefault()):(I?Z(!k):(c?.(t.data,t),E("FILES_TREE.ITEM",{item_path:t.data.path}),w&&p(u?.(t.data)||"")),e.stopPropagation())},[t,u,k,p,w,c,Z,E,I]);f.useEffect(()=>{i&&!k&&Z?.(!0)},[i]),f.useEffect(()=>{0===t.items.length&&k?Z?.(!1):!k&&t.autoExpand&&Z?.(!0)},[t.items.length]);let J=f.useCallback(e=>{h&&n&&h(e),L.current=e},[h,n]);if(1===t.items.length){let a=t.items[0];if(a&&"directory"===a.data.contentType)return(0,r.jsx)(T,{clientOnlyFilePaths:e,directoryItems:t.items,leadingPath:H+t.data.name,inheritsActive:n,onItemSelected:c,selectedItemRef:h,getItemUrl:u,directoryNavigateOnClick:w,navigateOnClick:w,getFileTrailingVisual:_,getFileIcon:C,selectedChildren:P,expandedPath:N,singleSelect:I})}return b?.(),(0,r.jsxs)(d.G.Item,{ref:M,expanded:k,onExpandedChange:Z,current:n,onSelect:Q,id:`${t.data.path}-item`,containIntrinsicSize:n?void 0:"auto 2rem",children:[(0,r.jsx)(d.G.LeadingVisual,{children:(0,r.jsx)(d.G.DirectoryIcon,{})}),(0,r.jsxs)("div",{className:v.itemContainer,children:[!I&&(0,r.jsx)(S,{className:v.checkbox,checked:"all"===O,indeterminate:"partial"===O,readOnly:!0,"aria-label":`Select ${t.data.name}`,"data-indeterminate":"partial"===O?"true":void 0}),(0,r.jsxs)("span",{ref:J,children:[H&&(0,r.jsx)("span",{children:H}),(0,r.jsx)("span",{"data-testid":`${t.data.path}-directory-item`,children:t.data.name})]})]}),F&&(0,r.jsx)(o.m,{"data-testid":`${t.data.name}-directory-item-tooltip`,id:`${t.data.name}-directory-item-tooltip`,contentRef:M,"aria-label":`${H}${t.data.name}`,open:!0,direction:"ne"}),(0,r.jsx)(d.G.SubTree,{state:W?"loading":V?"error":"done",children:V?(0,r.jsx)(d.G.ErrorDialog,{onRetry:B,onDismiss:q,children:"There was an error loading the folder contents."}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(T,{clientOnlyFilePaths:e,directoryItems:z,onItemSelected:c,selectedItemRef:h,getItemUrl:u,directoryNavigateOnClick:w,navigateOnClick:w,getFileTrailingVisual:_,getFileIcon:C,selectedChildren:P,expandedPath:N,singleSelect:I}),K>0&&(0,r.jsx)(R,{message:`${K} entries not shown`})]})})]})}let N=f.memo(j,(e,t)=>e.isActive===t.isActive&&e.isAncestorOfActive===t.isAncestorOfActive&&e.directory===t.directory&&(e.selectedChildren===t.selectedChildren||0===e.selectedChildren.length&&0===t.selectedChildren.length)&&e.expandedPath===t.expandedPath);function I({clientOnlyFilePaths:e,directoryItems:t,leadingPath:n,inheritsActive:a,onItemSelected:o,selectedItemRef:s,onRenderRow:c,getItemUrl:d,getFileTrailingVisual:u,getFileIcon:m,directoryNavigateOnClick:h,navigateOnClick:p,selectedChildren:g,expandedPath:y,singleSelect:x}){let v=(0,i.Z)(),b=(0,l.Z)(),_=f.useRef(b),C=f.useRef(o);f.useEffect(()=>{C.current=o,_.current=b},[o,b]);let S=f.useCallback((e,t)=>{C.current?.(e,t)},[]),j=f.useMemo(()=>t.map(t=>{let i=y===t.data.path,o=g?.includes(t.data.path),l=i||y.startsWith(`${t.data.path}/`),f=g?.filter(e=>e===t.data.path||e.startsWith(`${t.data.path}/`));return"directory"===t.data.contentType?(0,r.jsx)(N,{clientOnlyFilePaths:e,isActive:a||i,isAncestorOfActive:l,onItemSelected:S,leadingPath:n,directory:t,getItemUrl:d,getFetchUrl:v.getItemUrl,selectedItemRef:l?s:void 0,navigate:b,onRenderRow:c,navigateOnClick:h,getFileTrailingVisual:u,getFileIcon:m,itemCount:t.items.length,isSelected:o,selectedChildren:f,expandedPath:y,singleSelect:x},t.data.name):(0,r.jsx)(w,{onItemSelected:S,file:t,isActive:i,getItemUrl:d,selectedItemRef:i?s:void 0,navigate:b,navigateOnClick:p,onRenderRow:c,getFileTrailingVisual:u,getFileIcon:m,isSelected:o,singleSelect:x},t.data.name)}),[t,y,g,S,d,s,b,p,c,u,m,x,e,a,n,v.getItemUrl,h]);return(0,r.jsx)(r.Fragment,{children:j})}let T=f.memo(I);function k(e){let{clientOnlyFilePaths:t,rootItems:n,fetchError:a,loading:i,onRenderRow:o,getItemUrl:s,getFileTrailingVisual:l,getFileIcon:c,expandedPath:u,onSelectionChange:p}=e,[g,y]=(0,f.useReducer)(_,new Set),x=e.selectedItems||g,b=(0,f.useCallback)(e=>{let t=new Set;if(t.add(e.data.path),"directory"===e.data.contentType)for(let n of e.items)for(let e of b(n))t.add(e);return Array.from(t)},[]),C=(0,f.useCallback)((t,n)=>{var r;let a=(r=!!e.singleSelect,r?{type:"SINGLE_SELECT_FILE",path:t}:n?{type:"DESELECT_FILE",path:t}:{type:"SELECT_FILE",path:t});p?p(_(x,a)):y(a)},[p,e.singleSelect,x]),w=(0,f.useCallback)((t,n)=>{if(e.allowFolderReferences&&t.items.length>1e3){let e=t.data.path,n=x.has(e)?{type:"DESELECT_FILE",path:e}:{type:"SELECT_FILE",path:e};p?p(_(x,n)):y(n);return}let r=b(t),a=n?{type:"DESELECT_DIRECTORY",paths:r}:{type:"SELECT_DIRECTORY",paths:r};p?p(_(x,a)):y(a)},[b,p,x,e.allowFolderReferences]),S=(0,f.useCallback)((t,n)=>{if("directory"===t.contentType){if(e.allowFolderReferences&&n.items.length>1e3)return void w(n,x.has(t.path));let r=b(n).every(e=>x.has(e));w(n,r)}else C(t.path,x.has(t.path))},[b,w,C,x,e.allowFolderReferences]),j=(0,f.useCallback)(e=>{1===e.button&&e.preventDefault()},[]);return(0,r.jsx)(h.az,{onMouseDown:j,sx:{...e.sx},"data-testid":"repos-file-tree-container",className:v.Box,children:i?(0,r.jsxs)("div",{className:v.Box_1,children:[(0,r.jsx)(m.A,{"aria-label":"Loading file tree"}),(0,r.jsx)("span",{className:"fgColor-muted",children:"Fetching files..."})]}):(0,r.jsx)("nav",{"aria-label":"File Tree Navigation",children:(0,r.jsxs)(d.G,{"aria-label":"Files",children:[a&&(0,r.jsx)(R,{message:"Some files could not be loaded."}),(0,r.jsx)(T,{clientOnlyFilePaths:t,directoryItems:n,onItemSelected:S,selectedChildren:x?Array.from(x):[],selectedItemRef:e.selectedItemRef,onRenderRow:o,directoryNavigateOnClick:e.directoryNavigateOnClick,navigateOnClick:e.navigateOnClick,getItemUrl:s,getFileTrailingVisual:l,getFileIcon:c,expandedPath:u,singleSelect:e.singleSelect})]})})})}function R({message:e}){return(0,r.jsxs)(d.G.Item,{id:"error-tree-row",children:[(0,r.jsx)(d.G.LeadingVisual,{children:(0,r.jsx)(p.A,{icon:c.AlertFillIcon,className:v.Octicon})}),(0,r.jsx)("div",{className:v.Box_2,children:e||"Couldn't load."})]})}try{C.displayName||(C.displayName="WrappedFileTreeRow")}catch{}try{w.displayName||(w.displayName="FileTreeRow")}catch{}try{S.displayName||(S.displayName="MemoizedCheckbox")}catch{}try{j.displayName||(j.displayName="WrappedDirectoryTreeRow")}catch{}try{N.displayName||(N.displayName="DirectoryTreeRow")}catch{}try{I.displayName||(I.displayName="WrappedDirectoryContents")}catch{}try{T.displayName||(T.displayName="DirectoryContents")}catch{}try{k.displayName||(k.displayName="FileTreePicker")}catch{}try{R.displayName||(R.displayName="ErrorTreeRow")}catch{}},78314:(e,t,n)=>{n.d(t,{d:()=>s,t:()=>l});var r=n(74848),a=n(21728),i=n(96540);let o=i.createContext({});function s(e){let t,n=(0,a.c)(3),{repository:i,children:s}=e;return n[0]!==s||n[1]!==i?(t=(0,r.jsxs)(o.Provider,{value:i,children:[" ",s," "]}),n[0]=s,n[1]=i,n[2]=t):t=n[2],t}function l(){return i.useContext(o)}try{o.displayName||(o.displayName="CurrentRepositoryContext")}catch{}try{s.displayName||(s.displayName="CurrentRepositoryProvider")}catch{}},35898:(e,t,n)=>{n.d(t,{Q:()=>s,i:()=>l});var r=n(74848),a=n(21728),i=n(96540);let o=i.createContext(void 0);function s(e){let t,n=(0,a.c)(3),{user:i,children:s}=e;return n[0]!==s||n[1]!==i?(t=(0,r.jsxs)(o.Provider,{value:i,children:[" ",s," "]}),n[0]=s,n[1]=i,n[2]=t):t=n[2],t}function l(){return i.useContext(o)}try{o.displayName||(o.displayName="CurrentUserContext")}catch{}try{s.displayName||(s.displayName="CurrentUserProvider")}catch{}},49851:(e,t,n)=>{n.d(t,{Dy:()=>l,FD:()=>h,GS:()=>i,KJ:()=>o,LP:()=>c,OZ:()=>f,hO:()=>u,j6:()=>d,md:()=>m,wB:()=>p});var r=n(74848),a=n(21728);let i=e=>{let t,n,i,o,s,l,c,d=(0,a.c)(10);d[0]!==e?(t=void 0===e?{}:e,d[0]=e,d[1]=t):t=d[1];let{size:u,className:m}=t,h=void 0===u?16:u;return d[2]===Symbol.for("react.memo_cache_sentinel")?(n={display:"inline-block",verticalAlign:"text-bottom"},d[2]=n):n=d[2],d[3]===Symbol.for("react.memo_cache_sentinel")?(i=(0,r.jsx)("path",{d:"M11.1997 3.60004H12.4797C13.5401 3.60004 14.3997 4.45965 14.3997 5.52004V10.64C14.3997 11.7005 13.5401 12.56 12.4797 12.56H11.1997",stroke:"currentColor",strokeLinecap:"round"}),o=(0,r.jsx)("path",{d:"M4.79985 12.56H3.51985C2.45947 12.56 1.59985 11.7005 1.59985 10.64V5.52004C1.59985 4.45965 2.45947 3.60004 3.51985 3.60004H4.79985",stroke:"currentColor",strokeLinecap:"round"}),s=(0,r.jsx)("path",{d:"M8.00015 5.2C8.8838 5.2 9.60015 4.48366 9.60015 3.6C9.60015 2.71634 8.8838 2 8.00015 2C7.11649 2 6.40015 2.71634 6.40015 3.6C6.40015 4.48366 7.11649 5.2 8.00015 5.2Z",fill:"currentColor"}),l=(0,r.jsx)("path",{d:"M8.00015 14.16C8.8838 14.16 9.60015 13.4437 9.60015 12.56C9.60015 11.6764 8.8838 10.96 8.00015 10.96C7.11649 10.96 6.40015 11.6764 6.40015 12.56C6.40015 13.4437 7.11649 14.16 8.00015 14.16Z",fill:"currentColor"}),d[3]=i,d[4]=o,d[5]=s,d[6]=l):(i=d[3],o=d[4],s=d[5],l=d[6]),d[7]!==m||d[8]!==h?(c=(0,r.jsxs)("svg",{className:m,width:h,height:h,style:n,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:[i,o,s,l]}),d[7]=m,d[8]=h,d[9]=c):c=d[9],c},o=e=>{let t,n,i,o,s=(0,a.c)(7);s[0]!==e?(t=void 0===e?{}:e,s[0]=e,s[1]=t):t=s[1];let{size:l,className:c}=t,d=void 0===l?16:l;return s[2]===Symbol.for("react.memo_cache_sentinel")?(n={display:"inline-block",verticalAlign:"text-bottom"},i=(0,r.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.515.456a1.555 1.555 0 00-2.2 0L6.58 6.19a1.556 1.556 0 00-.396.673l-.825 2.89a.667.667 0 00.824.824l2.89-.826c.254-.072.485-.209.672-.396l5.735-5.734a1.556 1.556 0 000-2.2l-.965-.965zm-1.257.942a.222.222 0 01.314 0l.965.966a.222.222 0 010 .314L13.415 3.8l-1.28-1.28 1.123-1.122zm-2.065 2.066l1.279 1.279-3.67 3.67a.221.221 0 01-.096.056l-1.736.496.496-1.736c.01-.036.03-.07.057-.096l3.67-3.67zM1.639 4.778a2.25 2.25 0 012.25-2.25h3.154a.75.75 0 000-1.5H3.889a3.75 3.75 0 00-3.75 3.75v7.333a3.75 3.75 0 003.75 3.75h7.333a3.75 3.75 0 003.75-3.75V8.445a.75.75 0 00-1.5 0v3.666a2.25 2.25 0 01-2.25 2.25H3.889a2.25 2.25 0 01-2.25-2.25V4.778z",clipRule:"evenodd"}),s[2]=n,s[3]=i):(n=s[2],i=s[3]),s[4]!==c||s[5]!==d?(o=(0,r.jsx)("svg",{className:c,width:d,height:d,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",style:n,children:i}),s[4]=c,s[5]=d,s[6]=o):o=s[6],o},s=e=>{let t,n,i,o,s=(0,a.c)(7);s[0]!==e?(t=void 0===e?{}:e,s[0]=e,s[1]=t):t=s[1];let{size:l,className:c}=t,d=void 0===l?16:l;return s[2]===Symbol.for("react.memo_cache_sentinel")?(n={display:"inline-block",verticalAlign:"text-bottom"},i=(0,r.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M13 .5H3A2.5 2.5 0 0 0 .5 3v10A2.5 2.5 0 0 0 3 15.5h10a2.5 2.5 0 0 0 2.5-2.5V3A2.5 2.5 0 0 0 13 .5M2 3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1zm6 6.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5M12.25 5a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0M5 12.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5",clipRule:"evenodd"}),s[2]=n,s[3]=i):(n=s[2],i=s[3]),s[4]!==c||s[5]!==d?(o=(0,r.jsx)("svg",{className:c,width:d,height:d,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",style:n,children:i}),s[4]=c,s[5]=d,s[6]=o):o=s[6],o},l=e=>{let t,n,i,o,s,l=(0,a.c)(8);l[0]!==e?(t=void 0===e?{}:e,l[0]=e,l[1]=t):t=l[1];let{size:c,className:d}=t,u=void 0===c?16:c;return l[2]===Symbol.for("react.memo_cache_sentinel")?(n={display:"inline-block",verticalAlign:"text-bottom"},i=(0,r.jsx)("path",{d:"M7.41299 14.25H1.75C1.19772 14.25 0.75 13.8023 0.75 13.25V2.75C0.75 2.19772 1.19772 1.75 1.75 1.75H5C5.31476 1.75 5.61115 1.89819 5.8 2.15L6.7 3.35C6.88885 3.60181 7.18524 3.75 7.5 3.75H14.25C14.8023 3.75 15.25 4.19772 15.25 4.75V8.48779",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),o=(0,r.jsx)("path",{d:"M12.265 9.15977C12.3446 8.94235 12.6521 8.94235 12.7317 9.15977L12.9693 9.80865C13.3464 10.8387 14.158 11.6503 15.1881 12.0274L15.8369 12.265C16.0544 12.3446 16.0544 12.6521 15.8369 12.7317L15.1881 12.9692C14.158 13.3463 13.3464 14.158 12.9693 15.188L12.7317 15.8369C12.6521 16.0543 12.3446 16.0543 12.265 15.8369L12.0275 15.188C11.6504 14.158 10.8387 13.3463 9.80871 12.9692L9.15983 12.7317C8.94241 12.6521 8.94241 12.3446 9.15983 12.265L9.80871 12.0274C10.8387 11.6503 11.6504 10.8387 12.0275 9.80865L12.265 9.15977Z",fill:"currentColor"}),l[2]=n,l[3]=i,l[4]=o):(n=l[2],i=l[3],o=l[4]),l[5]!==d||l[6]!==u?(s=(0,r.jsxs)("svg",{className:d,width:u,height:u,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",style:n,children:[i,o]}),l[5]=d,l[6]=u,l[7]=s):s=l[7],s},c=e=>{let t,n,i,o,s,l=(0,a.c)(8);l[0]!==e?(t=void 0===e?{}:e,l[0]=e,l[1]=t):t=l[1];let{size:c,className:d}=t,u=void 0===c?16:c;return l[2]===Symbol.for("react.memo_cache_sentinel")?(n={display:"inline-block",verticalAlign:"text-bottom"},i=(0,r.jsx)("path",{d:"M16.0376 9.67565V5.82038C16.0376 5.69043 15.9257 5.58508 15.7876 5.58508H11.6914C11.4687 5.58508 11.3571 5.83853 11.5146 5.98676L15.6108 9.84196C15.7683 9.99019 16.0376 9.88525 16.0376 9.67565Z",fill:"currentColor"}),o=(0,r.jsx)("path",{d:"M1.89601 3.25629C4.26064 1.03075 8.04807 0.960969 10.5015 3.04765L10.7339 3.25629L10.7857 3.3096C11.0259 3.58685 11.0085 3.99602 10.7339 4.25445C10.4593 4.51252 10.0254 4.52825 9.73097 4.30225L9.67336 4.25445L9.4966 4.09544C7.63201 2.50983 4.75358 2.56313 2.95656 4.25445C1.10158 6.00031 1.10158 8.83023 2.95656 10.5761C4.81155 12.322 7.8184 12.3219 9.67336 10.5761L13.563 6.91622C13.8559 6.64063 14.3307 6.64058 14.6236 6.91622C14.9163 7.19186 14.9163 7.63873 14.6236 7.91438L10.7339 11.5752C8.29328 13.8718 4.33667 13.8718 1.89601 11.5752C-0.544758 9.27799 -0.544771 5.55349 1.89601 3.25629Z",fill:"currentColor"}),l[2]=n,l[3]=i,l[4]=o):(n=l[2],i=l[3],o=l[4]),l[5]!==d||l[6]!==u?(s=(0,r.jsxs)("svg",{className:d,width:u,height:u,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",style:n,children:[i,o]}),l[5]=d,l[6]=u,l[7]=s):s=l[7],s},d=e=>{let t,n,i,o,s,l=(0,a.c)(8);l[0]!==e?(t=void 0===e?{}:e,l[0]=e,l[1]=t):t=l[1];let{size:c,className:d}=t,u=void 0===c?16:c;return l[2]===Symbol.for("react.memo_cache_sentinel")?(n={display:"inline-block",verticalAlign:"text-bottom"},l[2]=n):n=l[2],l[3]===Symbol.for("react.memo_cache_sentinel")?(i=(0,r.jsxs)("g",{clipPath:"url(#boolean-on-a)",children:[(0,r.jsx)("rect",{x:"1.25",y:"1.25",width:"13.5",height:"13.5",rx:"1.75",stroke:"currentColor",strokeWidth:"1.5"}),(0,r.jsx)("rect",{x:"7",y:"5",width:"2",height:"6",rx:"1",fill:"currentColor"})]}),l[3]=i):i=l[3],l[4]===Symbol.for("react.memo_cache_sentinel")?(o=(0,r.jsx)("defs",{children:(0,r.jsx)("clipPath",{id:"boolean-on-a",children:(0,r.jsx)("rect",{width:"16",height:"16",fill:"white"})})}),l[4]=o):o=l[4],l[5]!==d||l[6]!==u?(s=(0,r.jsxs)("svg",{className:d,xmlns:"http://www.w3.org/2000/svg",width:u,height:u,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",style:n,children:[i,o]}),l[5]=d,l[6]=u,l[7]=s):s=l[7],s},u=e=>{let t,n,i,o,s,l=(0,a.c)(8);l[0]!==e?(t=void 0===e?{}:e,l[0]=e,l[1]=t):t=l[1];let{size:c,className:d}=t,u=void 0===c?16:c;return l[2]===Symbol.for("react.memo_cache_sentinel")?(n={display:"inline-block",verticalAlign:"text-bottom"},l[2]=n):n=l[2],l[3]===Symbol.for("react.memo_cache_sentinel")?(i=(0,r.jsxs)("g",{clipPath:"url(#boolean-off-a)",children:[(0,r.jsx)("rect",{x:"1.25",y:"1.25",width:"13.5",height:"13.5",rx:"1.75",stroke:"currentColor",strokeWidth:"1.5"}),(0,r.jsx)("circle",{cx:"8",cy:"8",r:"2.25",stroke:"currentColor",strokeWidth:"1.5"})]}),l[3]=i):i=l[3],l[4]===Symbol.for("react.memo_cache_sentinel")?(o=(0,r.jsx)("defs",{children:(0,r.jsx)("clipPath",{id:"boolean-off-a",children:(0,r.jsx)("rect",{width:"16",height:"16",fill:"white"})})}),l[4]=o):o=l[4],l[5]!==d||l[6]!==u?(s=(0,r.jsxs)("svg",{className:d,xmlns:"http://www.w3.org/2000/svg",width:u,height:u,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",style:n,children:[i,o]}),l[5]=d,l[6]=u,l[7]=s):s=l[7],s},m=e=>{let t,n,i,o,s,l,c,d=(0,a.c)(10);d[0]!==e?(t=void 0===e?{}:e,d[0]=e,d[1]=t):t=d[1];let{size:u,className:m}=t,h=void 0===u?16:u;return d[2]===Symbol.for("react.memo_cache_sentinel")?(n={display:"inline-block",verticalAlign:"text-bottom"},i=(0,r.jsx)("rect",{x:"1.25",y:"3.25",width:"13.5",height:"9.5",rx:"1.75",stroke:"currentColor",strokeWidth:"1.5"}),o=(0,r.jsx)("path",{d:"M6 6L6 10",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),s=(0,r.jsx)("path",{d:"M4 6H8",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),l=(0,r.jsx)("path",{d:"M9 10L12 10",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),d[2]=n,d[3]=i,d[4]=o,d[5]=s,d[6]=l):(n=d[2],i=d[3],o=d[4],s=d[5],l=d[6]),d[7]!==m||d[8]!==h?(c=(0,r.jsxs)("svg",{className:m,xmlns:"http://www.w3.org/2000/svg",width:h,height:h,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",style:n,children:[i,o,s,l]}),d[7]=m,d[8]=h,d[9]=c):c=d[9],c},h=e=>{let t,n,i,o,s,l,c,d,u,m=(0,a.c)(12);m[0]!==e?(t=void 0===e?{}:e,m[0]=e,m[1]=t):t=m[1];let{size:h,className:p}=t,f=void 0===h?16:h;return m[2]===Symbol.for("react.memo_cache_sentinel")?(n={display:"inline-block",verticalAlign:"text-bottom"},i=(0,r.jsx)("path",{d:"M13 11.25L12.25 11.25L12.25 12.75L13 12.75L13 12L13 11.25ZM14 12.75C14.4142 12.75 14.75 12.4142 14.75 12C14.75 11.5858 14.4142 11.25 14 11.25L14 12L14 12.75ZM13 12L13 12.75L14 12.75L14 12L14 11.25L13 11.25L13 12Z",fill:"currentColor"}),o=(0,r.jsx)("path",{d:"M2 11.25C1.58579 11.25 1.25 11.5858 1.25 12C1.25 12.4142 1.58579 12.75 2 12.75L2 12L2 11.25ZM7 12.75L7.75 12.75L7.75 11.25L7 11.25L7 12L7 12.75ZM2 12L2 12.75L7 12.75L7 12L7 11.25L2 11.25L2 12Z",fill:"currentColor"}),s=(0,r.jsx)("circle",{cx:"10",cy:"12",r:"2.25",stroke:"currentColor",strokeWidth:"1.5"}),l=(0,r.jsx)("path",{d:"M2 3.25C1.58579 3.25 1.25 3.58579 1.25 4C1.25 4.41421 1.58579 4.75 2 4.75L2 4L2 3.25ZM3 4.75L3.75 4.75L3.75 3.25L3 3.25L3 4L3 4.75ZM2 4L2 4.75L3 4.75L3 4L3 3.25L2 3.25L2 4Z",fill:"currentColor"}),c=(0,r.jsx)("path",{d:"M9 3.25L8.25 3.25L8.25 4.75L9 4.75L9 4L9 3.25ZM14 4.75C14.4142 4.75 14.75 4.41421 14.75 4C14.75 3.58579 14.4142 3.25 14 3.25L14 4L14 4.75ZM9 4L9 4.75L14 4.75L14 4L14 3.25L9 3.25L9 4Z",fill:"currentColor"}),d=(0,r.jsx)("circle",{cx:"6",cy:"4",r:"2.25",stroke:"currentColor",strokeWidth:"1.5"}),m[2]=n,m[3]=i,m[4]=o,m[5]=s,m[6]=l,m[7]=c,m[8]=d):(n=m[2],i=m[3],o=m[4],s=m[5],l=m[6],c=m[7],d=m[8]),m[9]!==p||m[10]!==f?(u=(0,r.jsxs)("svg",{className:p,xmlns:"http://www.w3.org/2000/svg",width:f,height:f,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",style:n,children:[i,o,s,l,c,d]}),m[9]=p,m[10]=f,m[11]=u):u=m[11],u},p=e=>{let t,n,i,o,s,l=(0,a.c)(8);l[0]!==e?(t=void 0===e?{}:e,l[0]=e,l[1]=t):t=l[1];let{size:c,className:d}=t,u=void 0===c?16:c;return l[2]===Symbol.for("react.memo_cache_sentinel")?(n={display:"inline-block",verticalAlign:"text-bottom"},i=(0,r.jsx)("rect",{x:"1.25",y:"3.25",width:"13.5",height:"9.5",rx:"1.75",stroke:"currentColor",strokeWidth:"1.5"}),o=(0,r.jsx)("path",{d:"M9.81055 7.75L11.1895 7.75L10.5 8.43945L9.81055 7.75Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),l[2]=n,l[3]=i,l[4]=o):(n=l[2],i=l[3],o=l[4]),l[5]!==d||l[6]!==u?(s=(0,r.jsxs)("svg",{className:d,xmlns:"http://www.w3.org/2000/svg",width:u,height:u,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",style:n,children:[i,o]}),l[5]=d,l[6]=u,l[7]=s):s=l[7],s},f={compose:o,dice:s,loops:c,node:i,spaces:l,booleanOn:d,booleanOff:u,input:m,range:h,select:p};try{i.displayName||(i.displayName="NodeIcon")}catch{}try{o.displayName||(o.displayName="ComposeIcon")}catch{}try{s.displayName||(s.displayName="DiceIcon")}catch{}try{l.displayName||(l.displayName="SpacesIcon")}catch{}try{c.displayName||(c.displayName="LoopsIcon")}catch{}try{d.displayName||(d.displayName="BooleanOnIcon")}catch{}try{u.displayName||(u.displayName="BooleanOffIcon")}catch{}try{m.displayName||(m.displayName="InputIcon")}catch{}try{h.displayName||(h.displayName="RangeIcon")}catch{}try{p.displayName||(p.displayName="SelectIcon")}catch{}},82595:(e,t,n)=>{n.d(t,{I:()=>d});var r=n(74848),a=n(21728),i=n(34164),o=n(49851),s=n(38621);let l={container:"Icon-module__container--stxcA",customColor:"Icon-module__customColor--dELU9",hasBackground:"Icon-module__hasBackground--xipmb",auburn:"Icon-module__auburn--YGPGc",blue:"Icon-module__blue--YHcrq",brown:"Icon-module__brown--HcCTh",coral:"Icon-module__coral--oTikb",cyan:"Icon-module__cyan--h419p",gray:"Icon-module__gray--VfK1C",green:"Icon-module__green--DZFaM",indigo:"Icon-module__indigo--VVAUE",lemon:"Icon-module__lemon--pOsfR",lime:"Icon-module__lime--qwkv8",olive:"Icon-module__olive--UDJGA",orange:"Icon-module__orange--Zpvu1",pine:"Icon-module__pine--w0tcb",pink:"Icon-module__pink--ai8ga",plum:"Icon-module__plum--IYN4u",purple:"Icon-module__purple--rFSpj",red:"Icon-module__red--OLgIH",teal:"Icon-module__teal--eysuL",yellow:"Icon-module__yellow--UE4Kb"},c=new Set(Object.keys(l).filter(e=>!["container","hasBackground","customColor"].includes(e)));function d(e){let t,n,d,u,m,h,p=(0,a.c)(19),{icon:f,hasBackground:g,color:y,size:x,className:v}=e,b=void 0!==g&&g,_=void 0===y?"gray":y,C=void 0===x?16:x;if("string"==typeof f)if(f in o.OZ)t=o.OZ[f];else{let e;p[0]!==f?(e=function(e){let t=`${e.replaceAll(/(?:^|-)(\w)/g,(e,t)=>t.toUpperCase())}Icon`;return t in s?s[t]:void 0}(f),p[0]=f,p[1]=e):e=p[1],t=e}else t=f;if(!t)return null;p[2]!==_?(n=c.has(_),p[2]=_,p[3]=n):n=p[3];let w=n,S=`${b?2*C:C}px`;p[4]!==_||p[5]!==w||p[6]!==S?(d={"--custom-size":S},w||(d["--custom-color"]=_),p[4]=_,p[5]=w,p[6]=S,p[7]=d):d=p[7];let j=w?l[_]:l.customColor,N=b&&l.hasBackground;return p[8]!==v||p[9]!==j||p[10]!==N?(u=(0,i.$)(l.container,j,N,v),p[8]=v,p[9]=j,p[10]=N,p[11]=u):u=p[11],p[12]!==t||p[13]!==C?(m=(0,r.jsx)(t,{size:C,fill:"currentColor"}),p[12]=t,p[13]=C,p[14]=m):m=p[14],p[15]!==d||p[16]!==u||p[17]!==m?(h=(0,r.jsx)("div",{style:d,className:u,children:m}),p[15]=d,p[16]=u,p[17]=m,p[18]=h):h=p[18],h}try{d.displayName||(d.displayName="Icon")}catch{}},94195:(e,t,n)=>{n.d(t,{Gy:()=>c,LB:()=>p,nn:()=>f,lm:()=>m});var r=n(74848),a=n(96540);let i=null,o=null,s=new Set;function l(e){return s.add(e),i||(i=new ResizeObserver(()=>{o||(o=requestAnimationFrame(()=>{for(let e of(o=null,s))e()}))})).observe(document.documentElement),()=>{s.delete(e),0===s.size&&i&&(i.disconnect(),i=null)}}let c={small:1,medium:544,large:768,xlarge:1012,xxlarge:1280,xxxlarge:1350,xxxxlarge:1440},d=[c.xxxxlarge,c.xxxlarge,c.xxlarge,c.xlarge,c.large,c.medium,c.small],u=a.createContext({screenSize:c.small});function m(){return a.useContext(u)}function h(){return f(window.innerWidth)}function p({children:e,initialValue:t=c.small}){let n=(0,a.useSyncExternalStore)(l,h,(0,a.useCallback)(()=>t,[t])),i=(0,a.useMemo)(()=>({screenSize:n}),[n]);return(0,r.jsx)(u.Provider,{value:i,children:e})}function f(e){for(let t of d)if(e>=t)return t;return c.small}try{u.displayName||(u.displayName="ScreenContext")}catch{}try{p.displayName||(p.displayName="ScreenSizeProvider")}catch{}},33544:(e,t,n)=>{n.d(t,{x:()=>f});var r=n(74848),a=n(38621),i=n(1805),o=n(1992),s=n(5524),l=n(21998),c=n(13017),d=n(96540),u=n(11083),m=n(62227),h=n(34164),p=n(69599);function f({className:e,portalContainerName:t,protectedOrgs:n,maxVisibleOrgNames:o=3,redirectURI:s,useFullWidthStyle:f,forceWrap:x,sx:v}){let b=(0,c.zy)(),_=(0,d.useRef)(!1);if((0,d.useEffect)(()=>{(0,p.G7)("record_sso_banner_metrics")&&!_.current&&n&&n.length>0&&((0,u.i)({incrementKey:(0,p.G7)("global_sso_banner")?"LEGACY_SSO_BANNER_DISPLAYED_WITH_GLOBAL_BANNER_ENABLED":"LEGACY_SSO_BANNER_DISPLAYED",requestUrl:window.location.href}),_.current=!0)},[n]),!n||0===n.length)return null;let C=Math.max(0,n.length-o),w=1===n.length||C>0?(0,r.jsx)("b",{children:n.slice(0,o).join(", ")}):(0,r.jsxs)("span",{children:[(0,r.jsx)("b",{children:n.slice(0,n.length-1).join(", ")}),n.length>2&&","," and ",(0,r.jsx)("b",{children:n[n.length-1]})]});return(0,r.jsx)(l.az,{sx:v,className:e,"data-testid":"sso-banner",children:(0,r.jsx)("div",{className:m.A.Box,children:(0,r.jsx)("section",{"aria-label":"Single sign-on information",children:(0,r.jsx)(l.Hx,{sx:{borderRadius:2*!f,borderWidth:f?"1px 0":1},className:m.A.Flash,children:1===n.length?(0,r.jsxs)("div",{children:[(0,r.jsx)(a.ShieldLockIcon,{className:m.A.ShieldLockIcon}),(0,r.jsx)(i.A,{inline:!0,href:`/orgs/${n[0]}/sso?return_to=${y({location:b,redirectURI:s})}`,children:"Single sign-on"})," ","to see results in the ",(0,r.jsx)("b",{children:n[0]})," organization."]}):(0,r.jsxs)("div",{className:m.A.Box_1,children:[(0,r.jsx)(a.ShieldLockIcon,{className:m.A.Octicon}),(0,r.jsxs)("div",{className:(0,h.$)(m.A.Box_2,x&&m.A.ForceWrap),children:[(0,r.jsxs)("p",{className:m.A.ProtectedOrgs_FullList,children:["Single sign-on to see results in ",0===C&&"the ",o>0&&(0,r.jsxs)(r.Fragment,{children:[w," "]}),C>0&&(0,r.jsxs)(r.Fragment,{children:[o>0&&"and ",C," other"," "]}),n.length>1&&1!==C?"organizations":"organization","."]}),(0,r.jsx)("p",{className:m.A.ProtectedOrgs_Shortened,children:"Single sign-on to see results in your organizations"}),(0,r.jsx)("div",{style:{flexShrink:0},children:(0,r.jsx)(g,{portalContainerName:t,protectedOrgs:n,redirectURI:s})})]})]})})})})})}function g({portalContainerName:e,protectedOrgs:t,redirectURI:n}){let a=(0,c.zy)();return(0,r.jsxs)(o.W,{children:[(0,r.jsx)(o.W.Button,{size:"small",children:"Select an organization"}),(0,r.jsx)(o.W.Overlay,{portalContainerName:e,children:(0,r.jsx)(s.l,{children:t.map(e=>(0,r.jsx)(s.l.Item,{onSelect:()=>{window.location.href=`/orgs/${encodeURIComponent(e)}/sso?return_to=${y({location:a,redirectURI:n})}`},children:e},`org-${e}`))})})]})}function y({location:e,redirectURI:t}){return encodeURIComponent(t?t(e):e.pathname+e.search+e.hash)}try{f.displayName||(f.displayName="SingleSignOnBanner")}catch{}try{g.displayName||(g.displayName="SingleSignOnButton")}catch{}},77274:(e,t,n)=>{n.d(t,{NE:()=>g,Mm:()=>x,YS:()=>y,mN:()=>_,XF:()=>v,Cf:()=>b});var r=n(74848),a=n(96540),i=n(36284),o=n(4175),s=n(1805),l=n(11196),c=n(21373),d=n(15042),u=n(38621);let m={bodyContainer:"UserFeedback-module__bodyContainer--G2bmg",ratingContainer:"UserFeedback-module__ratingContainer--Mg11z",ratingOption:"UserFeedback-module__ratingOption--ZLoA0",ratingButton:"UserFeedback-module__ratingButton--wgOnk",ratingCaption:"UserFeedback-module__ratingCaption--TCp_8",footerContainer:"UserFeedback-module__footerContainer--wvEjF",footerActionButtonGroup:"UserFeedback-module__footerActionButtonGroup--FzuM1",copyLogsSuccessIcon:"UserFeedback-module__copyLogsSuccessIcon--i0uqN",messageContainer:"UserFeedback-module__messageContainer--FW6dD",validationError:"UserFeedback-module__validationError--e3pDo",privacyText:"UserFeedback-module__privacyText--J0awt",Dialog:"UserFeedback-module__Dialog--n5pi6"},h={verySatisfied:"UserFeedbackColors-module__verySatisfied--HQthN",good:"UserFeedbackColors-module__good--a6lz4",satisfied:"UserFeedbackColors-module__satisfied--R1wkm",dissatisfied:"UserFeedbackColors-module__dissatisfied--fRn_n",veryDissatisfied:"UserFeedbackColors-module__veryDissatisfied--C4vDF",bad:"UserFeedbackColors-module__bad--FROJd"};var p=n(34164);function f({title:e="Give feedback",requestID:t,options:n,returnFocusRef:f,onSubmit:g,onClose:y},x){let[v,b]=(0,a.useState)(null),[_,C]=(0,a.useState)(""),[w,S]=(0,a.useState)([]),[j,N]=(0,a.useState)(0),[I,T]=(0,a.useState)(!1),[k,R]=(0,a.useState)(!1);(0,a.useEffect)(()=>{w.length>0&&N(e=>e+1)},[w]),(0,a.useImperativeHandle)(x,()=>({openDialog:e=>{if(null!=e){if(!n.some(t=>t.value===e))throw Error("invalid initial option value");b(e)}T(!0)}}));let A=async e=>{e.preventDefault();let t=[];try{t=await g(v,_)}catch{t=["An error occurred while submitting your feedback."]}S(t),0===t.length&&E()},E=()=>{b(null),C(""),S([]),T(!1),y?.()},L=e=>{C(e.target.value),S([])},M=async()=>{if(t){try{await navigator.clipboard.writeText(`Request ID: ${t}`)}catch{S(e=>[...e,"Failed to copy logs."]);return}R(!0),setTimeout(()=>{R(!1)},1e3)}};return(0,r.jsx)(r.Fragment,{children:I&&(0,r.jsx)(d.l,{onClose:E,title:e,renderBody:()=>(0,r.jsxs)("div",{className:m.bodyContainer,children:[(0,r.jsxs)(i.A,{required:!0,children:[(0,r.jsx)(i.A.Label,{visuallyHidden:!0,children:"Rating"}),(0,r.jsx)("div",{className:m.ratingContainer,children:n.map(e=>(0,r.jsxs)("div",{className:m.ratingOption,children:[(0,r.jsx)("button",{type:"button",role:"radio","aria-label":e.name,"aria-checked":v===e.value,onClick:()=>{b(e.value),S([])},className:(0,p.$)(m.ratingButton,h[e.color]),children:e.icon}),(0,r.jsx)("span",{className:m.ratingCaption,children:e.name})]},e.name))})]}),(0,r.jsxs)("div",{className:m.messageContainer,children:[(0,r.jsxs)(i.A,{children:[(0,r.jsx)(i.A.Label,{children:"Message"}),(0,r.jsx)(o.Ay,{placeholder:"Tell us what you liked or what could be better",value:_,onChange:L,resize:"vertical",block:!0,rows:5})]}),(0,r.jsxs)("span",{className:m.privacyText,children:["Please don\u2019t include sensitive, confidential, or personal data. Your feedback helps us improve our services in line with our"," ",(0,r.jsx)(s.A,{href:"https://docs.github.com/en/site-policy/privacy-policies/github-general-privacy-statement",inline:!0,muted:!0,children:"Privacy Policy"}),"."]}),(0,r.jsx)("div",{className:m.validationError,role:"alert",children:w.map(e=>(0,r.jsx)("div",{children:e},e))},j)]})]}),renderFooter:()=>(0,r.jsxs)("div",{className:m.footerContainer,children:[(0,r.jsx)("div",{children:t&&(0,r.jsx)(l.m,{text:"Copy logs to add in feedback",direction:"n",children:(0,r.jsx)(c.Q,{leadingVisual:k?(0,r.jsx)(u.CheckIcon,{className:m.copyLogsSuccessIcon,size:16}):(0,r.jsx)(u.CopyIcon,{size:16}),onClick:M,variant:"default",children:k?"Copied!":"Copy logs"})})}),(0,r.jsxs)("div",{className:m.footerActionButtonGroup,children:[(0,r.jsx)(c.Q,{onClick:E,children:"Cancel"}),(0,r.jsx)(c.Q,{variant:"primary",type:"submit",onClick:A,children:"Send"})]})]}),className:m.Dialog,returnFocusRef:f})})}let g=(0,a.forwardRef)(f),y=(0,r.jsxs)("svg",{width:"16",height:"16","aria-hidden":"true",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.65646 10.7C6.15313 9.85483 7.09616 9.3 8 9.3C8.47794 9.3 9.0345 9.50535 9.54632 9.9146C9.83116 10.1424 10.0753 10.4124 10.2645 10.7H5.65646ZM11.8447 11.016C11.3379 9.39273 9.66897 8 8 8C6.30092 8 4.60185 9.23723 4.12902 11.011C3.98676 11.5446 4.44771 12 5 12H11C11.5523 12 12.0093 11.5432 11.8447 11.016Z"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.89649 4.7586C4.02981 4.42529 4.40809 4.26317 4.7414 4.39649L7.00928 5.30364C7.63789 5.55509 7.6379 6.44491 7.00928 6.69636L4.7414 7.60351C4.40809 7.73683 4.02981 7.57471 3.89649 7.2414C3.76317 6.90809 3.92529 6.52981 4.2586 6.39649L5.24982 6L4.2586 5.60351C3.92529 5.47019 3.76317 5.09191 3.89649 4.7586Z"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.1035 4.7586C11.9702 4.42529 11.5919 4.26317 11.2586 4.39649L8.99072 5.30364C8.36211 5.55509 8.3621 6.44491 8.99072 6.69636L11.2586 7.60351C11.5919 7.73683 11.9702 7.57471 12.1035 7.2414C12.2368 6.90809 12.0747 6.52981 11.7414 6.39649L10.7502 6L11.7414 5.60351C12.0747 5.47019 12.2368 5.09191 12.1035 4.7586Z"})]}),x=(0,r.jsxs)("svg",{width:"16",height:"16","aria-hidden":"true",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}),(0,r.jsx)("path",{d:"M6.5 6.5C6.5 7.05228 6.05228 7.5 5.5 7.5C4.94772 7.5 4.5 7.05228 4.5 6.5C4.5 5.94772 4.94772 5.5 5.5 5.5C6.05228 5.5 6.5 5.94772 6.5 6.5Z"}),(0,r.jsx)("path",{d:"M11.5 6.5C11.5 7.05228 11.0523 7.5 10.5 7.5C9.94772 7.5 9.5 7.05228 9.5 6.5C9.5 5.94772 9.94772 5.5 10.5 5.5C11.0523 5.5 11.5 5.94772 11.5 6.5Z"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.3416 11.8591C9.33064 10.0058 6.66936 10.0058 5.65842 11.8591C5.46007 12.2228 5.0045 12.3568 4.64086 12.1584C4.27722 11.9601 4.14323 11.5045 4.34158 11.1409C5.92104 8.24518 10.079 8.24518 11.6584 11.1409C11.8568 11.5045 11.7228 11.9601 11.3591 12.1584C10.9955 12.3568 10.5399 12.2228 10.3416 11.8591Z"})]}),v=(0,r.jsxs)("svg",{width:"16","aria-hidden":"true",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}),(0,r.jsx)("path",{d:"M6.5 6.5C6.5 7.05228 6.05228 7.5 5.5 7.5C4.94772 7.5 4.5 7.05228 4.5 6.5C4.5 5.94772 4.94772 5.5 5.5 5.5C6.05228 5.5 6.5 5.94772 6.5 6.5Z"}),(0,r.jsx)("path",{d:"M11.5 6.5C11.5 7.05228 11.0523 7.5 10.5 7.5C9.94772 7.5 9.5 7.05228 9.5 6.5C9.5 5.94772 9.94772 5.5 10.5 5.5C11.0523 5.5 11.5 5.94772 11.5 6.5Z"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 11C5 10.5858 5.33579 10.25 5.75 10.25H10.25C10.6642 10.25 11 10.5858 11 11C11 11.4142 10.6642 11.75 10.25 11.75H5.75C5.33579 11.75 5 11.4142 5 11Z"})]}),b=(0,r.jsxs)("svg",{width:"16","aria-hidden":"true",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}),(0,r.jsx)("path",{d:"M6.5 6.5C6.5 7.05228 6.05228 7.5 5.5 7.5C4.94772 7.5 4.5 7.05228 4.5 6.5C4.5 5.94772 4.94772 5.5 5.5 5.5C6.05228 5.5 6.5 5.94772 6.5 6.5Z"}),(0,r.jsx)("path",{d:"M11.5 6.5C11.5 7.05228 11.0523 7.5 10.5 7.5C9.94772 7.5 9.5 7.05228 9.5 6.5C9.5 5.94772 9.94772 5.5 10.5 5.5C11.0523 5.5 11.5 5.94772 11.5 6.5Z"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.3569 9.61413C9.28933 11.3934 6.71067 11.3934 5.64312 9.61413C5.43001 9.25894 4.96931 9.14377 4.61413 9.35688C4.25894 9.56999 4.14377 10.0307 4.35688 10.3859C6.00704 13.1361 9.99296 13.1361 11.6431 10.3859C11.8562 10.0307 11.7411 9.56999 11.3859 9.35688C11.0307 9.14377 10.57 9.25894 10.3569 9.61413Z"})]}),_=(0,r.jsxs)("svg",{width:"16","aria-hidden":"true",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.65646 10.3C6.15313 11.1452 7.09616 11.7 8 11.7C8.47794 11.7 9.0345 11.4947 9.54632 11.0854C9.83116 10.8576 10.0753 10.5876 10.2645 10.3H5.65646ZM11.8447 9.98403C11.3379 11.6073 9.66897 13 8 13C6.30092 13 4.60185 11.7628 4.12902 9.98904C3.98676 9.45539 4.44771 9 5 9H11C11.5523 9 12.0093 9.45684 11.8447 9.98403Z"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.3292 6.83541C10.9875 6.15213 10.0125 6.15213 9.67082 6.83541C9.48558 7.20589 9.03507 7.35606 8.66459 7.17082C8.29411 6.98558 8.14394 6.53507 8.32918 6.16459C9.22361 4.37574 11.7764 4.37574 12.6708 6.16459C12.8561 6.53507 12.7059 6.98558 12.3354 7.17082C11.9649 7.35606 11.5144 7.20589 11.3292 6.83541Z"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.32918 6.83541C5.98754 6.15213 5.01246 6.15213 4.67082 6.83541C4.48558 7.20589 4.03507 7.35606 3.66459 7.17082C3.29411 6.98558 3.14394 6.53507 3.32918 6.16459C4.22361 4.37574 6.77639 4.37574 7.67082 6.16459C7.85606 6.53507 7.70589 6.98558 7.33541 7.17082C6.96493 7.35606 6.51442 7.20589 6.32918 6.83541Z"})]});try{f.displayName||(f.displayName="UserFeedbackInner")}catch{}try{g.displayName||(g.displayName="UserFeedback")}catch{}}}]);
//# sourceMappingURL=packages_copilot-chat_hooks_use-chat-message-behavior_ts-packages_copilot-chat_hooks_use-chat-2abdaf-53a841117de7.js.map